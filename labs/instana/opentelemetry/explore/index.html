<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-instana/opentelemetry/explore/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">6. Exploring Instana | IBM AIOps Automation SWAT</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/waiops-tech-jam/labs/instana/opentelemetry/explore/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="6. Exploring Instana | IBM AIOps Automation SWAT"><meta data-rh="true" name="description" content="Explore Instana"><meta data-rh="true" property="og:description" content="Explore Instana"><link data-rh="true" rel="icon" href="/waiops-tech-jam/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://github.com/waiops-tech-jam/labs/instana/opentelemetry/explore/"><link data-rh="true" rel="alternate" href="https://github.com/waiops-tech-jam/labs/instana/opentelemetry/explore/" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/waiops-tech-jam/labs/instana/opentelemetry/explore/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/waiops-tech-jam/blog/rss.xml" title="IBM AIOps Automation SWAT RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/waiops-tech-jam/blog/atom.xml" title="IBM AIOps Automation SWAT Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WTTHT6SEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WTTHT6SEH",{anonymize_ip:!0})</script><link rel="stylesheet" href="/waiops-tech-jam/assets/css/styles.f87e0e6c.css">
<link rel="preload" href="/waiops-tech-jam/assets/js/runtime~main.bf944562.js" as="script">
<link rel="preload" href="/waiops-tech-jam/assets/js/main.df3d1d6f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/waiops-tech-jam/"><div class="navbar__logo"><img src="/waiops-tech-jam/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/waiops-tech-jam/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">IBM SWAT</b></a><a class="navbar__item navbar__link" href="/waiops-tech-jam/labs/jam-in-a-box/">Labs</a><a class="navbar__item navbar__link" href="/waiops-tech-jam/blog/">Guides</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/IBM/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/waiops-tech-jam/labs/jam-in-a-box/">Jam-in-a-Box</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/waiops-tech-jam/labs/practitioner-basics/">Practitioner Basics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Practitioner Basics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/waiops-tech-jam/labs/instana/introduction/">Instana Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/introduction/">Labs Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/server-and-agent-install-lab/introduction/">Server &amp; Agent Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/applications-and-ibm-middleware/introduction/">Applications &amp; IBM Middleware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/explore-instana/introduction/">Explore Instana</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/administer-instana/introduction/">Administer Instana</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed wip-docs"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/synthetic-pop/introduction/">Synthetic Monitoring</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item wip-docs"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/waiops-tech-jam/labs/instana/opentelemetry/introduction/">OpenTelemetry</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/opentelemetry/introduction/">1. Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/opentelemetry/lab-environment/">2. Lab Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/opentelemetry/agent-installation/">3. Instana agent installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/opentelemetry/opentelemetry-instrumentation/">4. OpenTelemetry instrumentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/opentelemetry/webapplication-monitoring/">5. Web-application monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/waiops-tech-jam/labs/instana/opentelemetry/explore/">6. Exploring Instana</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/opentelemetry/quiz/">Quiz</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/waiops-tech-jam/labs/turbonomic/introduction/">Turbonomic Labs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/waiops-tech-jam/labs/cloud-pak-aiops/introduction/">Cloud Pak for AIOps Labs</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/waiops-tech-jam/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Instana Labs</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">OpenTelemetry</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">6. Exploring Instana</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>6. Exploring Instana</h1></header><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Work In Progress</div><div class="admonitionContent_S0QG"><p>This lab is currently under development.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="explore-instana-and-opentelemetry-traces">Explore Instana and OpenTelemetry traces<a href="#explore-instana-and-opentelemetry-traces" class="hash-link" aria-label="Direct link to Explore Instana and OpenTelemetry traces" title="Direct link to Explore Instana and OpenTelemetry traces">​</a></h2><p>Now, once the Instana and OpenTelemetry Demo Application are in sync, you can
start exploring the captured data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instana-native-tracing">Instana native tracing<a href="#instana-native-tracing" class="hash-link" aria-label="Direct link to Instana native tracing" title="Direct link to Instana native tracing">​</a></h2><p>In this section you will focus on exploring Instana&#x27;s native tracing
capabilities. In your Instana UI/Analytics search for calls which meet these
criteria:</p><ul><li>Application name: your application name</li><li>Service name: frontendproxy</li></ul><p>Click on the image call described under the point (4) from the below screen</p><p><img loading="lazy" alt="explore4" src="/waiops-tech-jam/assets/images/explore-004-fixed-9404c5e5a82bfd3bb76b063b53c6caa7.png" width="1497" height="1116" class="img_ev3q"></p><p>On the right side of the screen you will notice tags and call parameters,
together with an Infrastructure information - EnvoyProxy. This means that
Instana injected its own tracing libraries into the proxy application.</p><p><img loading="lazy" alt="explore5" src="/waiops-tech-jam/assets/images/explore-005-fixed-423741cbae155004ef538d08a429317b.png" width="2141" height="1169" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="opentelemetry-tracing">OpenTelemetry tracing<a href="#opentelemetry-tracing" class="hash-link" aria-label="Direct link to OpenTelemetry tracing" title="Direct link to OpenTelemetry tracing">​</a></h2><p>Using Instana agent, you can also receive OpenTelemetry based traces. Let&#x27;s find
an example in your environment. Go to Instana UI/Analytics search for calls
which meet these criteria:</p><ul><li>Application name: your application name</li><li>Service name: quoteservice</li></ul><p>Click on the call link to see the transaction details.</p><p><img loading="lazy" alt="explore6" src="/waiops-tech-jam/assets/images/explore-006-fixed-13e14173fd1e50704fb486e29d4484f1.png" width="1459" height="987" class="img_ev3q"></p><p>In the detailed view of the call, please take a look at the right side of the
screen. You will find there a list of json attributes captured by Instana. One
of them is called &quot;telemetry.sdk.name&quot; with a value &quot;opentelemetry&quot;, which
proves that the content is coming from the OpenTelemetry tracer.</p><p><img loading="lazy" alt="explore7" src="/waiops-tech-jam/assets/images/explore-007-fixed-d95ac2a21171f39e536039fa5f1d392c.png" width="2120" height="1146" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instana-and-opentelemetry-combined-traces">Instana and OpenTelemetry combined traces<a href="#instana-and-opentelemetry-combined-traces" class="hash-link" aria-label="Direct link to Instana and OpenTelemetry combined traces" title="Direct link to Instana and OpenTelemetry combined traces">​</a></h2><p>Instana can combine traces coming from applications instrumented by
OpenTelemetry and Instana tracing on the same screen. Please follow the below
instructions to find an example of such transaction in your environment.</p><p>Go to Instana UI/Analytics and search for the calls that are in your application
perspective and endpoint name is /api/cart like presented below. Click on
/api/cart to see the details of the call.</p><p><img loading="lazy" alt="explore1" src="/waiops-tech-jam/assets/images/explore-003-fixed-bdaf72cd4258c2f99cbf6b0173592741.png" width="1804" height="921" class="img_ev3q"></p><p>Click on the first transaction as highlighted on the below screen in a point
(1). The point (2) represents the captured data. The content was delivered by a
native Instana tracing.</p><p><img loading="lazy" alt="explore2" src="/waiops-tech-jam/assets/images/explore-001-fixed-a2a2524d60ee1d67b831f277bffe37f6.png" width="1635" height="960" class="img_ev3q"></p><p>Click on the second row within the transaction as described below in a point
(1). The point (2) represents the captured data which comes from the
OpenTelemetry tracer.</p><p><img loading="lazy" alt="explore3" src="/waiops-tech-jam/assets/images/explore-002-fixed-b3a862fac127b090c778f634d570a160.png" width="1642" height="953" class="img_ev3q"></p><p>The above example proves the Instana can combine traces from both OpenTelemetry
and Instana tracing within the same screen under one transaction ID.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instana-native-tracing---code-examples">Instana native tracing - code examples<a href="#instana-native-tracing---code-examples" class="hash-link" aria-label="Direct link to Instana native tracing - code examples" title="Direct link to Instana native tracing - code examples">​</a></h2><p>Instana can provide combined traces from the OpenTelemetry and Instana native
tracing. In the below example, you can see, how to use native Instana
instrumentation techniques. In the below snippet, we follow
<a href="https://www.ibm.com/docs/en/instana-observability/current?topic=technologies-monitoring-envoy-proxy#configuring-distributed-tracing" target="_blank" rel="noopener noreferrer">Envoy tracing configuration described here</a></p><p>As an outcome, Instana will inject its code and capture tracing of a calls,
which were processed by the Envoy proxy.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM envoyproxy/envoy:v1.25-latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> update </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y gettext-base </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> ca-certificates </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> clean </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> -rf /var/lib/apt/lists/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token environment constant" style="color:#36acaa">USER</span><span class="token plain"> envoy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /home/envoy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY ./src/frontendproxy/envoy.tmpl.yaml envoy.tmpl.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Instana tracing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARG </span><span class="token assign-left variable" style="color:#36acaa">ARTI_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;https://artifact-public.instana.io/artifactory/shared/com/instana/libinstana_sensor/&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARG INSTANA_AGENT_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARG INSTANA_DOWNLOAD_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN </span><span class="token assign-left variable" style="color:#36acaa">access_key</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable punctuation" style="color:#393A34">[</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">!</span><span class="token variable" style="color:#36acaa"> -z </span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable string variable" style="color:#36acaa">${INSTANA_DOWNLOAD_KEY}</span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable punctuation" style="color:#393A34">]</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">&amp;&amp;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable builtin class-name" style="color:#36acaa">echo</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable string variable" style="color:#36acaa">${INSTANA_DOWNLOAD_KEY}</span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">||</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable builtin class-name" style="color:#36acaa">echo</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable string variable" style="color:#36acaa">${INSTANA_AGENT_KEY}</span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> --user _ --password </span><span class="token variable" style="color:#36acaa">${access_key}</span><span class="token plain"> --output-document</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">./list.html </span><span class="token variable" style="color:#36acaa">${ARTI_PATH}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">sensor_version</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">grep</span><span class="token variable" style="color:#36acaa"> -o </span><span class="token variable string" style="color:#e3116c">&quot;href=</span><span class="token variable string entity" style="color:#36acaa">\&quot;</span><span class="token variable string" style="color:#e3116c">[0-9]\+\.[0-9]\+\.[0-9]\+/</span><span class="token variable string entity" style="color:#36acaa">\&quot;</span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable" style="color:#36acaa"> ./list.html </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">tail</span><span class="token variable" style="color:#36acaa"> -n1 </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">cut</span><span class="token variable" style="color:#36acaa"> -d</span><span class="token variable string" style="color:#e3116c">&#x27;&quot;&#x27;</span><span class="token variable" style="color:#36acaa"> -f2</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Using sensor version </span><span class="token string variable" style="color:#36acaa">${sensor_version}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> --user _ --password </span><span class="token variable" style="color:#36acaa">${access_key}</span><span class="token plain"> --output-document</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/home/envoy/libcxx-libinstana_sensor.so </span><span class="token variable" style="color:#36acaa">${ARTI_PATH}</span><span class="token variable" style="color:#36acaa">${sensor_version}</span><span class="token plain">linux-amd64-libcxx-libinstana_sensor.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENTRYPOINT </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;/bin/sh&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;-c&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;envsubst &lt; envoy.tmpl.yaml &gt; envoy.yaml &amp;&amp; envoy -c envoy.yaml;&quot;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Please note the use of libcxx-libinstana_sensor.so library.</p><p><a href="https://github.com/instana/opentelemetry-demo/blob/main/src/frontendproxy/Dockerfile" target="_blank" rel="noopener noreferrer">The source code is available here</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="opentelemetry-tracing---code-examples">OpenTelemetry tracing - code examples<a href="#opentelemetry-tracing---code-examples" class="hash-link" aria-label="Direct link to OpenTelemetry tracing - code examples" title="Direct link to OpenTelemetry tracing - code examples">​</a></h2><p>If you wish to use OpenTelemetry in your application, here is the example
snippet which can show, how to build the proper instrumentation.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token package">OpenTelemetry</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">API</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Common</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Instrumentation</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Globals</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token package">OpenTelemetry</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">API</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Trace</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Span</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token package">OpenTelemetry</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">API</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Trace</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">SpanKind</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token package">Psr</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Http</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Message</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">ResponseInterface</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> Response</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token package">Psr</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Http</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">Message</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">ServerRequestInterface</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> Request</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token package">Slim</span><span class="token package punctuation" style="color:#393A34">\</span><span class="token package">App</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">calculateQuote</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$jsonObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword return-type" style="color:#00009f">float</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$quote</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$childSpan</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name static-context">Globals</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">tracerProvider</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getTracer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;manual-instrumentation&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">spanBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;calculate-quote&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">setSpanKind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name static-context">SpanKind</span><span class="token operator" style="color:#393A34">::</span><span class="token constant" style="color:#36acaa">KIND_INTERNAL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">startSpan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$childSpan</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Calculating quote&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">array_key_exists</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;numberOfItems&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$jsonObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified punctuation" style="color:#393A34">\</span><span class="token class-name class-name-fully-qualified">InvalidArgumentException</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;numberOfItems not provided&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$numberOfItems</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">intval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$jsonObject</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;numberOfItems&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$quote</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8.90</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$numberOfItems</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$childSpan</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;app.quote.items.count&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$numberOfItems</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$childSpan</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;app.quote.cost.total&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$quote</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$childSpan</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Quote calculated, returning its value&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name class-name-fully-qualified punctuation" style="color:#393A34">\</span><span class="token class-name class-name-fully-qualified">Exception</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$exception</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$childSpan</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">recordException</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$exception</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$childSpan</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$quote</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name type-declaration">App</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$app</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;/getquote&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name type-declaration">Request</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name type-declaration">Response</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$span</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name static-context">Span</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getCurrent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$span</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Received get quote request, processing it&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$jsonObject</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$request</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getParsedBody</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$data</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculateQuote</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$jsonObject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$payload</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">json_encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$response</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">getBody</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token variable" style="color:#36acaa">$span</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Quote processed, response sent back&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;app.quote.cost.total&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">withHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Please note the use of OpenTelemetry/API and further use of the span builders.</p><p><a href="https://github.com/instana/opentelemetry-demo/blob/main/src/quoteservice/app/routes.php" target="_blank" rel="noopener noreferrer">The source code can be found here</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/IBM/waiops-tech-jam/tree/main/labs/instana/opentelemetry/6-explore/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/waiops-tech-jam/labs/instana/opentelemetry/webapplication-monitoring/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">5. Web-application monitoring</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/waiops-tech-jam/labs/instana/opentelemetry/quiz/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quiz</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#explore-instana-and-opentelemetry-traces" class="table-of-contents__link toc-highlight">Explore Instana and OpenTelemetry traces</a></li><li><a href="#instana-native-tracing" class="table-of-contents__link toc-highlight">Instana native tracing</a></li><li><a href="#opentelemetry-tracing" class="table-of-contents__link toc-highlight">OpenTelemetry tracing</a></li><li><a href="#instana-and-opentelemetry-combined-traces" class="table-of-contents__link toc-highlight">Instana and OpenTelemetry combined traces</a></li><li><a href="#instana-native-tracing---code-examples" class="table-of-contents__link toc-highlight">Instana native tracing - code examples</a></li><li><a href="#opentelemetry-tracing---code-examples" class="table-of-contents__link toc-highlight">OpenTelemetry tracing - code examples</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops" target="_blank" rel="noopener noreferrer" class="footer__link-item">CP4AIOps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/noi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NOI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/obi/current" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.turbonomic.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Turbonomic<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/au-en" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/waiops-tech-jam/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/IBM/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/waiops-tech-jam/assets/js/runtime~main.bf944562.js"></script>
<script src="/waiops-tech-jam/assets/js/main.df3d1d6f.js"></script>
</body>
</html>