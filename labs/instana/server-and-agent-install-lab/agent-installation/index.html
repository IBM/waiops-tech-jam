<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-instana/server-and-agent-install-lab/agent-installation/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">4. Agent Installation | IBM AIOps Automation SWAT</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/waiops-tech-jam/labs/instana/server-and-agent-install-lab/agent-installation/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="4. Agent Installation | IBM AIOps Automation SWAT"><meta data-rh="true" name="description" content="How to install, configure and troubleshoot Instana agent"><meta data-rh="true" property="og:description" content="How to install, configure and troubleshoot Instana agent"><link data-rh="true" rel="icon" href="/waiops-tech-jam/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://github.com/waiops-tech-jam/labs/instana/server-and-agent-install-lab/agent-installation/"><link data-rh="true" rel="alternate" href="https://github.com/waiops-tech-jam/labs/instana/server-and-agent-install-lab/agent-installation/" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/waiops-tech-jam/labs/instana/server-and-agent-install-lab/agent-installation/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/waiops-tech-jam/blog/rss.xml" title="IBM AIOps Automation SWAT RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/waiops-tech-jam/blog/atom.xml" title="IBM AIOps Automation SWAT Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WTTHT6SEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WTTHT6SEH",{anonymize_ip:!0})</script><link rel="stylesheet" href="/waiops-tech-jam/assets/css/styles.f87e0e6c.css">
<link rel="preload" href="/waiops-tech-jam/assets/js/runtime~main.bf944562.js" as="script">
<link rel="preload" href="/waiops-tech-jam/assets/js/main.df3d1d6f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/waiops-tech-jam/"><div class="navbar__logo"><img src="/waiops-tech-jam/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/waiops-tech-jam/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">IBM SWAT</b></a><a class="navbar__item navbar__link" href="/waiops-tech-jam/labs/jam-in-a-box/">Labs</a><a class="navbar__item navbar__link" href="/waiops-tech-jam/blog/">Guides</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/IBM/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/waiops-tech-jam/labs/jam-in-a-box/">Jam-in-a-Box</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/waiops-tech-jam/labs/practitioner-basics/">Practitioner Basics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Practitioner Basics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/waiops-tech-jam/labs/instana/introduction/">Instana Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/introduction/">Labs Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/waiops-tech-jam/labs/instana/server-and-agent-install-lab/introduction/">Server &amp; Agent Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/server-and-agent-install-lab/introduction/">1. Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/server-and-agent-install-lab/lab-environment/">2. Lab Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/server-and-agent-install-lab/server-installation/">3. Instana Server Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/waiops-tech-jam/labs/instana/server-and-agent-install-lab/agent-installation/">4. Agent Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/instana/server-and-agent-install-lab/quiz/">Quiz</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/applications-and-ibm-middleware/introduction/">Applications &amp; IBM Middleware</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/explore-instana/introduction/">Explore Instana</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/administer-instana/introduction/">Administer Instana</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed wip-docs"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/synthetic-pop/introduction/">Synthetic Monitoring</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed wip-docs"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/instana/opentelemetry/introduction/">OpenTelemetry</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/waiops-tech-jam/labs/turbonomic/introduction/">Turbonomic Labs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/waiops-tech-jam/labs/cloud-pak-aiops/introduction/">Cloud Pak for AIOps Labs</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/waiops-tech-jam/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Instana Labs</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Server &amp; Agent Installation</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">4. Agent Installation</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Agent Installation</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="41-instana-agent-deployment-options">4.1: Instana Agent Deployment Options<a href="#41-instana-agent-deployment-options" class="hash-link" aria-label="Direct link to 4.1: Instana Agent Deployment Options" title="Direct link to 4.1: Instana Agent Deployment Options">​</a></h2><p>Instana has a variety of agent installation options including the mirror
repository and static agents that allow customers to meet strict change control
processes. Some of the available options are listed below:</p><ul><li>OS specific installer (Linux, MacOS, Windows, UNIX)</li><li>Container setup</li><li>Docker (and other container managers)</li><li>Kubernetes</li><li>OpenShift</li><li>Hosted Cloud Services</li><li>Serverless component</li></ul><p>All above mentioned methods are accessible via the wizard on the Instana UI</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>If you are unable to access the Instana Web UI you will need to go back through
the previous lab and follow all the steps to ensure that the Instana server is
up and running.</p></div></div><p>When installing Instana agent you have to select if you want the agent to be
<strong>dynamic</strong> or <strong>static</strong> based on whether it can update itself or not. Here is
the excerpt from the
<a href="https://www.ibm.com/docs/en/SSE1JP5_current/src/pages/setup_and_manage/host_agent/index.html" target="_blank" rel="noopener noreferrer">Instana agent documentation</a>.</p><ul><li><p>A <strong>Dynamic</strong> host agent downloads the latest set of sensors from
repositories. By default, a dynamic agent updates itself at agent startup and checks daily for updates to the
agent and sensor code. This automatically gives you access to new features and bug fixes.  It is also possible to tightly
control the updating of dynamic host agents by
<a href="https://www.ibm.com/docs/en/instana-observability/current?topic=agents-configuring-updates-dynamic-host#version-pinning" target="_blank" rel="noopener noreferrer">pinning a version</a>
It is also possible to change the interval that the Agent checks for updates.</p><p>By default, dynamic host agents use the Instana repository to pull updates,
but it is possible to
<a href="https://www.ibm.com/docs/en/instana-observability/current?topic=agents-setting-up-agent-repositories-dynamic-host" target="_blank" rel="noopener noreferrer">set up your own managed mirror</a>.
Currently, the mirror must be a Nexus or Artifactory repository. This is probably the best
option for must customers because it allows them the benefits of automatic
updates, while at the same time controlling the content that is in the
repository.  In addition, it eliminates the need for every Agent to have internet access to the repositories.</p></li><li><p>A <strong>Static</strong> host agent is a self-contained host agent that includes all the
latest available components at the time of its release, and has no dynamic
update capabilities. The static host agent has a stable &quot;bill of materials&quot;
that never changes after the host agent&#x27;s installation.  <strong>Static Agents</strong> must
be manually upgraded or upgraded via automation such as Ansible.</p></li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Static host agents require no internet connection to the Instana repository, and
are recommended in restrictive network setups.</p></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="42-installing-a-local-instana-agent-on-k3s-for-self-monitoring">4.2: Installing a local Instana Agent on K3s for self monitoring<a href="#42-installing-a-local-instana-agent-on-k3s-for-self-monitoring" class="hash-link" aria-label="Direct link to 4.2: Installing a local Instana Agent on K3s for self monitoring" title="Direct link to 4.2: Installing a local Instana Agent on K3s for self monitoring">​</a></h2><p>Instana provides the ability to setup <strong>self monitoring</strong> of the <strong>Standard Edition</strong>
server.  Self monitoring the Instana Backend when using the Standard Edition of Instana
installed on K3s is very simple. During the installation, the Agent is automatically configured
to monitor the key technologies such as cassandra, kafka, postgres, etc. so that the entire
Instana backend server is being monitored.</p><p>Open a new terminal tab by selecting <strong>File</strong> -&gt; <strong>New Tab</strong>.</p><p>SSH to the Instana server with the <em>stanctl</em> cli tool installed:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh jammer@instana</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Become the root user:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo su -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run the following command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">stanctl agent apply</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After a short time you should see the following output:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">⠹ Applying instana-agent  [5s] ✓</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="43-installing-instana-agent-on-a-linux-vm">4.3: Installing Instana Agent on a Linux VM<a href="#43-installing-instana-agent-on-a-linux-vm" class="hash-link" aria-label="Direct link to 4.3: Installing Instana Agent on a Linux VM" title="Direct link to 4.3: Installing Instana Agent on a Linux VM">​</a></h2><p>We will start by installing the Instana Agent on the Linux VM that is running
IBM MQ and ACE.</p><p><img loading="lazy" alt="architecture-agent-mqace-vm" src="/waiops-tech-jam/assets/images/architecture-agent-mqace-vm-c8bfafe85823f18ed396041480c85cb8.png" width="991" height="634" class="img_ev3q"></p><p>Open a new terminal tab by selecting <strong>File</strong> -&gt; <strong>New Tab</strong>.</p><p>SSH to the ACE/MQ server as follows:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh jammer@mqace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When prompted if you want to continue connecting, type: <code>yes</code></p><p>Use sudo to switch to the root user:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo -i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After logging into Instana for the first time you will be taken to the Agent
Deployment page.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you aren&#x27;t on the <strong>Agent deployment</strong> screen you can get there by selecting
the <strong>Home</strong> menu in the left navigation and then clicking the <strong>&quot;Deploy
Agent&quot;</strong> button near the upper right corner.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/deploy-agent-7736569c89e6bf0719a591f466a75353.png" width="2878" height="422" class="img_ev3q"></p></div></div><p>A list of different environments where you can install the Instana Agent is
shown. For example, on Linux, you can choose a automatic <strong>one-liner</strong>
installation, RPM, or TAR file installation. For OpenShift/kubernetes, you have
multiple options including operator, helm, and yaml installs. The easiest method
is the default, <strong>&quot;Automatic Installation (One-Liner)&quot;</strong>. The <em>MQACE</em> VM is a
Linux server, so select Linux (One-liner).</p><p><img loading="lazy" alt="instana-default-login" src="/waiops-tech-jam/assets/images/agent-deployment-bd6b6c3d920fe6629a4c99b74bbf0def.png" width="2756" height="1742" class="img_ev3q"></p><p>There are a few other options including the use of different java versions,
static vs. dynamic agents, etc. Leave the default settings.</p><p>Next, select the checkbox next to <strong>&quot;Install and start as service&quot;</strong>. This will
setup the systemctl autostart process and will also start the Agent immediately
after it is installed.</p><p><img loading="lazy" alt="install command" src="/waiops-tech-jam/assets/images/install-command-3e832fa982c0e7fa9fb7e50b2e6b4a16.png" width="2752" height="1364" class="img_ev3q"></p><p>Finally, copy and paste the curl command into the <strong>root@mqace</strong> terminal window
and answer <code>y</code> when prompted.</p><p>At this point the Agent is installed and up and running. You can confirm this by
running:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ps -ef | grep instana</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see a process running, the short version looks like this:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root       22012       1 99 12:35 ?        00:00:11 /opt/instana/agent/jvm/bin/java</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Agent will automatically start monitoring the operating system and start
discovering key processes and middleware. In many cases it will automatically
instrument those technologies. In the case of some technologies (eg. MQ an and
App Connect Enterprise), there are manual configuration steps required due to
the need to provide credentials for accessing those applications.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="44-installing-instana-agent-on-openshift-cluster">4.4: Installing Instana Agent on OpenShift Cluster<a href="#44-installing-instana-agent-on-openshift-cluster" class="hash-link" aria-label="Direct link to 4.4: Installing Instana Agent on OpenShift Cluster" title="Direct link to 4.4: Installing Instana Agent on OpenShift Cluster">​</a></h2><p>The next step is to install the Instana Agent into the <strong>Apps</strong> Sing Node
OpenShift Cluster that in future labs we&#x27;ll be using to host our demo
applications <em>Robot Shop</em> and <em>Quote of the Day</em>.</p><p><img loading="lazy" alt="architecture-agent-ocp" src="/waiops-tech-jam/assets/images/architecture-agent-ocp-795490db044457bbf1a458f3792645ad.png" width="991" height="634" class="img_ev3q"></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Throughout this lab, we will be using the &quot;oc&quot; command to run commands within
OpenShift. The &quot;oc&quot; command is similar to kubectl for other versions of
Kubernetes. There are some minor syntax differences.</p></div></div><p><strong>Open another tab in your terminal</strong> so you are back on the local bastion host
<strong>admin@bastion-gym-lan</strong>.</p><p>Check to make sure you are in the right place by running the following:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oc cluster-info --kubeconfig kubeconfig-apps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should see the following output, specifically the url
<code>https:api.sno.techzone.lan:6443</code>. If you don&#x27;t try opening a new tab or
terminal window and trying again.</p><p><img loading="lazy" alt="check-cluster" src="/waiops-tech-jam/assets/images/check-cluster-2a5c30fbc00ebbfb7106b0179278ff95.png" width="1786" height="102" class="img_ev3q"></p><p>Follow the steps below to install the Agent into the cluster:</p><p>Set the correct cluster to use:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export KUBECONFIG=~/kubeconfig-apps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Set permissions for the Instana Agent to allow the Agent to have access to
monitor the entire cluster:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oc adm policy add-scc-to-user privileged -z instana-agent --kubeconfig kubeconfig-apps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From the <strong>Agent deployment</strong> screen select OpenShift, Helm chart from the list.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you aren&#x27;t on the <strong>Agent deployment</strong> screen you can get there by selecting
the <strong>&quot;Stan&quot;</strong> robot icon in the upper left corner and then clicking the
<strong>&quot;Deploy Agent&quot;</strong> button near the upper right corner.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/deploy-agent-7736569c89e6bf0719a591f466a75353.png" width="2878" height="422" class="img_ev3q"></p></div></div><p><img loading="lazy" src="/waiops-tech-jam/assets/images/agent-deploy-ocp-helm-52d74c4bba7bfcf983ba23a2a1dd1fed.png" width="2750" height="1744" class="img_ev3q"></p><p>Provide a meaningful name for the Cluster and specify and Agent Zone. These namespace
will show up within the Instana UI:</p><ul><li><strong>Cluster name</strong>: <code>SNO</code></li><li><strong>Agent Zone</strong>: <code>Demo Apps</code></li></ul><p><img loading="lazy" src="/waiops-tech-jam/assets/images/clusterZone-4a28ce24ca814bc90cede3f5960a8c48.png" width="696" height="472" class="img_ev3q"></p><p>Setting these values will allow you to find your Agent and Kubernetes Cluster
within the user interface and not get confused by data coming in from other
agents.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Zones are used to organize the Instana Agents (and sensors). Many customers
create zones for lines of business, data center locations, public cloud regions,
etc</p></div></div><p>Copy the command from the Instana Web UI and run it as the admin user on the
bastion host.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Copy &amp; paste</div><div class="admonitionContent_S0QG"><p>Be mindful when copying and pasting to ensure no extra lines are inserted by
first copying the command to a text document.</p></div></div><p>You will see output similar to what&#x27;s shown below</p><p><img loading="lazy" alt="helm install" src="/waiops-tech-jam/assets/images/helm-install-c03c9883f62a508d91c0f65b15eacea7.png" width="2276" height="1266" class="img_ev3q"></p><p>Next, view a list of the pods that are running in the agent namespace. There
will be one pod for each worker node in your target cluster. This SNO cluster
only has one worker node so you will only see one pod running.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oc get pods -n instana-agent --kubeconfig kubeconfig-apps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="running agent pods" src="/waiops-tech-jam/assets/images/ocp-agent-running-8cf74e6d46b7578fcc8fd6ce4092c0ed.png" width="1524" height="222" class="img_ev3q"></p><p>This completes the installation of Instana agent on OpenShift cluster.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="45-installing-instana-agent-in-a-docker-environment">4.5: Installing Instana Agent in a Docker Environment<a href="#45-installing-instana-agent-in-a-docker-environment" class="hash-link" aria-label="Direct link to 4.5: Installing Instana Agent in a Docker Environment" title="Direct link to 4.5: Installing Instana Agent in a Docker Environment">​</a></h2><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Information Only</div><div class="admonitionContent_S0QG"><p>You do not need to perform the actions in this section. This is for your
information only. It may be useful if you install Instana using the Classic
mode.</p></div></div><p>If you chose to run the Classic installation of Instana Server you might also
want to deploy an Instana Docker agent locally to self monitor the Instana
Backend.</p><p><img loading="lazy" alt="architecture-agent-mqace-vm" src="/waiops-tech-jam/assets/images/architecture-agent-instana-vm-4d1ef1204211ed543a8835fb8d62e9d5.png" width="991" height="634" class="img_ev3q"></p><p>You can navigate back to your first tab still logged into the <strong>instana</strong> host
or from a terminal ssh to the Instana server again:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh jammer@instana</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Switch to root</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo -i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the Instana UI, from the <strong>Agent deployment</strong> screen select <strong>Docker</strong> this
time.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>If you aren&#x27;t on the <strong>Agent deployment</strong> screen you can get there by selecting
the <strong>&quot;Stan&quot;</strong> robot icon in the upper left corner and then clicking the
<strong>&quot;Deploy Agent&quot;</strong> button near the upper right corner.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/deploy-agent-7736569c89e6bf0719a591f466a75353.png" width="2878" height="422" class="img_ev3q"></p></div></div><p><img loading="lazy" src="/waiops-tech-jam/assets/images/agent-deploy-docker-093117c15ffc4dfa20ab3c5e75b8b77b.png" width="2760" height="1728" class="img_ev3q"></p><p>At the top of the page you will see an entry box where you can specify a
<strong>Zone</strong>. Specify a zone name such as <strong>TechZone</strong>. Then, copy the docker run
command and paste it into the <strong>root@instana</strong> terminal window.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/agent-deploy-docker-config-d0cc871a6607f8bd40b072351a07ba2a.png" width="2736" height="1484" class="img_ev3q"></p><p>This will install the Instana Agent as a docker container running on the Instana
Server machine.</p><p>Once complete you can issue a <strong>docker ps</strong> command, you&#x27;ll see there is a new
Instana agent container running.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker ps | grep agent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="docker ps agent" src="/waiops-tech-jam/assets/images/docker-ps-agent-4720cda98e2e9213de5858c9e0809d36.png" width="3502" height="96" class="img_ev3q"></p><p>Once installed, the Agent will begin to collect host metrics and will discover
the various technologies like Cassandra, ClickHouse, ElasticSearch, Nginx,
Node.js, and more. Many of these technologies will be monitored automatically
without the need for configuration. In some cases, the sensors need to be
configured in order to see the performance metrics.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="46-view-instana-agents-in-the-instana-ui">4.6: View Instana Agents in the Instana UI<a href="#46-view-instana-agents-in-the-instana-ui" class="hash-link" aria-label="Direct link to 4.6: View Instana Agents in the Instana UI" title="Direct link to 4.6: View Instana Agents in the Instana UI">​</a></h2><p>From the left navigation select <strong>Infrastructure</strong>.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/infrastructure-menu-25629f3358fbabffa2d0c6d4eba18a58.png" width="2288" height="690" class="img_ev3q"></p><p>You should see 3 nodes reporting. The <strong>Instana VM</strong>, the <strong>MQACE VM</strong> and the
<strong>Single Node OpenShift (SNO) VM</strong>. If you don&#x27;t see them yet, give the agents a
few minutes to start up.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>In an upcoming section we will learn how to update the name of the zone where
the <em>MQACE</em> VM resides.</p></div></div><p><img loading="lazy" src="/waiops-tech-jam/assets/images/show-three-vms-f8a2882bf5cb5ad38820fd520ddfeed2.png" width="3474" height="2324" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="47-troubleshooting-instana-agent-installation-on-linux">4.7: Troubleshooting Instana Agent Installation on Linux<a href="#47-troubleshooting-instana-agent-installation-on-linux" class="hash-link" aria-label="Direct link to 4.7: Troubleshooting Instana Agent Installation on Linux" title="Direct link to 4.7: Troubleshooting Instana Agent Installation on Linux">​</a></h2><p>If you cannot see the <strong>Instana</strong> or <strong>MQACE</strong> hosts in the Instana UI you
should read the Instana agent logs on the respective agent host located at
<code>/opt/instana/agent/data/log/agent.log</code>. Look for the current status and any
warnings or errors that may be shown.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="48-troubleshooting-instana-agent-installation-on-kubernetes-cluster">4.8: Troubleshooting Instana Agent Installation on Kubernetes Cluster<a href="#48-troubleshooting-instana-agent-installation-on-kubernetes-cluster" class="hash-link" aria-label="Direct link to 4.8: Troubleshooting Instana Agent Installation on Kubernetes Cluster" title="Direct link to 4.8: Troubleshooting Instana Agent Installation on Kubernetes Cluster">​</a></h2><p>If you don&#x27;t see the <strong>SNO host</strong> in the <strong>Demo Apps</strong> zone after a couple of
minutes, you need to troubleshoot the Instana Agent.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Important</div><div class="admonitionContent_S0QG"><p>The following must be done from a terminal window on the bastion host
(<strong>admin@bastion-gym-lan</strong>)</p></div></div><p>Check to make sure that all pods are running. Since Instana agent runs as a
DaemonSet the number of pods should be equal to number of nodes in your cluster,
in this case one.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oc get pods -n instana-agent --kubeconfig kubeconfig-apps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can check the Instana Agent pod logs by running:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">oc logs $(oc get pods -n instana-agent -o custom-columns=POD:.metadata.name --no-headers --kubeconfig kubeconfig-apps) -n instana-agent -c instana-agent --kubeconfig kubeconfig-apps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="49-configuring-proxy">4.9: Configuring Proxy<a href="#49-configuring-proxy" class="hash-link" aria-label="Direct link to 4.9: Configuring Proxy" title="Direct link to 4.9: Configuring Proxy">​</a></h2><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Information Only</div><div class="admonitionContent_S0QG"><p>This section is here for informational purposes. There are no steps to execute.</p></div></div><p>If there is no direct connectivity for the Instana agent you may need to setup a
proxy. There are 2 connections with 2 different locations for configuration:</p><ul><li>Connection to <strong>Instana Backend</strong> - defined in
<em>INSTANA-AGENT-DIR</em>/etc/instana/com.instana.agent.main.sender.Backend.cfg</li><li>Connection to <strong>Agent/Sensor Repository</strong> - defined in
<em>INSTANA-AGENT-DIR</em>/etc/mvn-settings.xml (This is used in case client wants to
setup internal maven2 mirror repository)</li></ul><p>Proxy configuration goes into the respective files. You can also use
<a href="https://www.ibm.com/docs/en/obi/current?topic=requirements-installing-host-agent-docker#agent-configuration" target="_blank" rel="noopener noreferrer">environment variables</a></p><p>For backend connectivity you have to define <em>INSTANA<em>AGENT_PROXY</em></em> variables.
For repository connectivity you have to define <em>INSTANA<em>REPOSITORY_PROXY</em></em>
variables.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="410-configuring-instana-agent">4.10: Configuring Instana Agent<a href="#410-configuring-instana-agent" class="hash-link" aria-label="Direct link to 4.10: Configuring Instana Agent" title="Direct link to 4.10: Configuring Instana Agent">​</a></h2><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Information Only</div><div class="admonitionContent_S0QG"><p>This section is here for informational purposes. There are no steps to execute.</p></div></div><p>There are multiple ways to configure the Instana agent. These instructions apply
to the Instana Agent installed on a traditional server. Instructions would be
different for docker or kubernetes versions of the Agent. Settings related to
agent functionality reside in <code>configuration.yaml</code> file located by default in
<code>/opt/instana/agent/etc/instana</code> directory. However, other settings related to
agent environment sits in other <!-- -->*<!-- -->.cfg files.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Agent will actually read and use ANY yaml file in that directory.</p></div></div><p>Some customers choose to have separate yaml files for each key technology. For
example, you could create a mq.yaml file and an ace.yaml file in the same
directory and it would read both files. <code>configuration.yaml</code> will contain sample
configuration entries and comments for ALL available sensors at the time of your
install, <strong>BUT</strong> it will not automatically add new sensor config as new sensors
become available.</p><p>For host based installation you can update <code>configuration.yaml</code> and agent should
pick up changes automatically (no restart required). </p><p>For Kubernetes based installations, you can specify the same content that would go
into the configuration.yaml file, but the mechanism is different.  See the product documentation
for Operator and yaml based installations.  For helm installs, you use an <strong>agent.configuration_yaml</strong>
parameter to reference a values.yaml file.   The configuration information would be placed in
the values.yaml file. Yaml content can be placed directly in the helm command, but
the syntax gets a little tricky.  Here is an example helm command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm install instana-agent \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --repo https://agents.instana.io/helm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --namespace instana-agent \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.key=wxyz  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.downloadKey=abcdefg \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.endpointHost=agent-acceptor.instana2.tivlab.raleigh.ibm.com  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.endpointPort=443 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set zone.name=zone1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set cluster.name=&#x27;cluster1&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set agent.configuration_yaml=&quot;$(cat values.yaml)&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set k8s_sensor.deployment.enabled=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set k8s_sensor.deployment.replicas=2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  instana-agent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Instana agent configuration file must be a proper YAML - if your changes are not
applied, make sure that it&#x27;s not a formatting error</p></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="411-agent-configuration-troubleshooting">4.11: Agent Configuration Troubleshooting<a href="#411-agent-configuration-troubleshooting" class="hash-link" aria-label="Direct link to 4.11: Agent Configuration Troubleshooting" title="Direct link to 4.11: Agent Configuration Troubleshooting">​</a></h2><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Information Only</div><div class="admonitionContent_S0QG"><p>This section is here for informational purposes. There are no steps to execute.</p></div></div><p>The first place to look when the agent does not start properly or does not work
as expected is agent log file. By default it is located in
<code>/opt/instana/agent/data/log/agent.log</code> . This is the path for a traditional
server.</p><p>In case of Kubernetes based deployment you have to look at logs of
<code>instana-agent</code> pods running in <code>instana-agent</code> namespace.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="412-configuring-gitops-for-agents">4.12: Configuring GitOps for Agents<a href="#412-configuring-gitops-for-agents" class="hash-link" aria-label="Direct link to 4.12: Configuring GitOps for Agents" title="Direct link to 4.12: Configuring GitOps for Agents">​</a></h2><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Information Only</div><div class="admonitionContent_S0QG"><p>This section is here for informational purposes. There are no steps to execute.</p></div></div><p>If you don&#x27;t want to modify the Instana agent configuration files for each agent
locally, you can setup a centralized git repository for configuration files and
instruct Instana agent to use these files. To accomplish that, follow the steps
from the
<a href="https://www.ibm.com/docs/en/instana-observability/current?topic=agents-git-based-configuration-management" target="_blank" rel="noopener noreferrer">documentation</a>.</p><p>The Instana agent fetches configuration updates from the remote repository:</p><ol><li>Upon the startup or restart.</li><li>Through a reboot initiated over the Agent Management Dashboard.</li><li>Through a configuration change over the Agent Management Dashboard.</li><li>Through the Web API as described in the Host Agent section and the
integrations that rely on it like the GitHub Update Agent action.</li></ol><hr><p>You have now completed the Instana Server and Agent installation lab.  Feel free
to explore the other Instana Jam-in-a-Box labs that available on TechZone.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/IBM/waiops-tech-jam/tree/main/labs/instana/server-and-agent-install-lab/4-agent-installation/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/waiops-tech-jam/labs/instana/server-and-agent-install-lab/server-installation/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3. Instana Server Installation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/waiops-tech-jam/labs/instana/server-and-agent-install-lab/quiz/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quiz</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#41-instana-agent-deployment-options" class="table-of-contents__link toc-highlight">4.1: Instana Agent Deployment Options</a></li><li><a href="#42-installing-a-local-instana-agent-on-k3s-for-self-monitoring" class="table-of-contents__link toc-highlight">4.2: Installing a local Instana Agent on K3s for self monitoring</a></li><li><a href="#43-installing-instana-agent-on-a-linux-vm" class="table-of-contents__link toc-highlight">4.3: Installing Instana Agent on a Linux VM</a></li><li><a href="#44-installing-instana-agent-on-openshift-cluster" class="table-of-contents__link toc-highlight">4.4: Installing Instana Agent on OpenShift Cluster</a></li><li><a href="#45-installing-instana-agent-in-a-docker-environment" class="table-of-contents__link toc-highlight">4.5: Installing Instana Agent in a Docker Environment</a></li><li><a href="#46-view-instana-agents-in-the-instana-ui" class="table-of-contents__link toc-highlight">4.6: View Instana Agents in the Instana UI</a></li><li><a href="#47-troubleshooting-instana-agent-installation-on-linux" class="table-of-contents__link toc-highlight">4.7: Troubleshooting Instana Agent Installation on Linux</a></li><li><a href="#48-troubleshooting-instana-agent-installation-on-kubernetes-cluster" class="table-of-contents__link toc-highlight">4.8: Troubleshooting Instana Agent Installation on Kubernetes Cluster</a></li><li><a href="#49-configuring-proxy" class="table-of-contents__link toc-highlight">4.9: Configuring Proxy</a></li><li><a href="#410-configuring-instana-agent" class="table-of-contents__link toc-highlight">4.10: Configuring Instana Agent</a></li><li><a href="#411-agent-configuration-troubleshooting" class="table-of-contents__link toc-highlight">4.11: Agent Configuration Troubleshooting</a></li><li><a href="#412-configuring-gitops-for-agents" class="table-of-contents__link toc-highlight">4.12: Configuring GitOps for Agents</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops" target="_blank" rel="noopener noreferrer" class="footer__link-item">CP4AIOps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/noi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NOI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/obi/current" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.turbonomic.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Turbonomic<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/au-en" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/waiops-tech-jam/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/IBM/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/waiops-tech-jam/assets/js/runtime~main.bf944562.js"></script>
<script src="/waiops-tech-jam/assets/js/main.df3d1d6f.js"></script>
</body>
</html>