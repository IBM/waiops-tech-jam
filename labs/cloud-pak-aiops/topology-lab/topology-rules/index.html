<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-cloud-pak-aiops/topology-lab/topology-rules/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">4. Topology Rules | IBM AIOps Automation SWAT</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/topology-rules/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="4. Topology Rules | IBM AIOps Automation SWAT"><meta data-rh="true" name="description" content="Create topology rules"><meta data-rh="true" property="og:description" content="Create topology rules"><link data-rh="true" rel="icon" href="/waiops-tech-jam/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://github.com/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/topology-rules/"><link data-rh="true" rel="alternate" href="https://github.com/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/topology-rules/" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/topology-rules/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/waiops-tech-jam/blog/rss.xml" title="IBM AIOps Automation SWAT RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/waiops-tech-jam/blog/atom.xml" title="IBM AIOps Automation SWAT Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WTTHT6SEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WTTHT6SEH",{anonymize_ip:!0})</script><link rel="stylesheet" href="/waiops-tech-jam/assets/css/styles.f87e0e6c.css">
<link rel="preload" href="/waiops-tech-jam/assets/js/runtime~main.bf944562.js" as="script">
<link rel="preload" href="/waiops-tech-jam/assets/js/main.df3d1d6f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/waiops-tech-jam/"><div class="navbar__logo"><img src="/waiops-tech-jam/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/waiops-tech-jam/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">IBM SWAT</b></a><a class="navbar__item navbar__link" href="/waiops-tech-jam/labs/jam-in-a-box/">Labs</a><a class="navbar__item navbar__link" href="/waiops-tech-jam/blog/">Guides</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/IBM/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/waiops-tech-jam/labs/jam-in-a-box/">Jam-in-a-Box</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/waiops-tech-jam/labs/practitioner-basics/">Practitioner Basics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Practitioner Basics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/waiops-tech-jam/labs/instana/introduction/">Instana Labs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/waiops-tech-jam/labs/turbonomic/introduction/">Turbonomic Labs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/waiops-tech-jam/labs/cloud-pak-aiops/introduction/">Cloud Pak for AIOps Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/introduction/">Labs Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/install-lab/introduction/">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/introduction/">Topology</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/introduction/">1. Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/lab-environment/">2. Lab Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/creating-topology/">3. Topology in IT Operations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/topology-rules/">4. Topology Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/topology-templates/">5. Topology Group Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/topology-applications/">6. Topology Applications and Business Criticality</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/alert-lab/introduction/">Alert Correlation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/waiops-tech-jam/labs/cloud-pak-aiops/migration-from-netcool/introduction/">Migration from Netcool</a></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/waiops-tech-jam/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cloud Pak for AIOps Labs</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Topology</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">4. Topology Rules</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>4. Topology Rules</h1></header><p>Topology Rules help streamline topologies, such as by merging different observer
records of the same resource into a single composite resource, or by excluding
specific changes from being recorded against a resource history. You can use
different types of rules for different purposes.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span><mdxadmonitiontitle>In this Lab, we will only see a hands-on example of a <strong>mergeRule</strong>.</mdxadmonitiontitle></div><div class="admonitionContent_S0QG"><p>Additional information about other rules can be found in the product
<a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-aiops/4.7.0?topic=elements-configuring-rules" target="_blank" rel="noopener noreferrer"><strong>documentation</strong></a>.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mergerule">mergeRule<a href="#mergerule" class="hash-link" aria-label="Direct link to mergeRule" title="Direct link to mergeRule">​</a></h4><p>Different observers can record and then display the same resource as two (or
more) resources. For example, a kubernetes cluster Observer can find a <em>worker
node</em> as a topology resource but the same resource can be found by a VMware
vCenter Observer as <em>virtual machine</em>. But its essentially the same resource. To
prevent these situations, a merge rule can be created to ensure that these
separate records share values in their tokens set, which then triggers the Merge
service to create a single composite resource. Composite (or merged) resources
are displayed in the Topology viewer as a single resource, which includes the
properties of all merged resources. Merge rules are applied to resources by an
observer job <em>before</em> it is sent to the topology service.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tagsrule">tagsRule<a href="#tagsrule" class="hash-link" aria-label="Direct link to tagsRule" title="Direct link to tagsRule">​</a></h4><p>The tags rule allows the value of another field to be copied to the tags field
so that it becomes searchable in the UI. It populates the tags of resources
matched by the rule. Any field that is not indexed and cannot normally be
searched becomes searchable when copied to the tags property. For a list of
indexed properties, see
<a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/4.1.0?topic=reference-properties" target="_blank" rel="noopener noreferrer">Properties</a>.
Having the right tags in resources also enable the use of Tag Templates to group
resources with a common tag. We will see resource grouping in the next chapter.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="matchtokensrule">matchTokensRule<a href="#matchtokensrule" class="hash-link" aria-label="Direct link to matchTokensRule" title="Direct link to matchTokensRule">​</a></h4><p>A match token rule allows the value of another field to be copied to the
matchTokens field so that it can be used to match events to resources.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="historyrule">historyRule<a href="#historyrule" class="hash-link" aria-label="Direct link to historyRule" title="Direct link to historyRule">​</a></h4><p>Changes in topology resources are recorded. A history rule identifies properties
that don&#x27;t indicate an important change that needs to be recorded, for example a
host&#x27;s <em>sysUpTime</em> property. In other words, a history rule can be used to
exclude properties from being retained in history, saving resources by not
maintaining detailed historical records of changes to these properties.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="41-merge-rules-in-action">4.1: Merge Rules in Action<a href="#41-merge-rules-in-action" class="hash-link" aria-label="Direct link to 4.1: Merge Rules in Action" title="Direct link to 4.1: Merge Rules in Action">​</a></h2><p>You are now ready to create a Merge Rule to tie the two topology resources that
we loaded in the previous chapter.</p><p>This is where the topology data coming from the <strong>application</strong> topology source
is mapped onto the topology data coming from the <strong>infrastructure</strong> topology
source. In our hypothetical scenario, we know we have Resources of type
&quot;computer&quot; in both sets of topology, and we know that they relate to the same
servers. Corresponding instances across the two data sets are also labelled
consistently and correctly, meaning that identifying the same Resource across
the two data sets is possible.</p><p>In our case, we have a Resource called &quot;computer1000&quot; represented in our
infrastructure topology data as well as in our application data. Our goal is to
merge the two sets of topology together so that we can both visualize what
applications are running on our servers, and more importantly, correlate
infrastructure alerts with application alerts, something that is not possible
otherwise. Note that the rule is created in a generic way so that if there were
any other computers included in our two data sets, they too would be merged
together automatically, so long as they met the criteria set out in the rule.</p><p>From the burger menu in the top-left, navigate to: <strong>Operate → Resource
management</strong>. In the <strong>Resource management</strong> page, click on the <strong>Settings</strong>
gear icon in the top-right as shown below:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/gear-icon-6bf1daa9a02204266bde70110ff08180.png" width="1113" height="140" class="img_ev3q"></p><p>Select <strong>Topology configuration</strong>. From the <strong>Topology configuration</strong> page, in
the <strong>Rules</strong> card shown below select <strong>Configure</strong>.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/rules-card-c033a3fa51256c899c7bd254d6937682.png" width="989" height="700" class="img_ev3q"></p><p>Note that some Merge rules are already defined out-of-the-box.</p><p>Click the <strong>New</strong> button in the top-right.</p><p>Select <strong>Merge rule</strong> from the rule type list and select <strong>Start</strong>.</p><p>Follow these steps to create your new Merge Rule:</p><ul><li><strong>Rule name:</strong> Give your rule a name, for example
<strong>InfrastructureApplications</strong></li><li>Set <strong>Status</strong> to <strong>Enabled</strong></li><li><strong>Tokens</strong>: The tokens refer to the parameters in your Resources that will be
compared. In our case, the parameter that stores the computer name is called
&quot;name&quot; in both sets of data, therefore type <strong>${name}</strong> and click on <strong>Add</strong>.</li></ul><p><img loading="lazy" src="/waiops-tech-jam/assets/images/name-added-8b40ababd86802530e84b249d94df916.png" width="424" height="219" class="img_ev3q"></p><ul><li><p>Expand the <strong>Conditions</strong> drop-down.</p><ul><li><p><strong>Observers</strong>: Select <strong>File</strong> from the list of Observers and click <strong>Add</strong>.
Since both job types are of type File, this is all that is needed in this
case. Normally you would add all the Observer types that apply to your
mapping. If this section was left empty, it would try to apply this rule to
topology data coming from <strong>all</strong> Observer types.</p></li><li><p><strong>Providers</strong>: Add both of your jobs to the list (e.g.
<strong>FILE.OBSERVER:infrastructure.txt</strong> and <strong>FILE.OBSERVER:application.txt</strong>)
This specifies that this rule should only apply to these particular jobs. If
this section was left empty, it would try to apply this rule to topology
data coming from <strong>all</strong> File jobs defined.</p></li><li><p><strong>Resource types</strong>: Add the Resource type that this rule should apply to
which is <strong>computer</strong>. If this section was left empty, it would try to apply
this rule to <strong>all</strong> Resource types in the Observers list and Providers list
above.</p></li><li><p>The <strong>Token filter mode</strong> and <strong>Token</strong> filters sections allow you to refine
your rule mapping even further, by allowing you to specify regular
expressions to either include or exclude the set of Resources from the rule.
In this case, we will leave both of these sections blank.</p></li></ul></li></ul><p>Your <strong>Conditions</strong> section should look like this:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/conditions-fe58327924a75016bf02fcbf081d5ce0.png" width="604" height="779" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Its good practice to specify the appropriate set of <strong>Conditions</strong> in the rules,
to ensure they only get applied to the right topology resources.</p></div></div><p>When finished creating your new Merge Rule, click <strong>Save</strong> and return to the
Observer jobs page</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rerun-observer-jobs-to-apply-the-merge-rule">Rerun Observer Jobs to Apply the Merge Rule<a href="#rerun-observer-jobs-to-apply-the-merge-rule" class="hash-link" aria-label="Direct link to Rerun Observer Jobs to Apply the Merge Rule" title="Direct link to Rerun Observer Jobs to Apply the Merge Rule">​</a></h4><p>From the burger menu in the top-left navigate to: <strong>Define → Integrations</strong></p><p>Click on <strong>Manage observer jobs</strong> tab and click on <strong>Configure, schedule, and
manage observer jobs</strong>.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/obs-link-0e8cfa59c8e655175a52928546827855.png" width="1117" height="295" class="img_ev3q"></p><p>Click on <strong>Run</strong> (Play button icon) under the Operation column on <strong>each of the
two jobs</strong>. Note that both Observer jobs must be run again. The data will be
reprocessed in light of the new Merge rule we just created, and any Resources
that match the rule will have the merge operation applied against them.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/run-job-b70dac5196cfea6dc0627ca35812029b.png" width="1247" height="266" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The merge will not happen unless the affected jobs are re-run. In other words,
you will always have to rerun jobs to apply any defined rules.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="finding-the-merged-resource">Finding the Merged Resource<a href="#finding-the-merged-resource" class="hash-link" aria-label="Direct link to Finding the Merged Resource" title="Direct link to Finding the Merged Resource">​</a></h4><p>To verify the merge was successful, navigate back to Resource management. From
the burger menu in the top-left, navigate to: <strong>Operate → Resource management</strong>.</p><p>In the <strong>Resource management</strong> page, click on the <strong>Resources</strong> tab and this
time search for <strong>computer1000</strong>. Now you will see just one instance in the list
of Resources called computer1000 whereas before you would have seen two. Click
on <strong>computer1000</strong>, change the hop view to <strong>2</strong> and click <strong>Render</strong>. You
should see something like the following, showing the combined topology segments:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/computer-87df3900a443dda04f48868fb759e839.png" width="1126" height="780" class="img_ev3q"></p><p>The Resource computer1000 is only shown once in the topology, but remains
connected to all the resources it was connected to in both sets of topology
data, prior to the merge. The Merge Rule has effectively merged the two sets of
topology together, by merging the common Resources, according to the rule that
we defined.</p><p>You have now completed this chapter and are ready for next one about &quot;topology
templates&quot;.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/IBM/waiops-tech-jam/tree/main/labs/cloud-pak-aiops/topology-lab/4-topology-rules/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/creating-topology/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3. Topology in IT Operations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/waiops-tech-jam/labs/cloud-pak-aiops/topology-lab/topology-templates/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">5. Topology Group Templates</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#41-merge-rules-in-action" class="table-of-contents__link toc-highlight">4.1: Merge Rules in Action</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops" target="_blank" rel="noopener noreferrer" class="footer__link-item">CP4AIOps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/noi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NOI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/obi/current" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.turbonomic.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Turbonomic<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/au-en" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/waiops-tech-jam/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/IBM/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/waiops-tech-jam/assets/js/runtime~main.bf944562.js"></script>
<script src="/waiops-tech-jam/assets/js/main.df3d1d6f.js"></script>
</body>
</html>