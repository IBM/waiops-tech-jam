<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-metric-management/mm-mediating-csv/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">4. Mediating CSV Metric Data | IBM AIOps Automation SWAT</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com//waiops-tech-jam/labs/metric-management/mm-mediating-csv/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="4. Mediating CSV Metric Data | IBM AIOps Automation SWAT"><meta data-rh="true" name="description" content="This lab will illustrate how to analyze CSV file structure, how to create a Metric Manager topic model, how to deploy the model to a topic, and how to start ingestion of CSV data for machine learning"><meta data-rh="true" property="og:description" content="This lab will illustrate how to analyze CSV file structure, how to create a Metric Manager topic model, how to deploy the model to a topic, and how to start ingestion of CSV data for machine learning"><link data-rh="true" rel="icon" href="/waiops-tech-jam/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://github.com//waiops-tech-jam/labs/metric-management/mm-mediating-csv/"><link data-rh="true" rel="alternate" href="https://github.com//waiops-tech-jam/labs/metric-management/mm-mediating-csv/" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com//waiops-tech-jam/labs/metric-management/mm-mediating-csv/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/waiops-tech-jam/blog/rss.xml" title="IBM AIOps Automation SWAT RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/waiops-tech-jam/blog/atom.xml" title="IBM AIOps Automation SWAT Atom Feed"><link rel="stylesheet" href="/waiops-tech-jam/assets/css/styles.5d7ec3ec.css">
<link rel="preload" href="/waiops-tech-jam/assets/js/runtime~main.bfea2529.js" as="script">
<link rel="preload" href="/waiops-tech-jam/assets/js/main.b4c86077.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/waiops-tech-jam/"><div class="navbar__logo"><img src="/waiops-tech-jam/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/waiops-tech-jam/img/ibm-watson-logo.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">IBM SWAT</b></a><a class="navbar__item navbar__link" href="/waiops-tech-jam/labs/general/">Labs</a><a class="navbar__item navbar__link" href="/waiops-tech-jam/blog/">Guides</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/IBM/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/waiops-tech-jam/labs/general/">General</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/waiops-tech-jam/labs/category/watson-aiops/">Watson AIOps</a><button aria-label="Toggle the collapsible sidebar category &#x27;Watson AIOps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/waiops-tech-jam/labs/metric-management/introduction/">Metric Management</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/metric-management/introduction/">1. Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/metric-management/aimgr-install/">2. Installing Watson AIOps AI Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/metric-management/mm-install/">3. Installing Metric Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/waiops-tech-jam/labs/metric-management/mm-mediating-csv/">4. Mediating CSV Metric Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/metric-management/mm-analyzing-results/">5. Reviewing Ingestion Results</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/metric-management/mm-mediating-rest/">6. REST Data Mediation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/waiops-tech-jam/labs/metric-management/mm-mad/">7. Metric Anomaly Detection</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/waiops-tech-jam/labs/instana/introduction/">Instana</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/waiops-tech-jam/labs/turbonomic/introduction/">Turbonomic</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/waiops-tech-jam/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Metric Management</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">4. Mediating CSV Metric Data</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>4. Mediating CSV Metric Data</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="41-introduction">4.1: <strong>Introduction</strong><a class="hash-link" href="#41-introduction" title="Direct link to heading">​</a></h2><p>The Metric Manager can consume data in four primary ways: Modelling/Mediating
data that is in CSV format, Modelling/Mediating data that resides in a database
via JDBC connection, and ingesting pre-formed JSON through either the REST
mediation service or Kafka.</p><p>This lab will be showing you how to consume data from CSV files. There are CSV
files located in the <em>/home/scadmin/BookInfoDemo/data/bookinfo/data</em> directory.
These files contain metrics for Application response time (APP), CPU utilization
(CPU), Database transaction volume (DB), and disk utilization (DISKBUSY). This
data spans a time period of 17 days.</p><p>We will create a Metric Manager topic to receive this data, create a model for
this data with the Mediation Tool, deploy that model, then start the topic and
start ingesting the data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="42-creating-a-topic">4.2: <strong>Creating a topic</strong><a class="hash-link" href="#42-creating-a-topic" title="Direct link to heading">​</a></h2><p>To create a topic, open a terminal window and run the following commands as user
<strong>scadmin</strong> on pi VM:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /opt/IBM/scanalytics/analytics/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh create_topic BIGBLUE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will take a minute or two while the Metric Manager builds the topic tables
in the DB2 database and creates the appropriate analytics/streams configuration.</p><p>Once the <strong>create_topic</strong> command completes, you can list the topics that are
configured on the system by issuing the following command. You should see your
new BIGBLUE topic, along with the TEST topic that we created to verify the iFix
install:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh show_topics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BIGBLUE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may delete the TEST topic you created earlier to verify that the update
completed successfully if you wish.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh delete_topic TEST</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="43-topic-configuration">4.3: <strong>Topic configuration</strong><a class="hash-link" href="#43-topic-configuration" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="topic-configuration-considerations">Topic configuration considerations<a class="hash-link" href="#topic-configuration-considerations" title="Direct link to heading">​</a></h3><p><em>Aggregation interval</em></p><p>There are considerations for topic configuration that need to be accounted for
based on the data that the Metric Manager will be ingesting. One of the more
important aspects of topic configurations is the system aggregation interval.
The aggregation interval defines the rate, in minutes, of the metric data that
Metric Manager will be consuming. This is largely dictated by the source of the
metric data (e.g. an APM tool, network performance monitor, etc). The supported
PI intervals are 5, 10, 15, and 60 minutes. If the source that is generating
metrics for MM ingestion is collecting at 5 minutes, it is best to set the
aggregation interval for the topic to 5. If the metrics are generated at 1
minute intervals, set the topic to 5 minutes, and PI will automatically
aggregate the data to the 5 minute interval.</p><p>For 5 minute data, time intervals in minutes/seconds are:</p><p>00:00 – 04:59 05:00 – 09:59 10:00 – 14:59 … … 50:00 – 54:59 55:00 – 55:50</p><p>Likewise, 10 minute intervals are:</p><p>00:00 – 09:59 10:00 – 19:59 … … 40:00 - 49:49 50:00 – 59:59</p><p>Investigate the data that we will model and ingest. Change your directory to
where our CSV files are located and list the contents of the directory:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /home/scadmin/BookInfoDemo/data/bookinfo/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>CSV file naming</em></p><p>You&#x27;ll note that there are a number of csv files in that directory that look to
adhere to a standard naming convention. There are rules that you must follow for
naming these files, and those rules are documented in the &quot;IBM Operations
Analytics Predictive Insights&quot; documentation at this link:</p><a href="https://www.ibm.com/docs/en/oapi/1.3.6?topic=SSJQQ3_1.3.6/com.ibm.scapi.doc/admin_guide/r_tasp_csvrules.html" target="_blank" rel="noopener noreferrer">Rules for using CSV data sources</a><p>In short:</p><ul><li>the file name must start with a group name, and contain a delimiter</li><li>next, the file name must contain the start date for the data residing in the
csv file, and another delimiter</li><li>the end date is optional if the data that resides in the CSV file is for a
single interval, but if data within the CSV file spans multiple intervals, it
is required</li><li>the file name must end in .csv</li></ul><p>The files names that we have created for execution of this lab have the format:</p><p><code>&lt;GROUP&gt;__&lt;STARTDATE&gt;-&lt;STARTTIME&gt;__&lt;ENDDATE&gt;-&lt;ENDTIME&gt;.csv</code></p><p>You will note that some groups have individual daily files (CPU, Diskbusy), and
others have one csv file for the entire span of data (APP, DB). The Metric
Manager extraction process is smart enough to read data for each of its
intervals from the files simply based on the timestamp of the files that exist,
as well as the timestamps within the files. Since we will be ingesting files in
&#x27;backlog&#x27; historical mode, and not live, having daily files or a file that spans
17 days is fine. If we were ingesting live data for anomaly detection, Metric
Manager would expect to have a single file that contains all metric data for
each aggregation interval. In live ingestion, the extractor instance will pick
up the latest file for the previous aggregation interval (e.g. 00:00-04:59) and
process it.</p><p>So in looking at the file names, we can see that the data in this directory
starts at October 1st at midnight, 2020, and ends on October 17th, noon, or
about 17 days. Next, let&#x27;s look at the interval of the data contained in the
files.</p><p><em>Resources within Metric Manager</em></p><p>Any data sent into Metric Manager (whether it be CSV, or REST/Kafka) must
contain enough information to properly classify the component that the metric is
related to. For example, you may be collecting metrics for a router. That router
may have multiple interfaces. There are metrics that are applicable to the
router <strong>node</strong> itself (e.g. CPU utilization, buffer utilization), and there are
metrics that are applicable to an <strong>interface</strong> on that router (e.g. packet
drops, in bits per second, out bits per second, etc).</p><p>Run the following command to page through the data contained in the APP file:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">more APP__20201001-0000__20201017-1200.csv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that the file has the required CSV header, which must be the first entry of
the CSV file:</p><p><strong><em>Time,RESOURCE,ResponseTime</em></strong></p><p>In looking at the file, it&#x27;s clear that the timestamp is the first column, and
looking at the times they are timestamped at 5 minute intervals. Look at the
other files and confirm that they are also in 5 minute intervals with the
exception of DISKBUSY, which appear to be in minute intervals. That is fine as
MM will aggregate our data for us (more on this later).</p><p>Also note that the timestamps are in a different format than the file name. It
is in the format &quot;Day/Month/Year Hour:Minute&quot;, using literal slashes, space, and
colon as delimiters. Additionally the Year is in 2 digit format, rather than
four. So during our model creation, we must use the notation &quot;dd/MM/yy HH:mm&quot;.
It is important to be cognizant of timestamp formats whether they be in the file
name, or within the CSV file itself. They may not always be the same, and we
will take this into account when we create our model for the CSV data.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-topic-options">Configuring topic options<a class="hash-link" href="#configuring-topic-options" title="Direct link to heading">​</a></h3><p>Given the velocity of the data contained in these CSV files, we will need to
configure the Metric Manager topic aggregation interval to 5 minutes. To set the
aggregation interval, first check to see what it is currently set to:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /opt/IBM/scanalytics/analytics/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh show -t=BIGBLUE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will show all of the configurable options for the BIGBLUE topic.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>If the above command does not show an entry for <strong>system.aggregation.interval</strong>,
and only shows a couple of entries, delete the topic and re-create it. There
appears to be an environmental problem where the topic sometimes does not get
created properly.</p></div></div><p>The aggregation interval is &quot;system.aggregation.interval&quot;. You can see it is
currently set to 15 minutes. To change it to 5 minutes, issue the following
command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh set -t=BIGBLUE system.aggregation.interval 5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To verify the change, run the following command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh show -t=BIGBLUE |grep system.aggregation.interval</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>... you should see that the system.aggregation.interval property is 5 minutes:</p><p><code>system.aggregation.interval: 5</code></p><p>When ingesting historical data, it&#x27;s important to configure the topic such that
it doesn&#x27;t automatically delete the data you ingest. Metric Manager is not meant
to be used as a long-term metric data repository... it is meant to keep the data
long enough to successfully identify changes in behavior, and to keep a small
amount of historical for short-term review. By default, a topic&#x27;s metric data is
cleared out after 15 days, while anomaly alarm data is kept for 180 days. Since
we have data originating from 2020, we need to set a couple more topic
parameters to ensure the system doesn&#x27;t age out our data. Set the following
options for the topic BIGBLUE:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh set -t=BIGBLUE sta.corr.retention.days 1095</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh set -t=BIGBLUE system.alarm.history.retention.days 1095</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh set -t=BIGBLUE system.metric.retention.days 1095</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Another thing you may need to do during a proof of concept is disable alarm
clearing. This is required to be disabled if you are analyzing past data and
need to demonstrate what the anomaly alerts that arrive in Event Manager look
like, without having them clear when the anomaly occurrence stops. Since we&#x27;ll
be viewing Event Manager events as part of our labs, we&#x27;ll disable it:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh set -t=BIGBLUE system.alarm.autoclear false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, double-check and verify the topic configuration by running the show
topic command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./admin.sh show -t=BIGBLUE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture1-e81ff71925efa44fe1a7e464299bb469.png" width="467" height="648" class="img_ev3q"></p><p>Topic configuration is complete!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="44-creating-a-model-to-ingest-csv">4.4: <strong>Creating a model to ingest CSV</strong><a class="hash-link" href="#44-creating-a-model-to-ingest-csv" title="Direct link to heading">​</a></h2><p>The Mediation Tool is the component you will use to model the data contained
within the CSV files so that Metric Manager can ingest, process, learn, and
identify anomalies within the data. The tool allows you to create a &#x27;model&#x27; of
the structure of the CSV files you&#x27;ll be working with, from within a
user-friendly Eclipse interface. You can start the Mediation Tool by issuing the
following commands from your VNC session terminal:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /opt/IBM/scanalytics/mediationtool/eclipse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./eclipse</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You will be presented with the initial config screen. Leave the default and
click &quot;Ok&quot;.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture2-a53edb11b6dc3fe5dc0dc03a2c300b90.png" width="816" height="505" class="img_ev3q"></p><p>You will be presented with the main window. In this step we will create a new
Predictive Insights project. A project is simply a folder that contains one or
more model definitions. From the main window select <strong>File-<!-- -->&gt;<!-- -->New-<!-- -->&gt;<!-- -->Project</strong>
from the menu bar:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture3-34dee0badfe331e4a94d2118ed79d41c.png" width="896" height="671" class="img_ev3q"></p><p>In the next screen, open the <strong>Predictive Insights Wizards</strong> tree, select
<strong>Predictive Insights Project</strong>, and click <strong>Next</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture4-a61696bd991cc17b4f576be2d6126ad8.png" width="886" height="662" class="img_ev3q"></p><p>The next screen will prompt you for a project name. Enter <strong>TECHJAM2022</strong> and
click the <strong>Finish</strong> button.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture5-b9fba799b84c5942b9ffc8ef5e2fe2a7.png" width="885" height="661" class="img_ev3q"></p><p>Next, you will be asked to switch the perspective to Predictive Insights. Click
<strong>Yes</strong>.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture6-c6d1d13e3b058427c8ed33ef71e83dea.png" width="885" height="664" class="img_ev3q"></p><p>Next, close the welcome screen by clicking on the X in the tab above the text
<strong>Welcome to Eclipse</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture7-3a7eb710eb9d1aafeea03acb617c75b1.png" width="887" height="666" class="img_ev3q"></p><p>Finally, you will be in your modelling view. Maximize the window to take up the
full screen, you will need the real estate:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture8-8b6b116da283942647492463de9fde58.png" width="969" height="717" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-data-source">Create a data source<a class="hash-link" href="#create-a-data-source" title="Direct link to heading">​</a></h3><p>Next, we will create a data source. Right click on your <strong>TECHJAM2022</strong> project
in the navigator, and select <strong>New -<!-- -->&gt;<!-- --> Predictive Insights Data Source</strong></p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture9-9bc93866f1f8327c49caf96a8218b853.png" width="1139" height="1070" class="img_ev3q"></p><p>In the dialog window that appears, change the <strong>Filename</strong> parameter to
<strong>BIGBLUE.pamodel</strong> and click <strong>Next</strong>.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture10-451c2773fbad8c7ea512fa0ce03bab6b.png" width="1067" height="1093" class="img_ev3q"></p><p>In the next screen, you will select <strong>File System</strong> from the drop-down box, and
select <strong>Metric names in column headers</strong>.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture11-4aeacdbafda62c07e928359cb20dc7d1.png" width="773" height="797" class="img_ev3q"></p><p>Click <strong>Finish</strong>. You now have a data source that we will configure to ingest
our csv files.</p><p><em>A note about CSV structure: CSV files can be in either <strong>wide</strong> or <strong>skinny</strong>
format. <strong>Wide</strong> format specifies the metric name in the CSV header. For
example, in our data the CPU group has the following header:</em></p><p><code>&quot;TIME&quot;,&quot;RESOURCE&quot;,&quot;User%&quot;,&quot;Wait%&quot;</code> <code>01/10/20 00:00,&quot;details&quot;,84.9,0</code> <code>…</code> <code>…</code></p><p><em>Above we can see there are two metric definitions in the csv header, &quot;User%&quot;
and &quot;Wait%&quot;. That indicates that a single CSV line contains multiple metric
definitions per resource. Hence, we selected <strong>Metric names in column
headers</strong>.</em></p><p><em>You may come across a situation where the metric name appears in the csv file
data rather than the header. Compare the previous example with the following:</em></p><p><code>&quot;TIME&quot;,&quot;RESOURCE&quot;,&quot;METRICNAME&quot;</code> <code>01/10/20 03:20,details,User%,84.9</code>
<code>01/10/20 03:20,details,Wait%,0</code> <code>…</code> <code>…</code></p><p><em>The CSV contains a generic &quot;METRICNAME&quot; indicator, and the various metric name
appears within the csv lines, rather than the header. This is <strong>skinny</strong> format,
and each line contains only one metric. When you model the CSV file, and select
the metric column, it will show all of the available unique metric names as
available, and you can include/exclude metrics as needed.</em></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If you need to ingest files in both skinny and wide format, you must create
separate data sources for each type, as you cannot match skinny and wide formats
in a single project. You can deploy multiple CSV data sources to a single topic,
but they must be done as the same deployment action – that is you must
multi-select the data sources, then select &quot;deploy model&quot;.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-the-filesystem-details">Configure the filesystem details.<a class="hash-link" href="#configure-the-filesystem-details" title="Direct link to heading">​</a></h3><p>The file system details define where the files are located and the structure and
date format of the file names.</p><p>You will be at the following screen:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture12-01002c1712d97a5302c30458d306469c.png" width="968" height="493" class="img_ev3q"></p><p>First, under <strong>File System Details</strong>, change the <strong>File Path</strong> to:</p><p><strong>/home/scadmin/BookInfoDemo/data/bookinfo/data</strong></p><p>This tells the mediation tool where to expect the CSV files.</p><p>Next, modify the name pattern. As we learned previously, a CSV file name must
start with a <strong>group reference</strong>, followed by a <strong>delimiter</strong>, followed next by
a <strong>start time</strong> and an <strong>end time</strong> (with the end time only strictly necessary
when the file contains data for a span of multiple intervals). When defining the
name pattern, we use regular expressions to match. To keep it simple, use the
following regex to define the name pattern:</p><p><strong>(.<!-- -->*<!-- -->)<!-- -->_<!-- -->_<!-- -->(.<!-- -->*<!-- -->)<!-- -->_<!-- -->_<!-- -->(.<!-- -->*<!-- -->)<!-- -->\<!-- -->.csv</strong></p><p>The mediation tool, as well as the Metric Manager extractor, uses the first
regex match as the metric group identifier, the second as the Start Time, and,
if defined, the third regex match as an end time.</p><p>Next we will change the time format. The time format uses standard Java time
format notation. Looking at our CSV file timestamps, we see that they are
formatted as such:</p><p>20201001-0000</p><p>Which, in Java time format notation, is:</p><p>yyyyMMdd-HHmm</p><p>As such, change the time format to &quot;yyyyMMdd-HHmm&quot;</p><p>The files provided are in GMT already so we can leave the timezone as it is.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>It is important to be cognizant of the timezone of the data and configure this
appropriately, so that the analytics can properly learn the differences between
weekday and weekend behavior patterns, as well as proper correlation of metrics
across all CSV files. In many cases the timezone of the data you work with will
be GMT, but you may run into cases where they are provided in some local time
zone. Make sure that you verify with the customer what timezone the data
timestamps are in.</p></div></div><p>Once all the File System Details options have been configured, click the &quot;Test
Matching&quot;. You should get green checkmarks for the files in our directory
indicating that the name pattern and time format worked properly:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture13-2eea9a4fe65fc2cb63e4633af1be5cc4.png" width="1039" height="602" class="img_ev3q"></p><p>If you see errors indicating &#x27;pattern mismatch&#x27;, or do not see the green
checkmarks, double-check your configuration and try again. If you sill have
difficulty consult a lab proctor.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="defining-the-model-from-the-data">Defining the model from the data<a class="hash-link" href="#defining-the-model-from-the-data" title="Direct link to heading">​</a></h3><p>The next step is to actually build the model from the CSV file structures. Below
the <strong>File System Details</strong> window that we just finished configuring and
testing, you will see three tabs. Select the <strong>Model Design</strong> tab and click
<strong>Ok</strong> in the dialog window that pops up.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture14-b93b04d02c4a348071e15401460d1f4e.png" width="771" height="592" class="img_ev3q"></p><p>The model design window shows the configured data source (ITM) that we just
finished configuring. Right-click on <strong>ITM</strong>, and select <strong>Synchronize Schema</strong>.
This will cause the mediation tool to examine the structure and contents of the
CSV files that match the pattern we defined in the previous section:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture15-f5eafc63207cfad4a4a5d4d7981fa5ab.png" width="511" height="700" class="img_ev3q"></p><p>The mediation tool will then churn through the available files in our defined
directory, analyze the CSV structure, and present us with the metric groups it
found in our directory. In the preview window, select <strong>Add New Elements</strong>, and
it will select all of the CSV file structures it found in that directory.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture16-4b53a42545a47e9e3e89178775cf1c9c.png" width="931" height="555" class="img_ev3q"></p><p>select all of the tables and click <strong>Ok</strong>.</p><p>Next, for our ITM data source, open up the tree view that is now available:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture17-7c858fe03e69322a0b6c9c2bcd748fe2.png" width="816" height="574" class="img_ev3q"></p><p>Expanding the tree view <strong>fully</strong> shows all of the available tables and columns
in our CSV files.:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture18-2442c41fab06487e3e9b53c0c8614c03.png" width="819" height="1067" class="img_ev3q"></p><p>Next, we will create metric groups for each of these. Right-click on <strong>APP</strong>,
and select <strong>New metric group</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture19-5c57abc16271dd9002b99bf8de8c20b8.png" width="811" height="290" class="img_ev3q"></p><p>You have the option of naming the metric group to anything that is descriptive
of the type of data in the respective group. In our case, we&#x27;ll call it
<strong>ApplicationPerformance</strong>, and click <strong>Ok</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture20-a203a5a3b9ffd98bdee56b7d00bcfa91.png" width="933" height="445" class="img_ev3q"></p><p>The next screen will show an attempt by the modelling tool to create a model
based on the composition of the CSV header:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture21-cb2a18aaf842cf64064717bc3385b1c0.png" width="934" height="481" class="img_ev3q"></p><p>The mediation tool did a good job of providing a model based on the structure
for this instance. It selected the proper CSV column for the <strong>Timestamp
(Time)</strong>, the proper CSV column for the <strong>Resource Key (RESOURCE)</strong>, and the
proper column for the <strong>Metric Name (ResponseTime)</strong>. So in this case, there
isn&#x27;t any additional work we need to do to define the model. But we do need to
configure the timestamp format (as we did in the File Details definition). To do
this, click select the <strong>Model Properties</strong> tab below the <strong>Model Design</strong>
window. Open up the <strong>Model -<!-- -->&gt;<!-- --> ApplicationPerformance -<!-- -->&gt;<!-- --> Timestamp</strong> entry,
and change the <strong>Data Type</strong> to <strong>String</strong> if it isn&#x27;t already.</p><p>Recall our earlier examination of the CSV file content. We discovered that the
time format of the timestamp within the CSV file is different that it is in the
filename. As such we must define <strong>Time Format</strong> as <strong>dd/MM/yy HH:mm</strong> (don&#x27;t
forget the space between the date and time). When you are finished entering the
Time Format field, hit the <strong>enter</strong> key so that the entry is saved.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture22-a2835720e6f9c8c2e040cd3d7ef6a998.png" width="934" height="238" class="img_ev3q"></p><p>Finally, click on the <strong>Model Design</strong> tab to return to the model design window,
and click on the <strong>preview data</strong> icon to verify that the model is working:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture23-5be9c0e5fc02a79c5ef9a5d272aed325.png" width="934" height="75" class="img_ev3q"></p><p>You should see a preview of the data extraction in the <strong>Data Extraction
Preview</strong> tab:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture24-641f6be211d52a4212e6c9777c367e41.png" width="933" height="515" class="img_ev3q"></p><p>If you do not see data in the preview after clicking on the <strong>Preview
extraction</strong> icon, verify the configuration of your timestamp in the model
properties tab. If you feel you have verified everything and are still having
issues, consult a lab proctor.</p><p>Finally, take a moment to save the work we have done so far for modelling the
csv data in case we should lose connection or some other unavoidable disaster
occurs. In the Menu, select <strong>File -<!-- -->&gt;<!-- --> Save</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture25-b4afd0e399ac425cac01492a4a49cc68.png" width="932" height="589" class="img_ev3q"></p><p>Next, we will configure a model for the <strong>CPU</strong> data. From the <strong>Model Design</strong>
window, right-click on <strong>CPU</strong> under the ITM data source, and select <strong>New
Metric Group</strong>.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture26-838ab75ee75f89f3e420d6b6cc1e950b.png" width="792" height="264" class="img_ev3q"></p><p>Name the metric group <strong>CpuUtilization</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture27-4baef6c524fb1c97457b77fd38208bc2.png" width="933" height="442" class="img_ev3q"></p><p>Again, we see that the mediation tool did a good job of identifying which CSV
columns should be used for the timestamp, resource, and even identified that
there are two metric columns in the file:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture28-6f281999927fa49797beaf60e2347e16.png" width="934" height="437" class="img_ev3q"></p><p>So next, define the timestamp format by selecting the <strong>Model Properties</strong> tab,
opening up the <strong>CpuUtilization</strong> model definition, selecting <strong>Timestamp</strong>, and
selecting <strong>String</strong> as the Data Type and entering <strong>dd/MM/yy HH:mm</strong> for the
time format, ensuring to hit <strong>Enter</strong> when done typing in the time format.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture29-b389a79baca2c2333726d5383fa4bce9.png" width="935" height="218" class="img_ev3q"></p><p>Return to the <strong>Model Design</strong> tab and test the model design by clicking on the
<strong>preview extraction</strong> button.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture30-e60dbd2e188f5339517dbd3684545370.png" width="934" height="75" class="img_ev3q"></p><p>Verify data in extraction preview:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture31-73e0181e2c410d99776a56e5f3401e4c.png" width="936" height="487" class="img_ev3q"></p><p>Ensure that you have both metrics <strong>User%</strong> and <strong>Wait%</strong> in the preview.</p><p>Again, save your model progress by clicking on</p><p><strong>File -<!-- -->&gt;<!-- --> Save</strong></p><p>Next, create a metric group for database data. Right-click on &quot;DB&quot; and select
&quot;New Metric Group&quot;:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture32-e2a9d3024d890827308a1d2c46884211.png" width="806" height="356" class="img_ev3q"></p><p>Call your metric group <strong>DatabasePerformance</strong> and click <strong>Ok</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture33-c53e56d618442373aa66d8a4a31156a7.png" width="935" height="443" class="img_ev3q"></p><p>As with the previous two groups, we again see that the mediation tool has done a
good job of classifying which fields are the timestamp, resource, and metric.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture34-cfa0e360820fdd28665b8a372ec417d7.png" width="934" height="387" class="img_ev3q"></p><p>Define your timestamp format in Model Properties tab, making sure you select the
timestamp definition under <strong>DatabasePerformance</strong>, setting it to <strong>dd/MM/yy
HH:mm</strong>.</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture35-47132ea1d0fd84c390ecb551d645bd01.png" width="935" height="235" class="img_ev3q"></p><p>Again, return to the Model Design tab and click on the extraction preview icon
to preview the extraction:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture36-bd85cd0959431051f0b736dbb651d0e6.png" width="934" height="502" class="img_ev3q"></p><p>Save the model progress by selecting</p><p><strong>File -<!-- -->&gt;<!-- --> Save</strong></p><p>Lastly, we will model the DISKBUSY csv. Right-click on DISKBUSY under the ITM
data source, and select &quot;New Metric Group&quot;:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture37-c563943413092f997a6cfa78e74b9d60.png" width="801" height="271" class="img_ev3q"></p><p>Call the metric group <strong>DiskPerformance</strong></p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture38-6dd2912e982ea819bc7fe72eb837d369.png" width="934" height="441" class="img_ev3q"></p><p>Review the model definition:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture39-92d5031107887d5d45e7b06dcd3d23a1.png" width="933" height="373" class="img_ev3q"></p><p>Note that in the CSV file, we have four columns: TIME, RESOURCE, DISKNAME, and
DISKBUSY. The mediation tool did a good jo of defining the Timestamp and
identifying the metric name. However, for the resource key, it only used the
RESOURCE field in the CSV file. If we don&#x27;t add the DISKNAME field to the
resource key, the Metric Manager will just aggregate/average the data for all
disks to a single metric (DISKBUSY) at the Node level, which is certainly not
what we want.</p><p>The resource key is important for metrics that may be specific to a component or
set of components on a node or device. For example, if Metric Manager is
receiving network utilization metrics from a server that has <strong>2 network
interface cards</strong>, you need to define the resource not as simply the Node, but
the <strong>Node + network interface card name</strong>… e.g. &quot;server1:eth0 and
server1:eth1&quot;.</p><p>The mediation tool does this for us when we define multiple columns as the
<strong>Resource Key</strong>.</p><p>In our case, what we need to do is include the <strong>DISKNAME</strong> as part of the
Resource Key, so we don&#x27;t just aggregate/average all values for all disks at the
Node level. To do this, select <strong>DISKNAME</strong> from the ITM data tree with the left
mouse button, hold down the button and drag it into the Attributes window to add
DISKNAME as an attribute. Alternatively you can right-click on <strong>DISKNAME</strong> and
select <strong>Add Attribute</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture40-563f07e050e921727287dde487cff967.png" width="934" height="619" class="img_ev3q"></p><p>You&#x27;ll notice that it automatically gives it <strong>Application</strong> as an Attribute
name. You can leave it as is or change it to <strong>Disk</strong> or something descriptive
if you wish.</p><p>Next, repeat the same process to add the DISKNAME field to the resource key. In
the ITM data tree, select <strong>DISKNAME</strong> with your left mouse button, hold down
the button and drag it to the Resource Key. Alternatively you can right-click on
DISKNAME and select <strong>Add Resource Key</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture41-ac5f8f62563596d51b7aba23c32f8561.png" width="934" height="547" class="img_ev3q"></p><p>Finally, go to the <strong>Model Properties</strong> tab and define the timestamp format as
<strong>dd/MM/yy HH:mm</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture42-768f8f95668920db724d8044407cbe90.png" width="934" height="453" class="img_ev3q"></p><p>Return to the <strong>Model Design</strong> tab and click on the <strong>preview extraction</strong> icon.
A Warning window will pop up:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture43-c98818e113b3ab2aa871ffda381099fb.png" width="933" height="623" class="img_ev3q"></p><p>What this is telling us is that there are multiple entries for values in each
time interval defined in the file.</p><p>This could be a data quality issue. Minimize the mediation utility and open up a
new terminal window, and issue the following commands:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /home/scadmin/BookInfoDemo/data/bookinfo/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat DISKBUSY__20201001-0000__20201002-0000.csv |head -n 20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You&#x27;ll notice that indeed there are multiple entries for a given time stamp.</p><p>If this were a data quality issue, it may be due to the exclusion of another
component from the csv file that would make the resource more unique, that would
be needed to be included in the resource key. Or perhaps there is something not
right with how the data is being extracted and written.</p><p>In our case, upon further investigation and a discussion with the team that
manages the tool that measures DIKSBUSY, we discover the DISKBUSY metric is
measured and written every 10 seconds, but the time format as written has left
off the seconds column. This isn&#x27;t a problem in this case, because the smallest
aggregation interval Metric Manager supports is 5 minutes, and these values will
be all aggregated up to 5 minutes anyway… even if the seconds column were
included. So in our case, we can safely ignore the error.</p><p>Data quality is paramount to ensure maximum value from Metric Manager. Be aware
of the format of the data, and if there is something you come across that
doesn&#x27;t seem right, consult the owners of the tool that&#x27;s generating the data
for Metric Manager and verify that it is correct.</p><p>To continue the lab, return to the Mediation Tool window and click <strong>Ok</strong> and
verify that your extraction preview shows data:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture44-88b68bffbceac8b991b6ad4d72de75da.png" width="935" height="463" class="img_ev3q"></p><p>Now that we have completed the data modelling, we are ready to &quot;Deploy&quot; our
model to the BIGBLUE topic that we created earlier. Before doing that, select</p><p><strong>File -<!-- -->&gt;<!-- --> Save</strong></p><p>To save the model:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture45-4190038b3b6f302141db3f0d6576ce74.png" width="934" height="589" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="45-deploying-the-model">4.5: Deploying the model<a class="hash-link" href="#45-deploying-the-model" title="Direct link to heading">​</a></h2><p>Next, to deploy the model, right-click on the BIGBLUE.pamodel title under the
TECHJAM2022 project, and select <strong>Deploy Model</strong>:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture46-3913a9ea45f355a57068ec744e45d626.png" width="965" height="1065" class="img_ev3q"></p><p>And change the following items in the configuration window:</p><p><code>JDBC URL: jdbc:db2://pi-template.Hybrid-Squad.cloud:50000/SCAPIDB</code> <code>Password:</code>
<strong><span style="color:green">&lt;LAB PASSWORD<!-- -->&gt;</span></strong>
<code>&lt;CHECK &quot;Save as Project Defaults&quot;&gt;</code></p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/lab3-addon1-c1d6ac30171df72a2068366cd99ad8eb.png" width="636" height="445" class="img_ev3q"></p><p>Click <strong>Ok</strong> when finished:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture47-238e75642bb295d5117131327747d8e6.png" width="931" height="564" class="img_ev3q"></p><p>If there are multiple topics configured in the Metric Manager install, you will
need to select the appropriate topic from the drop-down list. Select &quot;BIGBLUE&quot;
and click &quot;Ok&quot;:</p><p>If there is just a single topic, it will deploy straight away.</p><p>After the KPI count is complete, click <strong>Yes</strong> to deploy the model to the topic:</p><p><img loading="lazy" src="/waiops-tech-jam/assets/images/Picture48-eafccb8dc76909df79eca42294b1eda7.png" width="935" height="407" class="img_ev3q"></p><p>After the deployment completes successfully, exit the mediation tool to return
to the command line.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="46-ingesting-csv-data-for-machine-learning">4.6: <strong>Ingesting CSV data for machine learning</strong><a class="hash-link" href="#46-ingesting-csv-data-for-machine-learning" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-the-topic">Start the topic<a class="hash-link" href="#start-the-topic" title="Direct link to heading">​</a></h3><p>Now that we have successfully created and deployed a model to our topic, we can
extract the data for analysis and see how the Metric Manager learns the behavior
of the data and identifies situations where the data has acted contrary to the
learned behavior. We must first start the topic. Exit the mediation tool to
return to the command line and run the following command to start the topic:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/IBM/scanalytics/analytics/bin/start.sh -t=BIGBLUE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After about 2 minutes you should see a message indicating that the topic is
running:</p><p><em> <strong>Instance AnalyticsBIGBLUE running</strong> </em></p><p>If you see an error message, rather than the above message, try stopping the
Streams instance, and then start the topic using the following commands:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/IBM/scanalytics/analytics/bin/stop.sh -s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/IBM/scanalytics/analytics/bin/start.sh -t=BIGBLUE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you still have problems starting up the topic, ask a lab proctor for
assistance.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="verify-required-services-are-running">Verify required services are running<a class="hash-link" href="#verify-required-services-are-running" title="Direct link to heading">​</a></h3><p>Before we start the extraction, verify that the Netcool services are up and
running by issuing the following command, using the password <strong><span style="color:green">&lt;LAB PASSWORD<!-- -->&gt;</span></strong> as the password:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status nco</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The Active line should say active. If it is not showing an active status, start
it up by running:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl stop nco</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start nco</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next verify the Netcool GUI is up and running by issuing the following command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status netcoolwebgui</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the &quot;Active&quot; line is showing any status other than &quot;active (exited)&quot;, start
it up by running:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl stop netcoolwebgui</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start netcoolwebgui</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ensure that the DB2 database is running by running:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db2pd -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The &quot;Database Member 0&quot; should show active. If it is not active, start DB2 by
running:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">db2start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, verify that the Metric Manager UI is running by issuing the following
command:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/IBM/scanalytics/UI/bin/pi.sh -status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the IBM Websphere Liberty Profile is DOWN, run the following command to start
it:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/IBM/scanalytics/UI/bin/pi.sh -start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and verify the status again to ensure the profile is UP.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-extraction">Run extraction<a class="hash-link" href="#run-extraction" title="Direct link to heading">​</a></h3><p>Once the Netcool core, Web GUI, DB2, and Metric Manager UI components are
running, we are ready to extract the data. Run the following command to start
extraction:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$PI_HOME/bin/admin.sh run_extractor_instance -t=BIGBLUE -s=20201001-0000 -e=20201017-1200</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will initiate the ingestion process, and start the extraction from October
1st, 2020 at midnight, and end the extraction when it has ingested data all the
way up to October 17</p><p>To monitor the ingestion,</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/BookInfoDemo/data/bookinfo/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you list the directory, you will see as the ingestion process proceeds, files
that are being read are changed to prepend the filename to INUSE.\&lt;filename<!-- -->&gt;<!-- --> a
such:</p><p><em>INUSE.DISKBUSY<!-- -->_<!-- -->_<!-- -->20201002-0000<!-- -->_<!-- -->_<!-- -->20201003-0000.csv</em></p><p>Next, list the files in the &#x27;good&#x27; directory. You will see files that have
completed ingestion arrive in the &#x27;good&#x27; directory.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls good</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By watching both the data directory and the good directory, you will be able to
see which files are being processed (INUSE), and which files are complete and
end up in the &#x27;good&#x27; directory.</p><p>Take a break. In about 12 to 15 minutes, the data directory will be empty of all
CSV files, which have been moved to the good directory. Machine learning and
anomaly detection of the ingested data will complete. The next lab will walk
through navigating the UI and viewing the results.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/IBM/waiops-tech-jam/tree/main/labs/metric-management/4-mm-mediating-csv/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/waiops-tech-jam/labs/metric-management/mm-install/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3. Installing Metric Manager</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/waiops-tech-jam/labs/metric-management/mm-analyzing-results/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">5. Reviewing Ingestion Results</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#41-introduction" class="table-of-contents__link toc-highlight">4.1: <strong>Introduction</strong></a></li><li><a href="#42-creating-a-topic" class="table-of-contents__link toc-highlight">4.2: <strong>Creating a topic</strong></a></li><li><a href="#43-topic-configuration" class="table-of-contents__link toc-highlight">4.3: <strong>Topic configuration</strong></a><ul><li><a href="#topic-configuration-considerations" class="table-of-contents__link toc-highlight">Topic configuration considerations</a></li><li><a href="#configuring-topic-options" class="table-of-contents__link toc-highlight">Configuring topic options</a></li></ul></li><li><a href="#44-creating-a-model-to-ingest-csv" class="table-of-contents__link toc-highlight">4.4: <strong>Creating a model to ingest CSV</strong></a><ul><li><a href="#create-a-data-source" class="table-of-contents__link toc-highlight">Create a data source</a></li><li><a href="#configure-the-filesystem-details" class="table-of-contents__link toc-highlight">Configure the filesystem details.</a></li><li><a href="#defining-the-model-from-the-data" class="table-of-contents__link toc-highlight">Defining the model from the data</a></li></ul></li><li><a href="#45-deploying-the-model" class="table-of-contents__link toc-highlight">4.5: Deploying the model</a></li><li><a href="#46-ingesting-csv-data-for-machine-learning" class="table-of-contents__link toc-highlight">4.6: <strong>Ingesting CSV data for machine learning</strong></a><ul><li><a href="#start-the-topic" class="table-of-contents__link toc-highlight">Start the topic</a></li><li><a href="#verify-required-services-are-running" class="table-of-contents__link toc-highlight">Verify required services are running</a></li><li><a href="#run-extraction" class="table-of-contents__link toc-highlight">Run extraction</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops" target="_blank" rel="noopener noreferrer" class="footer__link-item">CP4WAIOps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/noi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NOI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.ibm.com/docs/en/obi/current" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.turbonomic.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Turbonomic<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/au-en" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/waiops-tech-jam/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/IBM/waiops-tech-jam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/waiops-tech-jam/assets/js/runtime~main.bfea2529.js"></script>
<script src="/waiops-tech-jam/assets/js/main.b4c86077.js"></script>
</body>
</html>