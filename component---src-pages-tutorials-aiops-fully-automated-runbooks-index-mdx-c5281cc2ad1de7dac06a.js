"use strict";(self.webpackChunktech_academy_aiops_2022=self.webpackChunktech_academy_aiops_2022||[]).push([[9457,1532],{3624:function(e,a,t){t.d(a,{Z:function(){return y}});var n=t(7294),o=t(8650),s=t.n(o),i=t(1597),r=t(4799),l=t(3448),c=t(5900),p=t.n(c),d=function(e){var a,t=e.title,o=e.theme,s=e.tabs,i=void 0===s?[]:s;return n.createElement("div",{className:p()("PageHeader-module--page-header--NqfPe",(a={},a["PageHeader-module--with-tabs--vbQ-W"]=i.length,a["PageHeader-module--dark-mode--WCeH8"]="dark"===o,a))},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12"},n.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},t)))))},m=function(e){var a=e.relativePagePath,t=e.repository,o=(0,i.useStaticQuery)("1364590287").site.siteMetadata.repository,s=t||o,r=s.baseUrl,l=s.subDirectory,c=r+"/edit/"+s.branch+l+"/src/pages"+a;return r?n.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},n.createElement("div",{className:"bx--col"},n.createElement("a",{className:"EditLink-module--link--IDrl1",href:c},"Edit this page on GitHub"))):null},u=t(4703),g=t(1721),A=function(e){function a(){return e.apply(this,arguments)||this}return(0,g.Z)(a,e),a.prototype.render=function(){var e=this.props,a=e.title,t=e.tabs,o=e.slug,r=o.split("/").filter(Boolean).slice(-1)[0],l=t.map((function(e){var a,t=s()(e,{lower:!0,strict:!0}),l=t===r,c=new RegExp(r+"/?(#.*)?$"),d=o.replace(c,t);return n.createElement("li",{key:e,className:p()((a={},a["PageTabs-module--selected-item--aBB0K"]=l,a),"PageTabs-module--list-item--024o6")},n.createElement(i.Link,{className:"PageTabs-module--link--Kz-7R",to:""+d},e))}));return n.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},n.createElement("nav",{"aria-label":a},n.createElement("ul",{className:"PageTabs-module--list--xLqxG"},l))))))},a}(n.Component),b=A,f=t(7296),h=t(5387),k=t(3732),w=function(e){var a=e.date,t=new Date(a);return a?n.createElement(k.X2,{className:"last-modified-date-module--row--XJoYQ"},n.createElement(k.sg,null,n.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",t.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},y=function(e){var a=e.pageContext,t=e.children,o=e.location,c=e.Title,p=a.frontmatter,g=void 0===p?{}:p,A=a.relativePagePath,k=a.titleType,y=g.tabs,v=g.title,R=g.theme,B=g.description,N=g.keywords,x=g.date,S=(0,h.Z)().interiorTheme,E=(0,i.useStaticQuery)("2456312558").site.pathPrefix,I=E?o.pathname.replace(E,""):o.pathname,j=y?I.split("/").filter(Boolean).slice(-1)[0]||s()(y[0],{lower:!0}):"",F=R||S;return n.createElement(l.Z,{tabs:y,homepage:!1,theme:F,pageTitle:v,pageDescription:B,pageKeywords:N,titleType:k},n.createElement(d,{title:c?n.createElement(c,null):v,label:"label",tabs:y,theme:F}),y&&n.createElement(b,{title:v,slug:I,tabs:y,currentTab:j}),n.createElement(f.Z,{padded:!0},t,n.createElement(m,{relativePagePath:A}),n.createElement(w,{date:x})),n.createElement(u.Z,{pageContext:a,location:o,slug:I,tabs:y,currentTab:j}),n.createElement(r.Z,null))}},1424:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return r},default:function(){return u}});var n=t(3366),o=(t(7294),t(4983)),s=t(3624),i=["components"],r={},l=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",a)}},c=l("AnchorLinks"),p=l("AnchorLink"),d={_frontmatter:r},m=s.Z;function u(e){var a=e.components,t=(0,n.Z)(e,i);return(0,o.kt)(m,Object.assign({},d,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)(c,{mdxType:"AnchorLinks"},(0,o.kt)(p,{mdxType:"AnchorLink"},"12-1: Overview"),(0,o.kt)(p,{mdxType:"AnchorLink"},"12-2: Enable ObjectServer REST Interface"),(0,o.kt)(p,{mdxType:"AnchorLink"},"12-3: Create automation to update the journal"),(0,o.kt)(p,{mdxType:"AnchorLink"},"12-4: Update Runbook - add a step to update the journal"),(0,o.kt)(p,{mdxType:"AnchorLink"},"12-5: Update Trigger to set Execution Automatic"),(0,o.kt)(p,{mdxType:"AnchorLink"},"12-6: Test Fully automated Runbook")),(0,o.kt)("h2",null,"12-1: Overview"),(0,o.kt)("p",null,"IBM Runbook Automation can automate procedures that can help IT staff solve everyday operational problems and do not require human interaction, thereby increasing the efficiency of IT operational processes."),(0,o.kt)("p",null,"Runbooks start as documented procedures on a piece of paper that can become fully automated procedures. "),(0,o.kt)("p",null,"This module focuses on the creation of a fully-automated runbook and updates runbook results in the event journal."),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"720px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"18.75%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA2UlEQVQY022OXWuDMABF/f8/rbC1duuqdFvLqiYp9QNN1JjEM8xed+HAfThcblKWJUII/su6rhRFwfF45HI64Y2B2bJOU4R5Zp1mrllOuttxzXMS5xzee7TWhBBi34astRitsd4jzhnDy54hy7GfX7jva2Tr3ds7w8cZ+bpHH1ISYwzLsnC73eJA27YMQx95KMW4LJSHlFDX/DwUvdH048gwTUzOcRcVs3OIpsHW9d/D7dGWru2oqgopJW3bsIZAAMb7HadUdPquQ1QVSkrq5zM6hEBvDLNU/AJUnTBMJrz3EQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"AutoRunbookLifeCycle",title:"AutoRunbookLifeCycle",src:"/waiops-tech-jam/static/9bf9af1b565532a6afc380dd95fe6961/b85f6/AutoRunbookLifeCycle.png",srcSet:["/waiops-tech-jam/static/9bf9af1b565532a6afc380dd95fe6961/7fc1e/AutoRunbookLifeCycle.png 288w","/waiops-tech-jam/static/9bf9af1b565532a6afc380dd95fe6961/a5df1/AutoRunbookLifeCycle.png 576w","/waiops-tech-jam/static/9bf9af1b565532a6afc380dd95fe6961/b85f6/AutoRunbookLifeCycle.png 720w"],sizes:"(max-width: 720px) 100vw, 720px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Scenario: There is a apache2 server running on HOST. The apache2 process is monitored and configured to generate an alert when the apache2 API service goes UP/DOWN."),(0,o.kt)("p",null,"Objective: We have a manual runbook available (created in previous lab) for this problem and have a good success rate based on feedback. As a next step to mature this runbook and achieve full automation, we want to execute this runbook automatically and update results in the event journal. So the problem can be fixed without operator intervention."),(0,o.kt)("p",null,"By the end of this module, you will have a fully automated runbook ready in the Watson AIOPs Event Manager environment."),(0,o.kt)("hr",null),(0,o.kt)("h2",null,"12-2: Enable ObjectServer REST Interface"),(0,o.kt)("p",null,"In order to update event journal runbook sends update via REST API to Objectserver. ObjectServer REST interface is disabled out of the box for Objectserver.\nSo we need to first enable Objectserver REST interface using below steps:"),(0,o.kt)("p",null,"a) Find ConfigMap for the primary ObjectServer"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"oc get configmap| grep primary\n")),(0,o.kt)("p",null,"You will see output like this :"),(0,o.kt)("p",null,"OUTPUT : evtmanager-objserv-agg-primary-config 2 14d"),(0,o.kt)("p",null,"b) Edit primary ObjectServer Configmap to enable REST interface in properties."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"\noc edit configmap evtmanager-objserv-agg-primary-config\n")),(0,o.kt)("p",null,"Add this to configmap:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'apiVersion: v1\ndata:\n  agg-p-props-append: |\n    NRestOS.Enable: TRUE\n    NHttpd.EnableHTTP: TRUE\n    NHttpd.ListeningPort: 8080\n  agg-p-sql-extensions: ""\n')),(0,o.kt)("p",null,"c) Restart primary ObjectServer pod"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"oc delete pod evtmanager-ncoprimary-0\n")),(0,o.kt)("p",null,"d) Expose Listening port for REST API"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"oc expose po evtmanager-ncoprimary-0 --port=8080 --type=NodePort --name=objserver-http-client-external-portforward\n")),(0,o.kt)("p",null,"Check exposed port and make note of the port assigned."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"oc get svc | grep objserver-http-client-external-portforward\n")),(0,o.kt)("p",null,"e) Retrieve OMNIBUS root password :"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'oc get secret evtmanager-omni-secret -o go-template=\'{{range $k,$v := .data}}{{printf "%s: " $k}}{{if not $v}}{{$v}}{{else}}{{$v | base64decode}}{{end}}{{"\\n"}}{{end}}\'\n')),(0,o.kt)("p",null,"f)  Please Note : You need to delete 1 network policy in cluster in order to successfully run next curl command that connects to ObjectServer REST API "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"oc delete networkpolicy evtmanager-ibm-netcool-prod-network-policy\n")),(0,o.kt)("p",null,"g) Test REST interface, OMNIbus password and port from the step (e) and step (d) are used to test the REST interface using curl. "),(0,o.kt)("p",null," Cluster name is : ",(0,o.kt)("inlineCode",{parentName:"p"},"<Your cluster ingressdomain>")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'curl -k -u root:<OMNIBUS password from step e> -X POST -d "{ \\"sqlcmd\\": \\"select count(*) from alerts.status\\" }" -H \'Accept: application/json\' -H \'Content-Type: application/json\' http://<ClusterHostname>:30100/objectserver/restapi/sql/factory\n')),(0,o.kt)("p",null,"Output:\n{\n“rowset”: {\n“osname”: “AGG_P”,\n“affectedRows”: 1,\n“coldesc”: ","[{\n“name”: “COUNT( * )”,\n“type”: “integer”,\n“size”: 4\n}]",",\n“rows”: ","[{\n“COUNT( * )”: 110\n}]","\n}\n}"),(0,o.kt)("hr",null),(0,o.kt)("h2",null,"12-3: Create automation to update the journal"),(0,o.kt)("p",null,"Create an automation “Update Journal” with two additional parameters “alertid” and “message”. "),(0,o.kt)("p",null,"Navigate to: ",(0,o.kt)("strong",{parentName:"p"}," Automations→ Runbooks → Automations → Create Automation ")),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"69.09722222222221%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABTElEQVQoz5WSPU8DMQyG7/9LrAhWBlY2hPgTLAxFILWw0HzHseMk12uLLmmrFl1FeUbHb/zxupPKW+cQw2az2f6TDsBTjKWUYRjWe4bL6Dgl772UUgrhnAshAACdgog0RRdjtMZIKZVSSmtjjNb6V3Y84hDkSB0RtYIpJd5znM3M3vuWE0Jo/yKRdlWMiM45Zs5nsNYKIZRSQghjDCJ6759f4k4MHgDgnLic0oIp5SoOoXXVmpzUpyNahLlWJiKow0CAWG3LF4CIo/gwEgA0q9pi/qRaZa2UUmulR6usMaaOMGFs7asvJfcZS67bDiHUUcvoXU0h5kmlc/5tNnv/mL8u0uxrb9X4hkjGECIDRGN2l4VIiLEq+77/Xi5vb67v7h+uHrfXT3XbHONYzTlafEbnWCqeLxBCcB68DwARMeXcjw2X8fRXq+265IQ/gZcfTlaf5+sAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB create automation",title:"FRB create automation",src:"/waiops-tech-jam/static/5b2865a178c69e9fb5f5dcf80ff69345/3cbba/FRB_create_automation.png",srcSet:["/waiops-tech-jam/static/5b2865a178c69e9fb5f5dcf80ff69345/7fc1e/FRB_create_automation.png 288w","/waiops-tech-jam/static/5b2865a178c69e9fb5f5dcf80ff69345/a5df1/FRB_create_automation.png 576w","/waiops-tech-jam/static/5b2865a178c69e9fb5f5dcf80ff69345/3cbba/FRB_create_automation.png 1152w","/waiops-tech-jam/static/5b2865a178c69e9fb5f5dcf80ff69345/58bd0/FRB_create_automation.png 1303w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Script:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'curl -k -u root:<OMNIBUS password from step e> -X POST -d "{ \\"sqlcmd\\": \\"exec jinsert($alertid,0, getdate, \'$message\')\\" }" -H \'Accept: application/json\' -H \'Content-Type: application/json\' "http://10.17.71.136:30100/objectserver/restapi/sql/factory"\n')),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"72.91666666666666%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABbUlEQVQoz22RS27cMAyGddTmBrlKus8xAgTZZN9FUaD7zMYTj+wR9aDerxaW7MAZzwdBoGj9/E2KDMN5GAZKJ+DA4BYOwBiTUup7EEopBy4W+t4iztcTX0Kl1H3x5/msNXZ0i7TWxph1N6bH98XWWm2Mcy5sWGuVUvgdharX/SbuDnaH1loeOJZDxMW52fovwgHvPd6D3Nje0L8aY7r5DeTamOeZbVxZSzHW8/0CAHy1itiW1mRsXC4XIYSU8jiVnQaVQm+xRiwRc0DS31IuQimE8AeWnteJhJzCxxhef/u3P+H9ryPrGJXC1gbnfN9Vr9gHzoX0Vr78kj+e+MNPeHyWpP8wAAgh5nk+nU6U0mmaaAMAxnFkDHgDOFeSS86u02hQkFrrv41aa0opxhhDiDH2ZCllf2fJ1HUR51zdSClprUMIOedSSi8XvC851x05Vx9ryplY68pGE7dnd67rSyneu5RS2ZFycb7EmP4DyTBWLLLXjvcAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB create automation params",title:"FRB create automation params",src:"/waiops-tech-jam/static/7986fa81b95cc4f23e3715a65c614c0a/3cbba/FRB_create_automation_params.png",srcSet:["/waiops-tech-jam/static/7986fa81b95cc4f23e3715a65c614c0a/7fc1e/FRB_create_automation_params.png 288w","/waiops-tech-jam/static/7986fa81b95cc4f23e3715a65c614c0a/a5df1/FRB_create_automation_params.png 576w","/waiops-tech-jam/static/7986fa81b95cc4f23e3715a65c614c0a/3cbba/FRB_create_automation_params.png 1152w","/waiops-tech-jam/static/7986fa81b95cc4f23e3715a65c614c0a/4022f/FRB_create_automation_params.png 1193w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Save automation “Update Journal”."),(0,o.kt)("hr",null),(0,o.kt)("h2",null,"12-4: Update Runbook - add a step to update the journal"),(0,o.kt)("p",null,"Navigate to: ",(0,o.kt)("strong",{parentName:"p"}," Automations→ Runbooks →  Library →  Edit runbook “Restart API Service” ")),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"3.125%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAK0lEQVQI11XGMQ4AIAwDMf7/XVDpSWnDwAKePPoBVNV9ZgL9m3sBtiVFxAEOWzsQqhDu7QAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB update runbook0",title:"FRB update runbook0",src:"/waiops-tech-jam/static/bd38c0f2458bf9b1a2f1387274797df3/3cbba/FRB_update_runbook0.png",srcSet:["/waiops-tech-jam/static/bd38c0f2458bf9b1a2f1387274797df3/7fc1e/FRB_update_runbook0.png 288w","/waiops-tech-jam/static/bd38c0f2458bf9b1a2f1387274797df3/a5df1/FRB_update_runbook0.png 576w","/waiops-tech-jam/static/bd38c0f2458bf9b1a2f1387274797df3/3cbba/FRB_update_runbook0.png 1152w","/waiops-tech-jam/static/bd38c0f2458bf9b1a2f1387274797df3/0b124/FRB_update_runbook0.png 1728w","/waiops-tech-jam/static/bd38c0f2458bf9b1a2f1387274797df3/47f51/FRB_update_runbook0.png 1853w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Add Automated Step -> Select “Update Journal”"),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"44.09722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA70lEQVQoz43RPU7FMAwH8NwTCYkzMDFxAzbExsLIFbgEOwgQy3tV09I2thN/BUQllFceEr8t/0i2ZYe+78dxTCkRUc6ZDv1OWoGIRERVS2FVNTNvMPMmWakqM4e1vLsjYkqgarXh7vUYdzezAIAiUkoRYRHhfzBhNzYtAQBSSohobn+02fSsY6pxqXHx8D1tAgAiwkNr/vMERCIcJzi/jSdX8eLuIyzLstvt9103z3NqAMAwDDHGaZraLwB4fXt/en7puj6UkqWA5FQrb8Y2M1Vdb9HmpWQEMNXw8JjPbuz02i7vvVY/dpettejXtj8BbDoIDcfj43UAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB update runbook",title:"FRB update runbook",src:"/waiops-tech-jam/static/c4853858bcb44da359d9fe0d5dbfbab0/3cbba/FRB_update_runbook.png",srcSet:["/waiops-tech-jam/static/c4853858bcb44da359d9fe0d5dbfbab0/7fc1e/FRB_update_runbook.png 288w","/waiops-tech-jam/static/c4853858bcb44da359d9fe0d5dbfbab0/a5df1/FRB_update_runbook.png 576w","/waiops-tech-jam/static/c4853858bcb44da359d9fe0d5dbfbab0/3cbba/FRB_update_runbook.png 1152w","/waiops-tech-jam/static/c4853858bcb44da359d9fe0d5dbfbab0/9532f/FRB_update_runbook.png 1452w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Add parameter mapping :  For “alertid” you can create “New Runbook parameter” of String type."),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1002px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"56.25%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZElEQVQoz3XRzWobMRAHcD1EfQv0OQp1ii/uE/QV3EJfNZf0lBAopF0c27vSaEczGn2tVOzFxiHNj/9BHwwMMwoA+r432jBzKSW/4/orpVRKISJlLQBYIooxppRqre2NWquIr3W6fgwhKO+ZiNJJjPG/xa21nPPlaz4ci8HCdrvVWocTEWFmAGD283XmnGNmuYKICgC6rtvv92AMHFlE7Lq/25eX/eFgjNFaW2sPfb/b7QDAnAGASikFkZyPPccQcsqttXEcBz0goveemeemEFFE/BkzqxCCc26eVoxxmqZaKwAM/YDoiMg5570XEQCg1xQx9UMfQphO5pUYMMMwaK1HJDs6x8IsWsOIdAkiqZzLaUPHsss8xXvnHJEryZfIU5aSRMhOyZ/DKZJ6fM/Dw+PT7/vnev/c3qT++tPunkStv65Xq9Vyubx95cvt50/L9bePP2XxvS0202JTrzJ92LSbH/IPpexSZAfRFaAAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB update journal",title:"FRB update journal",src:"/waiops-tech-jam/static/7d45d34efdb24961e651aba9add73231/a52e5/FRB_update_journal.png",srcSet:["/waiops-tech-jam/static/7d45d34efdb24961e651aba9add73231/7fc1e/FRB_update_journal.png 288w","/waiops-tech-jam/static/7d45d34efdb24961e651aba9add73231/a5df1/FRB_update_journal.png 576w","/waiops-tech-jam/static/7d45d34efdb24961e651aba9add73231/a52e5/FRB_update_journal.png 1002w"],sizes:"(max-width: 1002px) 100vw, 1002px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Save the automation step parameter mapping and publish the runbook."),(0,o.kt)("hr",null),(0,o.kt)("h2",null,"12-5: Update Trigger to set Execution Automatic"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"}," Automations→ Runbooks → Triggers -> Edit Trigger “Restart API Service” ")),(0,o.kt)("p",null,"Update Runbook execution from “Manual” to “Automatic”."),(0,o.kt)("p",null,"Configure Parameter mapping from alert to Runbook parameters “alertid’ = Serial and “Node” = Node"),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"44.09722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAxElEQVQoz33R4aqGIAwGYO//Ms+fQk+KVu7d1DrkKPxO8D2I6BhsU+OcW7w/z/P4dH519GWICMC1M9OgfsVSgWJ+umma5nm21i6D38G/qzLruqaUuJcFUDoRyTmXG5gzUfnEzEZP76laa88ZBTvyO8GkGGOKKUatDIBfxiAA6a7KzjnfhRB05hCC995a629PjsaXZdF8U2t9Oqm1ikgppbVGdH0BM2sRJSIAtm3TXoyItJs+Q3+CI2fKmTRpnIiI9n3XyB+UEglp1ACyzQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB update trigger",title:"FRB update trigger",src:"/waiops-tech-jam/static/3fd03c0a8601d976a27da57859ce01b6/3cbba/FRB_update_trigger.png",srcSet:["/waiops-tech-jam/static/3fd03c0a8601d976a27da57859ce01b6/7fc1e/FRB_update_trigger.png 288w","/waiops-tech-jam/static/3fd03c0a8601d976a27da57859ce01b6/a5df1/FRB_update_trigger.png 576w","/waiops-tech-jam/static/3fd03c0a8601d976a27da57859ce01b6/3cbba/FRB_update_trigger.png 1152w","/waiops-tech-jam/static/3fd03c0a8601d976a27da57859ce01b6/0b124/FRB_update_trigger.png 1728w","/waiops-tech-jam/static/3fd03c0a8601d976a27da57859ce01b6/1a890/FRB_update_trigger.png 1739w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Save changes to the trigger."),(0,o.kt)("hr",null),(0,o.kt)("h2",null,"12-6: Test Fully automated Runbook"),(0,o.kt)("p",null,"Connect to OCP Infra node."),(0,o.kt)("p",null,"Check status of apache2 service on OCP Infra node. If it is not running start it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl status apache2\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl start apache2\n")),(0,o.kt)("p",null,"Now stop apache2 Service and insert test alert for apache2 Service. (In live monitoring this alert is automatically generated when Service goes down)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl stop apache2\nsudo systemctl status apache2\n")),(0,o.kt)("p",null,"Login into OCP cluster and simulate corresponding alert "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"oc exec -it evtmanager-ncoprimary-0 -- /bin/bash -c '/opt/IBM/tivoli/netcool/omnibus/bin/nco_sql -server AGG_P -user root -pass $OMNIBUS_ROOT_PWD'\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"insert into alerts.status (Identifier,Severity,Type,AlertGroup,Node,FirstOccurrence,LastOccurrence,Manager,Class,Summary) values('Demo API Server <HOSTNAME> 1',5,1,'Demo','<HOSTNAME>',getdate,getdate,'Tivoli EIF Probe',6601,'API Server on <HOST>:<PORT> is DOWN');\ngo\n")),(0,o.kt)("p",null,"Expected Output"),(0,o.kt)("p",null,"Launch Alert Viewer and check alert with Summary = ” API Server on HOST is DOWN”. There should be a runbook associated with this alert automatically."),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"38.888888888888886%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABD0lEQVQY012PTU7DQAyF59os4CasQXAIdtyg2QQlJFGQ2tDMTzI/9ozHKBlBS7+FZVt6fs9Ca01EzJx/2foyXi3TDv1H9F13PB6n6SSlNMYoredpkuezNnrVxmq97IQQEBEAvA/OhYKo64+maZq27bqu7/t+GD4Ph6Gu235oq2qoqnH8GsdxXVdmttYCAFHJQiKmLfM15W6MUWltlgUAENF7z8xhr4WcSQSIl8/2h621zjkAkFJqpdYd5xwze++I0p9eIKZbZ+e890VsjPHeW2uLs3eW8yWpALx1djsAoJQq4hACAHDm07eygSByiIxpE986l9iIOM/zsiyIGFPKRJH48S3fv+SH13z3lJ/f8w+28cw74Y+BVgAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB alertviewer",title:"FRB alertviewer",src:"/waiops-tech-jam/static/a9f8caa6321902b85387f876046de872/3cbba/FRB_alertviewer.png",srcSet:["/waiops-tech-jam/static/a9f8caa6321902b85387f876046de872/7fc1e/FRB_alertviewer.png 288w","/waiops-tech-jam/static/a9f8caa6321902b85387f876046de872/a5df1/FRB_alertviewer.png 576w","/waiops-tech-jam/static/a9f8caa6321902b85387f876046de872/3cbba/FRB_alertviewer.png 1152w","/waiops-tech-jam/static/a9f8caa6321902b85387f876046de872/0b124/FRB_alertviewer.png 1728w","/waiops-tech-jam/static/a9f8caa6321902b85387f876046de872/70721/FRB_alertviewer.png 1843w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Open Event information for this alert to which runbook is associated. You will see Runbook parameters under Information, Runbook is set to run automatically."),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"18.40277777777778%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAmklEQVQI103LyxKDIAxAUf//++xrUbsqCRogkChBN53q2OlZ39txyWa2nGqtpRREHMfRe4+ARMF29c8RdwBOVe3UWlNVcM4jekQExLcLRNNEUsq801mXZTGzDgCY2az9ZhFxiBgIiHwIIWfiNI1TjJG/UopRVdd17YqUbdvaaW1trjUNg/SX3F/kerP7Q5+vLMLMMR0/hxhTSh/qy+GAb2sO4QAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB details",title:"FRB details",src:"/waiops-tech-jam/static/813962a351fdc19c73e90fb6d1113943/3cbba/FRB_details.png",srcSet:["/waiops-tech-jam/static/813962a351fdc19c73e90fb6d1113943/7fc1e/FRB_details.png 288w","/waiops-tech-jam/static/813962a351fdc19c73e90fb6d1113943/a5df1/FRB_details.png 576w","/waiops-tech-jam/static/813962a351fdc19c73e90fb6d1113943/3cbba/FRB_details.png 1152w","/waiops-tech-jam/static/813962a351fdc19c73e90fb6d1113943/c49a8/FRB_details.png 1564w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Once it starts automatic execution  “RunbookStatus” changes to “In Progress” -> “Complete”"),(0,o.kt)("p",null,"For more information on RunbookStatus :  ",(0,o.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/runbook-automation?topic=events-state-transitions-runbookstatus-field"},"https://www.ibm.com/docs/en/runbook-automation?topic=events-state-transitions-runbookstatus-field")),(0,o.kt)("p",null,"Click the Event Journal tab:"),(0,o.kt)("p",null,"Runbook execution status and result are updated for this event."),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"52.43055555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABIklEQVQoz5XOuU7DQBAGYL8oFc8AVR6COhJCvA1NKFBAIokj2/GxvvaYtXdnPRsHJQThJih8mm6uP1h+bl/fV4vl6uVtvfjYpkWpAaT6JgE4gJiWmgiaupaCa1BZXtZVI3jLORdnKk5kslOMmSzv8qJnzDbNuSelDIyxRJ7II1qtoes6f0Tej55kmc6j9UMazbP4KYseWfqsITu2PBFRoLU2xlhrQQPnrZDCIiJaREJbFeldvLmR7NbCvYFZr2boYnT70wAG3vvDJeOh2FRhWLWCoBkUM5AoXIVkDZ1eB0Q0XrL3fBcXWZIXSR6FdRTyNFYls4jDMDjnjsvnNz8O1xnH8c/Yk4u/aX5474O+751z49Wmp4+x9/8hlG6FqrlshPoCW707vm4qm60AAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB journal updated",title:"FRB journal updated",src:"/waiops-tech-jam/static/bf1f5992e49e0bcfb1ae91e065cffb11/3cbba/FRB_journal_updated.png",srcSet:["/waiops-tech-jam/static/bf1f5992e49e0bcfb1ae91e065cffb11/7fc1e/FRB_journal_updated.png 288w","/waiops-tech-jam/static/bf1f5992e49e0bcfb1ae91e065cffb11/a5df1/FRB_journal_updated.png 576w","/waiops-tech-jam/static/bf1f5992e49e0bcfb1ae91e065cffb11/3cbba/FRB_journal_updated.png 1152w","/waiops-tech-jam/static/bf1f5992e49e0bcfb1ae91e065cffb11/888a7/FRB_journal_updated.png 1524w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"You can check if the system automatically restarted the service."),(0,o.kt)("p",null,"Connect to OCP Infra node & check status of apache2 service."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl status apache2\n")),(0,o.kt)("p",null,"It should return running status , as runbook automatically started this service "),(0,o.kt)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"695px"}},"\n      ",(0,o.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"46.18055555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABG0lEQVQoz42R3W7DIAxG8/5vV6nrFpSU/ABJg5JgMBAgSSe6m12ts44+WbKOLNmFn2ZsheUPN0jsBPYDdgN2IgAmdAldNDYn2ozJPM/z+aoCG6Y+KvVZr7dqvRJdNYYyc+9NwwzlOXPPo8ZkbDI26l+yGyZz73XV6brXdbfJNaELYLYFwqLCCmHVGWWC0hEwAoZFebnszhdukJryvI2yLM9qk8s2qyOmTEpHiLn5yRiPlM60HzGdx1Fgy4FQIA02wrIxWb/7bQ/x+Y8qLH8AobpqbT+6Qb4uN+3OHzG9l7dZ6arFfjQN1zTfRhMKJfVyfS87MS2XLyipulXqVgOh6kqWS+mEzPPzTzmsYChzQtp+zPAH5vewMMPbzd/2hgJQzvzHYgAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,o.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"FRB result output",title:"FRB result output",src:"/waiops-tech-jam/static/c0aa62628615fc71f5b37f83b929b54f/03efe/FRB_result_output.png",srcSet:["/waiops-tech-jam/static/c0aa62628615fc71f5b37f83b929b54f/7fc1e/FRB_result_output.png 288w","/waiops-tech-jam/static/c0aa62628615fc71f5b37f83b929b54f/a5df1/FRB_result_output.png 576w","/waiops-tech-jam/static/c0aa62628615fc71f5b37f83b929b54f/03efe/FRB_result_output.png 695w"],sizes:"(max-width: 695px) 100vw, 695px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    "),(0,o.kt)("p",null,"Now you have a fully automated runbook functional in your environment."),(0,o.kt)("p",null,"For more details on Runbooks, see the documentation link: ",(0,o.kt)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/noi/1.6.5?topic=systems-managing-runbooks-automations"},"https://www.ibm.com/docs/en/noi/1.6.5?topic=systems-managing-runbooks-automations")),(0,o.kt)("p",null,"You have now completed this module and learned how to create and configure fully automated runbook in Event Manager."),(0,o.kt)("hr",null))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-tutorials-aiops-fully-automated-runbooks-index-mdx-c5281cc2ad1de7dac06a.js.map