"use strict";(self.webpackChunkswat_hub=self.webpackChunkswat_hub||[]).push([[2426],{15680:(e,t,a)=>{a.d(t,{xA:()=>c,yg:()=>d});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},g="mdxType",y={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),g=p(a),m=r,d=g["".concat(s,".").concat(m)]||g[m]||y[m]||o;return a?n.createElement(d,i(i({ref:t},c),{},{components:a})):n.createElement(d,i({ref:t},c))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[g]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},84085:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>y,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(58168),r=(a(96540),a(15680));const o={title:"5. Scope Based Correlation",description:"Scope Based Correlation",sidebar_position:5},i=void 0,l={unversionedId:"cloud-pak-aiops/alert-lab/scope-based/index",id:"cloud-pak-aiops/alert-lab/scope-based/index",title:"5. Scope Based Correlation",description:"Scope Based Correlation",source:"@site/labs/cloud-pak-aiops/alert-lab/5-scope-based/index.mdx",sourceDirName:"cloud-pak-aiops/alert-lab/5-scope-based",slug:"/cloud-pak-aiops/alert-lab/scope-based/",permalink:"/waiops-tech-jam/labs/cloud-pak-aiops/alert-lab/scope-based/",draft:!1,editUrl:"https://github.com/IBM/waiops-tech-jam/tree/main/labs/cloud-pak-aiops/alert-lab/5-scope-based/index.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"5. Scope Based Correlation",description:"Scope Based Correlation",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"4. Webhook and Kafka Data Load",permalink:"/waiops-tech-jam/labs/cloud-pak-aiops/alert-lab/webhook-integration/"},next:{title:"6. Temporal Correlation",permalink:"/waiops-tech-jam/labs/cloud-pak-aiops/alert-lab/temporal/"}},s={},p=[{value:"5.1: Create a Scope-based Event Grouping Policy",id:"51-create-a-scope-based-event-grouping-policy",level:2},{value:"5.2: Submit Events with the scope-based Policy Disabled",id:"52-submit-events-with-the-scope-based-policy-disabled",level:2},{value:"5.3: Submit Events with the scope-based Policy Enabled",id:"53-submit-events-with-the-scope-based-policy-enabled",level:2},{value:"5.4 Cleanup",id:"54-cleanup",level:2},{value:"5.5: Recap",id:"55-recap",level:2}],c={toc:p},g="wrapper";function y(e){let{components:t,...o}=e;return(0,r.yg)(g,(0,n.A)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,'Scope-based grouping is very powerful and provides significant event reduction\nby virtue of grouping alerts, thereby effectively reducing the "noise" presented\nto IT operations personnel.'),(0,r.yg)("p",null,'Scope-based alert grouping is based on a basic premise that alerts occurring at\n"around the same place", and "about the same time" are likely related.'),(0,r.yg)("p",null,"For example, a hardware failure causes the storage service to fail. This creates\na failure of a database service which impact web services that leverage this\ndatabase. Assuming we have the right observability in place, there will be\nanomalous events coming from the database and from the web service, around the\nsame time. In this case, the scope might be a common application or service\nname."),(0,r.yg)("p",null,"The objective here is to be able to group alerts based on common properties and\ntime of occurrence to identify when issues might be related. When related alerts\nare grouped based on their scope, you can view the details in the Alert Viewer."),(0,r.yg)("p",null,"The default scope-based policy in Cloud Pak for AIOps is a correlation on\nalert.resource.name constrained by a rolling window of 15 minutes. This will\nbecome more clear in the next steps."),(0,r.yg)("h2",{id:"51-create-a-scope-based-event-grouping-policy"},"5.1: Create a Scope-based Event Grouping Policy"),(0,r.yg)("p",null,"Scope-based grouping enable operations teams to provide local knowledge on how\nalerts should be grouped by defining scope-based grouping policies."),(0,r.yg)("p",null,"We will play the role of an SRE (Site Reliability Engineer) that is responsible\nfor an application that is deployed independently in two public cloud regions,\nUS-SOUTH and US-EAST. We have observability tools deployed that monitor each\napplication stack layer including databases (DB2), application servers (Liberty)\nand web services (APIs) on top. The challenge is that alerts related to each\nstack layer are not correlated despite the fact that belong to the same overall\napplication stack."),(0,r.yg)("p",null,"To facilitate your SRE work, you will create a new scope-based policy that will\ngroup alerts that have the common resource value alert.resource.application and\nthat belong to the two cloud regions US-SOUTH and US-EAST. Also, we want the\nalert grouping to happen within a 15 minute rolling window. In other words,\nalerts separated by more than 15 minutes will not be grouped together."),(0,r.yg)("p",null,"We will first review the default scope-based policies that come with the\nproduct. Log into the Cloud Pak for AIOps:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"From the burger menu in the top-left navigate to: ",(0,r.yg)("strong",{parentName:"p"},"Operate \u2192 Automations"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"From the ",(0,r.yg)("strong",{parentName:"p"},"Automations")," page, we will explore the existing scope-based\npolicies that come out-of-the-box"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Click on ",(0,r.yg)("strong",{parentName:"li"},"Filter")," icon on the left, check ",(0,r.yg)("strong",{parentName:"li"},"scope-based")," and click\n",(0,r.yg)("strong",{parentName:"li"},"Apply")))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("img",{src:a(22198).A,width:"1716",height:"792"})),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Note that there are two scope-based policies already defined"),(0,r.yg)("li",{parentName:"ul"},"Select on the ",(0,r.yg)("strong",{parentName:"li"},"Policy name")," of the first policy"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("img",{src:a(77712).A,width:"1716",height:"792"})),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"On the right-side slider, click on the ",(0,r.yg)("strong",{parentName:"li"},"Specification")," tab and explore the\n",(0,r.yg)("strong",{parentName:"li"},"Policy action")," rule logic"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("img",{src:a(44601).A,width:"1716",height:"792"})),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Now click on the down-arrow and explore the ",(0,r.yg)("strong",{parentName:"li"},"Policy action")," rule logic of\nthe second scope-based policy"),(0,r.yg)("li",{parentName:"ul"},"Click on the X to close the slider")))),(0,r.yg)("p",null,"Now we will create a new scope-based policy:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"From the same ",(0,r.yg)("strong",{parentName:"p"},"Automations")," page, select the ",(0,r.yg)("strong",{parentName:"p"},"Policies")," tab and click the\n",(0,r.yg)("strong",{parentName:"p"},"Create policy")," button")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"From the ",(0,r.yg)("strong",{parentName:"p"},"Policy templates")," page, select the ",(0,r.yg)("strong",{parentName:"p"},"Group alerts based on scope"),"\ntile")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"From the ",(0,r.yg)("strong",{parentName:"p"},"Group alerts based on scope")," page:"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Make sure the ",(0,r.yg)("strong",{parentName:"p"},"Policy")," is ",(0,r.yg)("strong",{parentName:"p"},"Enabled")," (green)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Under ",(0,r.yg)("strong",{parentName:"p"},"Policy details"),", set the ",(0,r.yg)("strong",{parentName:"p"},"Policy name"),' as "Group Alerts coming\nfrom 2 Locations by Location-Application"')),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Change the ",(0,r.yg)("strong",{parentName:"p"},"Execution order")," slider value to ",(0,r.yg)("strong",{parentName:"p"},"40"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Under Policy triggers, check ",(0,r.yg)("strong",{parentName:"p"},"Before an alert is created"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Under ",(0,r.yg)("strong",{parentName:"p"},"Condition sets"),":"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"click on ",(0,r.yg)("strong",{parentName:"li"},"Add condition")," and select ",(0,r.yg)("strong",{parentName:"li"},"Alert property")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("img",{src:a(60331).A,width:"1716",height:"792"})),(0,r.yg)("li",{parentName:"ul"},"Leave ",(0,r.yg)("strong",{parentName:"li"},"AND")," selected"),(0,r.yg)("li",{parentName:"ul"},"For ",(0,r.yg)("strong",{parentName:"li"},"Property")," select ",(0,r.yg)("strong",{parentName:"li"},"alert.resource.location")),(0,r.yg)("li",{parentName:"ul"},"For ",(0,r.yg)("strong",{parentName:"li"},"Operator")," select ",(0,r.yg)("strong",{parentName:"li"},"contains")),(0,r.yg)("li",{parentName:"ul"},"For ",(0,r.yg)("strong",{parentName:"li"},"Matches")," select ",(0,r.yg)("strong",{parentName:"li"},"any of")),(0,r.yg)("li",{parentName:"ul"},"For ",(0,r.yg)("strong",{parentName:"li"},"Value")," type (use uppercase in both) US-SOUTH and select String:\nUS-South, type US-EAST and select String: US-EAST"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Under ",(0,r.yg)("strong",{parentName:"p"},"Create a scope-based grouping"),":"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"select ",(0,r.yg)("strong",{parentName:"li"},"resource.location")),(0,r.yg)("li",{parentName:"ul"},"type the colon character ",(0,r.yg)("strong",{parentName:"li"},":")," and select ",(0,r.yg)("strong",{parentName:"li"},"String: :")),(0,r.yg)("li",{parentName:"ul"},"select ",(0,r.yg)("strong",{parentName:"li"},"resource.application")),(0,r.yg)("li",{parentName:"ul"},"Your final value for ScopeID should be",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Value of: alert.resource.location String: : Value of:\nalert.resource.application")),(0,r.yg)("li",{parentName:"ul"},"as shown below"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("img",{src:a(93433).A,width:"1234",height:"144"})))))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Under ",(0,r.yg)("strong",{parentName:"p"},"Time window"),":"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"For time period field type 900. This represents 900 seconds (15 min)"),(0,r.yg)("li",{parentName:"ul"},"Under ",(0,r.yg)("strong",{parentName:"li"},"Type"),", select ",(0,r.yg)("strong",{parentName:"li"},"Rolling"),". This means that alerts will be grouped\nas long as they are not separated by more than 15 min")))))),(0,r.yg)("p",null,"Your new policy should look like the charts below:"),(0,r.yg)("p",null,(0,r.yg)("img",{src:a(32884).A,width:"1859",height:"849"})," ",(0,r.yg)("img",{src:a(55343).A,width:"1859",height:"849"})," ",(0,r.yg)("img",{src:a(70246).A,width:"1859",height:"399"})),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Finally, click on ",(0,r.yg)("strong",{parentName:"li"},"Create Policy")," on the top-right.")),(0,r.yg)("p",null,"Now you should have 3 scope-based policies. We will first submit events with all\nscope policies disabled and later we will resubmit the same events with the new\npolicy enabled. Make sure to ",(0,r.yg)("strong",{parentName:"p"},"disable all three policies")," as shown below. You\nmay be asked to confirm the action (the values in the ",(0,r.yg)("strong",{parentName:"p"},"Status")," column may be\ndifferent)."),(0,r.yg)("p",null,(0,r.yg)("img",{src:a(15393).A,width:"1859",height:"680"})),(0,r.yg)("h2",{id:"52-submit-events-with-the-scope-based-policy-disabled"},"5.2: Submit Events with the scope-based Policy Disabled"),(0,r.yg)("p",null,"Create a new file called ",(0,r.yg)("em",{parentName:"p"},"scope_events.json")," by running the following command in\nthe ",(0,r.yg)("strong",{parentName:"p"},"Terminal")," window to open the text editor, ",(0,r.yg)("strong",{parentName:"p"},"copy")," the event data below,\n",(0,r.yg)("strong",{parentName:"p"},"paste")," it into the text editor, click on the ",(0,r.yg)("strong",{parentName:"p"},"Save")," button in the text\neditor and ",(0,r.yg)("strong",{parentName:"p"},"close")," the editor window (click on the X)."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"gedit scope_events.json\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},'{ "sender":{ "service":"Zabbix Middleware Monitoring", "name":"US-SOUTH CEA SelfMonitoring @AGG_P", "type":"Zabbix" }, "resource":{ "application":"NetCash", "name":"DB2server2", "hostname":"DB2server2.company.com", "type":"host", "ipaddress":"10.1.96.24", "location":"US-SOUTH" }, "type":{ "classification":"System status", "eventType":"problem" }, "severity":3, "summary":"/dev/sda1 is 70% full", "occurrenceTime":"2023-05-05T14:40:38.000Z", "expirySeconds":0 }\n{ "sender":{ "service":"Zabbix Middleware Monitoring", "name":"US-EAST CEA SelfMonitoring @AGG_P", "type":"Zabbix" }, "resource":{ "application":"NetCash", "name":"DB2server2", "hostname":"DB2server2.company.com", "type":"host", "ipaddress":"10.1.96.28", "location":"US-EAST" }, "type":{ "classification":"System status", "eventType":"problem" }, "severity":5, "summary":"/dev/sda1 is 90% full", "occurrenceTime":"2023-05-05T14:45:20.000Z", "expirySeconds":0 }\n{ "sender":{ "service":"Zabbix Middleware Monitoring", "name":"EU-CENTRAL CEA SelfMonitoring @AGG_P", "type":"Zabbix" }, "resource":{ "application":"NetCash", "name":"DB2server2", "hostname":"DB2server2.company.com", "type":"host", "ipaddress":"10.1.96.29", "location":"EU-CENTRAL" }, "type":{ "classification":"System status", "eventType":"problem" }, "severity":6, "summary":"DB2ERR=667 THE CLUSTERING INDEX FOR A PARTITIONED TABLESPACE CANNOT BE EXPANDED", "occurrenceTime":"2023-05-05T14:46:10.000Z", "expirySeconds":0 }\n{ "sender":{ "service":"Zabbix Middleware Monitoring", "name":"US-SOUTH CEA SelfMonitoring @AGG_P", "type":"Zabbix" }, "resource":{ "application":"NetCash", "name":"Liberty Server 1", "hostname":"liberty1.company.com", "type":"host", "ipaddress":"10.1.96.30", "location":"US-SOUTH" }, "type":{ "classification":"System status", "eventType":"problem" }, "severity":4, "summary":"PH31839: LIBERTY 20.0.0.3 IS NOT ABLE TO CONNECT TO DB2 AFTER 3 ATTEMPTS", "occurrenceTime":"2023-05-05T14:47:22.000Z", "expirySeconds":0 }\n{ "sender":{ "service":"Zabbix Middleware Monitoring", "name":"US-EAST CEA SelfMonitoring @AGG_P", "type":"Zabbix" }, "resource":{ "application":"NetCash", "name":"Liberty Server 1", "hostname":"liberty1.company.com", "type":"host", "ipaddress":"10.1.96.33", "location":"US-EAST" }, "type":{ "classification":"System status", "eventType":"problem" }, "severity":5, "summary":"exception=The DB server rejected the connection. DSRA0010E: SQL State = 08004, Error Code = -99,999, id=jdbc/database", "occurrenceTime":"2023-05-05T14:48:55.000Z", "expirySeconds":0 }\n{ "sender":{ "service":"Zabbix Middleware Monitoring", "name":"EU-CENTRAL CEA SelfMonitoring @AGG_P", "type":"Zabbix" }, "resource":{ "application":"NetCash", "name":"Liberty Server 1", "hostname":"liberty1.company.com", "type":"host", "ipaddress":"10.1.96.01", "location":"EU-CENTRAL" }, "type":{ "classification":"System status", "eventType":"problem" }, "severity":5, "summary":"exception=The DB server is unresponsive. DSRA0010E: SQL State = 099, Error Code = -77, id=jdbc/database", "occurrenceTime":"2023-05-05T14:49:55.000Z", "expirySeconds":0 }\n{ "sender":{ "service":"Instana Application Monitoring", "name":"US-SOUTH API Layer SelfMonitoring", "type":"Instana" }, "resource":{ "application":"NetCash", "name":"NetCash Services", "hostname":"netcash-api.company.com", "type":"host", "ipaddress":"10.1.96.66", "location":"US-SOUTH" }, "type":{ "classification":"API availability", "eventType":"problem" }, "severity":5, "summary":"API: cash-transfer web service time out ", "occurrenceTime":"2023-05-05T14:50:13.000Z", "expirySeconds":0 }\n{ "sender":{ "service":"Instana Application Monitoring", "name":"US-EAST API Layer SelfMonitoring", "type":"Instana" }, "resource":{ "application":"NetCash", "name":"NetCash Services", "hostname":"netcash-api.company.com", "type":"host", "ipaddress":"10.1.96.69", "location":"US-EAST" }, "type":{ "classification":"API availability", "eventType":"problem" }, "severity":5, "summary":"API: account-balance web service time out ", "occurrenceTime":"2023-05-05T14:51:18.000Z", "expirySeconds":0 }\n')),(0,r.yg)("p",null,"Now lets submit the events via the webhook script created in the previous\nsection by running the following command in the ",(0,r.yg)("strong",{parentName:"p"},"Terminal")," window:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"bash event-load-webhook.sh scope_events.json\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"From the burger menu in the top-left navigate to: ",(0,r.yg)("strong",{parentName:"li"},"Operate \u2192 Alerts")),(0,r.yg)("li",{parentName:"ul"},"Click on the ",(0,r.yg)("strong",{parentName:"li"},"Refresh alerts")," icon on the right, to see the alerts we just\nloaded."),(0,r.yg)("li",{parentName:"ul"},"Lets add some color to this page:",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Click on the ",(0,r.yg)("strong",{parentName:"li"},"gear")," icon in the right and select ",(0,r.yg)("strong",{parentName:"li"},"User preferences"),"."),(0,r.yg)("li",{parentName:"ul"},"From the ",(0,r.yg)("strong",{parentName:"li"},"User preferences for alerts")," pop-up, click on the ",(0,r.yg)("strong",{parentName:"li"},"Row\ncoloring")," slider to On (green)."),(0,r.yg)("li",{parentName:"ul"},"Click on ",(0,r.yg)("strong",{parentName:"li"},"Save"),".")))),(0,r.yg)("p",null,"Note that all the Alerts are reflected in this Alerts view (now with color) but\nthere is no grouping done as shown below:"),(0,r.yg)("p",null,(0,r.yg)("img",{src:a(76079).A,width:"1859",height:"536"})),(0,r.yg)("p",null,"Before resubmitting events again, we will clear all these Alerts in the view:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Select all the Alerts, right-click and select ",(0,r.yg)("strong",{parentName:"li"},"Clear"),"."),(0,r.yg)("li",{parentName:"ul"},"The Alerts will change state from ",(0,r.yg)("strong",{parentName:"li"},"Open")," to ",(0,r.yg)("strong",{parentName:"li"},"Clear")," and eventually to\n",(0,r.yg)("strong",{parentName:"li"},"Closed"),"."),(0,r.yg)("li",{parentName:"ul"},"Wait 2-3 minutes until the Alert view is empty. Click the ",(0,r.yg)("strong",{parentName:"li"},"Refresh")," icon to\nsee changes.")),(0,r.yg)("h2",{id:"53-submit-events-with-the-scope-based-policy-enabled"},"5.3: Submit Events with the scope-based Policy Enabled"),(0,r.yg)("p",null,"We will now confirm that the scope-based correlation policy is actually working\nas expected, by enabling the policy and resubmitting the events."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"From the burger menu in the top-left navigate to: ",(0,r.yg)("strong",{parentName:"li"},"Operate \u2192 Automations")),(0,r.yg)("li",{parentName:"ul"},"From the ",(0,r.yg)("strong",{parentName:"li"},"Automations")," page, click on ",(0,r.yg)("strong",{parentName:"li"},"Filter")," icon on the left, check\n",(0,r.yg)("strong",{parentName:"li"},"scope-based")," and click ",(0,r.yg)("strong",{parentName:"li"},"Apply")," (this may be already done)."),(0,r.yg)("li",{parentName:"ul"},'Enable the scope-based policy "Group Alerts coming from 2 Locations by\nLocation-Application" that you created in the previous step.')),(0,r.yg)("p",null,"You should see one policy enabled, as shown below:"),(0,r.yg)("p",null,(0,r.yg)("img",{src:a(91810).A,width:"1859",height:"625"})),(0,r.yg)("p",null,"Now lets submit the events again via the webhook script created in the previous\nsection by running the following command from the ",(0,r.yg)("strong",{parentName:"p"},"Terminal")," window"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"bash event-load-webhook.sh scope_events.json\n")),(0,r.yg)("p",null,"Lets see the Alerts view again:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"From the burger menu in the top-left navigate to: ",(0,r.yg)("strong",{parentName:"li"},"Operate \u2192 Alerts"))),(0,r.yg)("p",null,"Note that now, the Alerts are grouped by Location and Application. Note also\nthat Alerts from the region EU-CENTRAL are not grouped as shown below."),(0,r.yg)("p",null,(0,r.yg)("img",{src:a(70427).A,width:"1859",height:"443"})),(0,r.yg)("p",null,'Expand the groups by clicking on the "twisty" icon on the left for each group,\nas shown below'),(0,r.yg)("p",null,(0,r.yg)("img",{src:a(92096).A,width:"1859",height:"541"})),(0,r.yg)("p",null,"Scroll to the right and check the view correlation icon on the top-right to\ncreate a new column called ",(0,r.yg)("strong",{parentName:"p"},"Correlation"),". You will see that the grouped Alerts\nhave the scope correlation icon in each row."),(0,r.yg)("p",null,(0,r.yg)("img",{src:a(70217).A,width:"1859",height:"541"})),(0,r.yg)("h2",{id:"54-cleanup"},"5.4 Cleanup"),(0,r.yg)("p",null,"Finally, we will clear all these Alerts in the view before we move to the next\nsection"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Select each group of Alerts, right-click and select ",(0,r.yg)("strong",{parentName:"li"},"Clear"),". Do the same\nwith the ungrouped Alerts."),(0,r.yg)("li",{parentName:"ul"},"The Alerts will change state from ",(0,r.yg)("strong",{parentName:"li"},"Open")," to ",(0,r.yg)("strong",{parentName:"li"},"Clear")," and eventually to\n",(0,r.yg)("strong",{parentName:"li"},"Closed"),"."),(0,r.yg)("li",{parentName:"ul"},"Wait 2-3 minutes until the Alert view is empty. Click the ",(0,r.yg)("strong",{parentName:"li"},"Refresh")," icon to\nsee changes.")),(0,r.yg)("p",null,"Also, lets disable the scope policy so it does not interfere with the rest of\nthe Lab:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"From the burger menu in the top-left navigate to: ",(0,r.yg)("strong",{parentName:"li"},"Operate \u2192 Automations")),(0,r.yg)("li",{parentName:"ul"},"From the ",(0,r.yg)("strong",{parentName:"li"},"Automations")," page, if there is no ",(0,r.yg)("strong",{parentName:"li"},"Scope-based")," filter set\nalready, click on Filter icon on the left, check ",(0,r.yg)("strong",{parentName:"li"},"Scope-based")," and click\n",(0,r.yg)("strong",{parentName:"li"},"Apply"),"."),(0,r.yg)("li",{parentName:"ul"},"Click on the slider on the policy that is ",(0,r.yg)("strong",{parentName:"li"},"Enabled")," in green to change it to\n",(0,r.yg)("strong",{parentName:"li"},"Disabled")," in grey as shown below")),(0,r.yg)("p",null,(0,r.yg)("img",{src:a(46928).A,width:"1862",height:"647"})),(0,r.yg)("h2",{id:"55-recap"},"5.5: Recap"),(0,r.yg)("p",null,"We created a new ",(0,r.yg)("strong",{parentName:"p"},"scope-based correlation policy")," that groups alerts within a\n15 minute rolling window by alert.resource.location and\nalert.resource.application and where the location is one of two cloud regions\nUS-SOUTH and US-EAST."))}y.isMDXComponent=!0},70427:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/alerts-grouped1-5d0256154824a2b00ef6759f48a54871.png"},92096:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/alerts-grouped2-769115e68fcb48ad333a39cb6de8e33b.png"},70217:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/alerts-grouped3-ae4260a463487eb28554f0c6910b9712.png"},46928:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/disable-all-059907664b402b41fd323bc29829d3df.png"},22198:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/filter-4114ad51e8e8aac940823059a64176f2.png"},77712:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/first-f1f134042bda405739a6af0f2f9c1a8c.png"},76079:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/no-grouping-7880d24ab1533df4ef8262cc53f11749.png"},32884:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/policy-1-9b14633d2df05ddefc1ab246b88bd47f.png"},55343:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/policy-2-4151e120c9d962e2fde9df4a4e9c2ea8.png"},70246:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/policy-3-c6f4894326728f0af815174c433c965a.png"},15393:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/policy-disabled-bce6252c14bc9bf883656af0602c42f7.png"},91810:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/policy-enabled-69331dc78cdd8cd014f508c9f5c023b6.png"},60331:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/property-f3f55594df3f76e42862abfc1ea1fe13.png"},93433:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/scopeid-919b72b2900cb50e891b56a231a4939d.png"},44601:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/spec-c71cf7036538b93b7869738a4ba00bcd.png"}}]);