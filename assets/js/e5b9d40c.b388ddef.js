"use strict";(self.webpackChunkswat_hub=self.webpackChunkswat_hub||[]).push([[6149],{15680:(e,n,a)=>{a.d(n,{xA:()=>c,yg:()=>d});var t=a(96540);function o(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){o(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,o=function(e,n){if(null==e)return{};var a,t,o={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(o[a]=e[a]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=t.createContext({}),p=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},c=function(e){var n=p(e.components);return t.createElement(l.Provider,{value:n},e.children)},g="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),g=p(a),u=o,d=g["".concat(l,".").concat(u)]||g[u]||m[u]||r;return a?t.createElement(d,i(i({ref:n},c),{},{components:a})):t.createElement(d,i({ref:n},c))}));function d(e,n){var a=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=u;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[g]="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=a[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,a)}u.displayName="MDXCreateElement"},51010:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var t=a(58168),o=(a(96540),a(15680));const r={title:"3. Install Steps",description:"Installation guidance",sidebar_position:3},i=void 0,s={unversionedId:"cloud-pak-aiops/install-lab/installation/index",id:"cloud-pak-aiops/install-lab/installation/index",title:"3. Install Steps",description:"Installation guidance",source:"@site/labs/cloud-pak-aiops/install-lab/3-installation/index.mdx",sourceDirName:"cloud-pak-aiops/install-lab/3-installation",slug:"/cloud-pak-aiops/install-lab/installation/",permalink:"/waiops-tech-jam/labs/cloud-pak-aiops/install-lab/installation/",draft:!1,editUrl:"https://github.com/IBM/waiops-tech-jam/tree/main/labs/cloud-pak-aiops/install-lab/3-installation/index.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"3. Install Steps",description:"Installation guidance",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"2. Lab Environment",permalink:"/waiops-tech-jam/labs/cloud-pak-aiops/install-lab/lab-environment/"},next:{title:"4. Custom Sizing Tool",permalink:"/waiops-tech-jam/labs/cloud-pak-aiops/install-lab/sizing-tool/"}},l={},p=[{value:"3.1: Overview",id:"31-overview",level:2},{value:"3.2: Connect to the OpenShift cluster from bastion VM",id:"32-connect-to-the-openshift-cluster-from-bastion-vm",level:2},{value:"3.3: Install the Cloud Pak for AIOps Operator",id:"33-install-the-cloud-pak-for-aiops-operator",level:2},{value:"Create a custom project (namespace)",id:"create-a-custom-project-namespace",level:3},{value:"Create an OperatorGroup in your custom project (namespace)",id:"create-an-operatorgroup-in-your-custom-project-namespace",level:3},{value:"Create the entitlement key pull secret",id:"create-the-entitlement-key-pull-secret",level:3},{value:"Usage data collection",id:"usage-data-collection",level:3},{value:"Ensure external traffic access",id:"ensure-external-traffic-access",level:3},{value:"Create the catalog sources",id:"create-the-catalog-sources",level:3},{value:"Install Cert Manager",id:"install-cert-manager",level:3},{value:"Install the License Service",id:"install-the-license-service",level:3},{value:"Verify cluster readiness",id:"verify-cluster-readiness",level:3},{value:"Install the Cloud Pak for AIOps operator",id:"install-the-cloud-pak-for-aiops-operator",level:3},{value:"3.4: Deploy an instance of Cloud Pak for AIOps",id:"34-deploy-an-instance-of-cloud-pak-for-aiops",level:2},{value:"3.5: Log in to the Cloud Pak for AIOps console",id:"35-log-in-to-the-cloud-pak-for-aiops-console",level:2}],c={toc:p},g="wrapper";function m(e){let{components:n,...r}=e;return(0,o.yg)(g,(0,t.A)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,o.yg)("h2",{id:"31-overview"},"3.1: Overview"),(0,o.yg)("p",null,"This module focuses on the initial deployment of the Cloud Pak for AIOps. This\ndeployment scenario will assume you are deploying onto the IBM Technology Zone,\n",(0,o.yg)("a",{parentName:"p",href:"https://techzone.ibm.com/collection/jam-in-a-box-for-aiops/environments"},"Jam-in-a-Box for AIOps"),"\nenvironments. Note that the same steps would generally apply to an OpenShift\ncluster deployed on another cloud provider, or on-premises."),(0,o.yg)("h2",{id:"32-connect-to-the-openshift-cluster-from-bastion-vm"},"3.2: Connect to the OpenShift cluster from bastion VM"),(0,o.yg)("p",null,"In the previous section, we described how to access the bastion VM. Ensure you\nhave access to the AIOps OCP cluster by running the following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"export KUBECONFIG=/home/admin/kubeconfig-aiops\n")),(0,o.yg)("h2",{id:"33-install-the-cloud-pak-for-aiops-operator"},"3.3: Install the Cloud Pak for AIOps Operator"),(0,o.yg)("p",null,"In this section, our objective will be to deploy the product Operator which will\nthen pull down the software images to the cluster, so that we can deploy an\ninstance of the Cloud Pak for AIOps in the next section. You will be copying,\npasting and running the following commands from the ",(0,o.yg)("strong",{parentName:"p"},"Terminal")," window."),(0,o.yg)("admonition",{type:"tip"},(0,o.yg)("ul",{parentName:"admonition"},(0,o.yg)("li",{parentName:"ul"},"It is essential to ensure the indentation is correctly copied from the\ndocumentation."),(0,o.yg)("li",{parentName:"ul"},"When you copy the commands, use the Copy helper on the right side as shown\nbelow: ",(0,o.yg)("img",{src:a(32779).A,width:"995",height:"89"})))),(0,o.yg)("admonition",{type:"caution"},(0,o.yg)("p",{parentName:"admonition"},"IBM Cloud Pak for AIOps and Infrastructure Automation can co-exist on the same\ncluster, but you cannot have multiple instances of IBM Cloud Pak for AIOps or\nInfrastructure Automation on the same cluster.")),(0,o.yg)("p",null,"If interested, this install steps we will begin to follow are documented\n",(0,o.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cloud-pak-aiops/4.7.0?topic=installing-starter-installation#exp_namespace"},(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("em",{parentName:"strong"},"here"))),"."),(0,o.yg)("h3",{id:"create-a-custom-project-namespace"},"Create a custom project (namespace)"),(0,o.yg)("p",null,"Lets start by creating the project (namespace) where we will install the\nproduct. It is important to know which project/namespace you are in when issuing\n",(0,o.yg)("inlineCode",{parentName:"p"},"oc")," commands. Run the following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"oc create namespace cp4aiops\n")),(0,o.yg)("h3",{id:"create-an-operatorgroup-in-your-custom-project-namespace"},"Create an OperatorGroup in your custom project (namespace)"),(0,o.yg)("p",null,"The Operator requires an Operator Group, which provides multitenant\nconfiguration to installed Operators. An Operator group selects target\nnamespaces in which to generate required RBAC (Role Base Access Control) access\nfor its member Operators. Run the following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"cat << EOF | oc apply -f -\napiVersion: operators.coreos.com/v1\nkind: OperatorGroup\nmetadata:\n  name: cp4aiops-operator-group\n  namespace: cp4aiops\nspec:\n  targetNamespaces:\n    - cp4aiops\nEOF\n\n")),(0,o.yg)("h3",{id:"create-the-entitlement-key-pull-secret"},"Create the entitlement key pull secret"),(0,o.yg)("p",null,"Now we will store the\n",(0,o.yg)("a",{parentName:"p",href:"https://ibm.github.io/waiops-tech-jam/labs/cloud-pak-aiops/install-lab/lab-environment/#obtain-your-entitlement-key"},"entitlement key that you obtained previously"),"\ninto a secret. This secret will be used to pull installation images. Copy &\npaste the following command into the ",(0,o.yg)("strong",{parentName:"p"},"Text Editor")," in the bastion VM, add your\nentitlement key and run the command from the ",(0,o.yg)("strong",{parentName:"p"},"Terminal"),":"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"oc create secret docker-registry ibm-entitlement-key \\\n    --docker-username=cp \\\n    --docker-password=<entitlement-key> \\\n    --docker-server=cp.icr.io \\\n    --namespace=cp4aiops\n")),(0,o.yg)("admonition",{type:"tip"},(0,o.yg)("p",{parentName:"admonition"},"To open the ",(0,o.yg)("strong",{parentName:"p"},"Text Editor")," in the bastion VM, click on ",(0,o.yg)("strong",{parentName:"p"},"Applications"),", type\n",(0,o.yg)("inlineCode",{parentName:"p"},"text")," into the search bar, and click on the ",(0,o.yg)("strong",{parentName:"p"},"Text Editor")," icon."),(0,o.yg)("p",{parentName:"admonition"},(0,o.yg)("img",{alt:"Text edit instructions",src:a(84711).A,width:"2874",height:"1166"}))),(0,o.yg)("p",null,"If interested, this install step is documented\n",(0,o.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cloud-pak-aiops/4.7.0?topic=installing-starter-installation#exp_pull_secret"},(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("em",{parentName:"strong"},"here"))),"."),(0,o.yg)("h3",{id:"usage-data-collection"},"Usage data collection"),(0,o.yg)("p",null,"To help the development of IBM Cloud Pak for AIOps, daily aggregated usage data\nis collected to analyze how the product is used. The usage data is collected by\nthe cp4aiops-metricsprocessor pod, and is sent to and stored in IBM controlled\nGDPR-compliant systems. For the purpose of this Lab, we will skip this step."),(0,o.yg)("p",null,"If interested, this install step is documented\n",(0,o.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cloud-pak-aiops/4.7.0?topic=installing-starter-installation#usage_secret"},(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("em",{parentName:"strong"},"here"))),"."),(0,o.yg)("h3",{id:"ensure-external-traffic-access"},"Ensure external traffic access"),(0,o.yg)("p",null,"Run the following command to update the endpointPublishingStrategy.type. This is\ndone to allow traffic in case the ingresscontroller its set to HostNetwork. Run\nthe following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},'if [ $(oc get ingresscontroller default -n openshift-ingress-operator -o jsonpath=\'{.status.endpointPublishingStrategy.type}\') = "HostNetwork" ]; then oc patch namespace default --type=json -p \'[{"op":"add","path":"/metadata/labels","value":{"network.openshift.io/policy-group":"ingress"}}]\'; fi\n')),(0,o.yg)("p",null,"If interested, this install step is documented\n",(0,o.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/latest?topic=aiops-starter-installation#exp_ingress"},(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("em",{parentName:"strong"},"here"))),"."),(0,o.yg)("h3",{id:"create-the-catalog-sources"},"Create the catalog sources"),(0,o.yg)("p",null,"After installation, CatalogSource objects determine\nwhether the upgrade of your Cloud Pak for AIOps, Cert Manager or License Service deployments are initiated automatically when a new patch becomes available."),(0,o.yg)("p",null,"The CatalogSources object can be configured to automatically poll for and retrieve a\nnewer catalog by enabling the polling attribute,\n",(0,o.yg)("em",{parentName:"p"},"spec.updateStrategy.registryPoll"),". If a newer catalog for a patch is found and\nretrieved, then an automatic upgrade of the respective component is\ninitiated. For the purpose of this Lab, we will disable the automatic initiation\nof patch upgrades. Run the following:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"cat << EOF | oc apply -f -\napiVersion: operators.coreos.com/v1alpha1\nkind: CatalogSource\nmetadata:\n  name: ibm-aiops-catalog\n  namespace: openshift-marketplace\nspec:\n  displayName: ibm-aiops-catalog\n  publisher: IBM Content\n  sourceType: grpc\n  image: icr.io/cpopen/ibm-aiops-catalog@sha256:9c3abcfcff17f2dfb28efa697de35a7b6bdbade58f1412a81d90283c6b93fe38\n---\napiVersion: operators.coreos.com/v1alpha1\nkind: CatalogSource\nmetadata:\n  name: ibm-cert-manager-catalog\n  namespace: openshift-marketplace\nspec:\n  displayName: ibm-cert-manager\n  publisher: IBM\n  sourceType: grpc\n  image: icr.io/cpopen/ibm-cert-manager-operator-catalog\n---\napiVersion: operators.coreos.com/v1alpha1\nkind: CatalogSource\nmetadata:\n  name: ibm-licensing-catalog\n  namespace: openshift-marketplace\nspec:\n  displayName: IBM License Service Catalog\n  publisher: IBM\n  sourceType: grpc\n  image: icr.io/cpopen/ibm-licensing-catalog\nEOF\n")),(0,o.yg)("p",null,"If interested, this install step is documented\n",(0,o.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cloud-pak-aiops/4.7.0?topic=installing-starter-installation#exp_catalog"},(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("em",{parentName:"strong"},"here"))),"."),(0,o.yg)("admonition",{type:"tip"},(0,o.yg)("p",{parentName:"admonition"},"The install step from the IBM Docs installation instructions also includes\ndetails on how to fix the ",(0,o.yg)("em",{parentName:"p"},"ibm-operator-catalog")," CatalogSource to always use the\ncurrent image digest, instead of ",(0,o.yg)("em",{parentName:"p"},"icr.io/cpopen/ibm-operator-catalog:latest"),".\nThis ensures that the ibm-operator-catalog CatalogSource pods do not pull the\nlatest image if a node reload or other issue causes them to restart.")),(0,o.yg)("p",null,"Confirm the CatalogSources are created by running the following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"oc get CatalogSources -n openshift-marketplace\n")),(0,o.yg)("h3",{id:"install-cert-manager"},"Install Cert Manager"),(0,o.yg)("p",null,"Install the IBM Cloud Pak Certificate Manager:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"cat << EOF | oc apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: ibm-cert-manager\n---\napiVersion: operators.coreos.com/v1\nkind: OperatorGroup\nmetadata:\n  name: ibm-cert-manager-operator-group\n  namespace: ibm-cert-manager\n---\napiVersion: operators.coreos.com/v1alpha1\nkind: Subscription\nmetadata:\n  name: ibm-cert-manager-operator\n  namespace: ibm-cert-manager\nspec:\n  channel: v4.2\n  installPlanApproval: Automatic\n  name: ibm-cert-manager-operator\n  source: ibm-cert-manager-catalog\n  sourceNamespace: openshift-marketplace\nEOF\n")),(0,o.yg)("p",null,"Run the following command to ensure that the IBM Cert Manager pods have a STATUS\nof Running before proceeding to the next step:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"oc -n ibm-cert-manager get pods\n")),(0,o.yg)("p",null,"Example output for a successful IBM Cert Manager installation:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"NAME                                        READY   STATUS    RESTARTS   AGE\ncert-manager-cainjector-674854c49d-vstq4    1/1     Running   0          8d\ncert-manager-controller-646d4bd6fd-zwmqm    1/1     Running   0          8d\ncert-manager-webhook-8598787c8-s4lkt        1/1     Running   0          8d\nibm-cert-manager-operator-c96957695-dkxnm   1/1     Running   0          8d\n")),(0,o.yg)("admonition",{type:"warning"},(0,o.yg)("p",{parentName:"admonition"},"Ensure you see all pods in a ",(0,o.yg)("strong",{parentName:"p"},"Ready 1/1")," state before proceeding to the next\nstep.")),(0,o.yg)("h3",{id:"install-the-license-service"},"Install the License Service"),(0,o.yg)("p",null,"IBM Cloud Pak for AIOps requires the installation of the IBM License Service.\nYou must install the IBM License Service on the Red Hat OpenShift cluster that\nyou are installing IBM Cloud Pak for AIOps on."),(0,o.yg)("p",null,"Run the following command to create the resource definitions that you need:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"cat << EOF | oc apply -f -\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: ibm-licensing\n---\napiVersion: operators.coreos.com/v1\nkind: OperatorGroup\nmetadata:\n  name: ibm-licensing-operator-group\n  namespace: ibm-licensing\nspec:\n  targetNamespaces:\n  - ibm-licensing\n---\napiVersion: operators.coreos.com/v1alpha1\nkind: Subscription\nmetadata:\n  name: ibm-licensing-operator-app\n  namespace: ibm-licensing\nspec:\n  channel: v4.2\n  installPlanApproval: Automatic\n  name: ibm-licensing-operator-app\n  source: ibm-licensing-catalog\n  sourceNamespace: openshift-marketplace\nEOF\n")),(0,o.yg)("p",null,"Run the following command to ensure that the IBM License Server pods have a\nSTATUS of Running before proceeding to the next step."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"oc -n ibm-licensing get pods\n")),(0,o.yg)("p",null,"Example output for a successful IBM License Service installation:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"NAME                                              READY   STATUS    RESTARTS   AGE\nibm-licensing-operator-db4cd746c-xzmlf            1/1     Running   0          8d\n")),(0,o.yg)("admonition",{type:"warning"},(0,o.yg)("p",{parentName:"admonition"},"Ensure you see all pods in a ",(0,o.yg)("strong",{parentName:"p"},"Ready 1/1")," state before proceeding to the next\nstep.")),(0,o.yg)("h3",{id:"verify-cluster-readiness"},"Verify cluster readiness"),(0,o.yg)("p",null,"In order to finish the Lab on time, we will skip the section regarding verifying\nthe cluster readiness. Remember to run this verification in a production\nimplementation."),(0,o.yg)("p",null,"If interested, this install step is documented\n",(0,o.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cloud-pak-aiops/4.7.0?topic=installing-starter-installation#prereq_check"},(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("em",{parentName:"strong"},"here"))),"."),(0,o.yg)("h3",{id:"install-the-cloud-pak-for-aiops-operator"},"Install the Cloud Pak for AIOps operator"),(0,o.yg)("p",null,"Finally, we are ready to install the Operator. Run the following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"cat << EOF | oc apply -f -\napiVersion: operators.coreos.com/v1alpha1\nkind: Subscription\nmetadata:\n  name: ibm-aiops-orchestrator\n  namespace: cp4aiops\nspec:\n  channel: v4.7\n  installPlanApproval: Automatic\n  name: ibm-aiops-orchestrator\n  source: ibm-aiops-catalog\n  sourceNamespace: openshift-marketplace\nEOF\n")),(0,o.yg)("p",null,"After a few minutes you can confirm that the Operator is fully installed by\nrunning the following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},'oc get csv -n cp4aiops | egrep "ibm-aiops-orchestrator"\n')),(0,o.yg)("p",null,"You should see ",(0,o.yg)("strong",{parentName:"p"},"Succeeded")," messages as shown below:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"ibm-aiops-orchestrator.v4.7.0         IBM Cloud Pak for AIOps               4.7.0   Succeeded\n")),(0,o.yg)("p",null,"If interested, this install step is documented\n",(0,o.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cloud-pak-aiops/4.7.0?topic=installing-starter-installation#exp_operator"},(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("em",{parentName:"strong"},"here"))),"."),(0,o.yg)("admonition",{type:"warning"},(0,o.yg)("p",{parentName:"admonition"},"Ensure you see the ",(0,o.yg)("strong",{parentName:"p"},"Succeeded")," status before proceeding to the next step.")),(0,o.yg)("h2",{id:"34-deploy-an-instance-of-cloud-pak-for-aiops"},"3.4: Deploy an instance of Cloud Pak for AIOps"),(0,o.yg)("p",null,"This final step involves deploying a running instance of the product onto the\nOpenShift cluster. Note in the following command that we specify ",(0,o.yg)("strong",{parentName:"p"},"accept")," the\nlicense, that the installation size is ",(0,o.yg)("strong",{parentName:"p"},"small"),", and the name of the file and\nblock ",(0,o.yg)("strong",{parentName:"p"},"storage classes"),". In a real deployment, you will have to define the\nstorage classes in advance. We will get deeper into storage classes later in the\nLab."),(0,o.yg)("p",null,"Note also that we specify the ",(0,o.yg)("strong",{parentName:"p"},"TopologyModel"),'. This is the terminology to use\nin the product when defining collections of topology resource groups. Valid\nvalues for TopologyModel are "application" or "service". Run the following\ncommands:'),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-sh"},"export LICENSE_ACCEPT=true\nexport INSTALL_SIZE=small\nexport STORAGE_CLASS_FILE=ocs-storagecluster-cephfs\nexport STORAGE_CLASS_BLOCK=ocs-storagecluster-ceph-rbd\nexport TOPOLOGY_MODEL=application\n\ncat << EOF | oc apply -f -\napiVersion: orchestrator.aiops.ibm.com/v1alpha1\nkind: Installation\nmetadata:\n  name: ibm-cp-aiops\n  namespace: cp4aiops\nspec:\n  imagePullSecret: ibm-entitlement-key\n  license:\n    accept: ${LICENSE_ACCEPT}\n  pakModules:\n  - name: aiopsFoundation\n    enabled: true\n  - name: applicationManager\n    enabled: true\n  - name: aiManager\n    enabled: true\n  - name: connection\n    enabled: false\n  - name: logAnomalyDetection\n    enabled: false\n  size: ${INSTALL_SIZE}\n  storageClass: ${STORAGE_CLASS_FILE}\n  storageClassLargeBlock: ${STORAGE_CLASS_BLOCK}\n  topologyModel: ${TOPOLOGY_MODEL}\nEOF\n")),(0,o.yg)("p",null,"Run the following command to check that the ",(0,o.yg)("em",{parentName:"p"},"PHASE")," of your installation is\n",(0,o.yg)("strong",{parentName:"p"},"Updating"),":"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"oc get installations.orchestrator.aiops.ibm.com -n cp4aiops\n")),(0,o.yg)("p",null,"It takes around 60-90 minutes for the installation to complete (subject to the\nspeed with which images can be pulled). When installation is complete and\nsuccessful, the PHASE of your installation changes to ",(0,o.yg)("strong",{parentName:"p"},"Running"),"."),(0,o.yg)("admonition",{type:"tip"},(0,o.yg)("p",{parentName:"admonition"},"While you wait for the installation to finish, you can complete the following\nLab sections and come back to complete this section when you are done."),(0,o.yg)("ul",{parentName:"admonition"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"/labs/cloud-pak-aiops/install-lab/sizing-tool/"},"Custom Sizing Tool")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"/labs/cloud-pak-aiops/install-lab/storage-ha/"},"Storage, HA and FIPS Considerations")))),(0,o.yg)("p",null,"If your installation phase does not change to ",(0,o.yg)("strong",{parentName:"p"},"Running")," after 60-90 minutes,\nuse the following command to find out which components are not ready:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"oc get installation.orchestrator.aiops.ibm.com -o yaml | grep 'Not Ready'\n")),(0,o.yg)("p",null,"If interested, this install step is documented\n",(0,o.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cloud-pak-aiops/4.7.0?topic=installing-starter-installation#exp_instance"},(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("em",{parentName:"strong"},"here"))),"."),(0,o.yg)("h2",{id:"35-log-in-to-the-cloud-pak-for-aiops-console"},"3.5: Log in to the Cloud Pak for AIOps console"),(0,o.yg)("p",null,"Now you are going to locate the console URL and the admin login credentials from\nyour newly deployed instance of the Cloud Pak for AIOps."),(0,o.yg)("p",null,"Find the URL to access the console with the following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"echo -e \"https://$(oc get route -n cp4aiops cpd -o jsonpath='{.spec.host}')\\n\"\n")),(0,o.yg)("p",null,"Find the password for the ",(0,o.yg)("strong",{parentName:"p"},"cpadmin")," username by running the following command:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"oc -n cp4aiops get secret platform-auth-idp-credentials -o jsonpath='{.data.admin_password}' | base64 -d ; echo -e \"\\n\"\n")),(0,o.yg)("p",null,"Open a Firefox browser window and copy & paste the ",(0,o.yg)("strong",{parentName:"p"},"Cloud Pak for AIOps URL"),"\nthat you got in the previous step. Note that you will get one or more security\n",(0,o.yg)("strong",{parentName:"p"},"Warning: Potential Security Risk Ahead"),". This is because we have used\nself-signed certificates for this Lab. Just accept the risk and continue."),(0,o.yg)("p",null,"Make sure you can login as ",(0,o.yg)("strong",{parentName:"p"},"cpadmin"),", as shown below, using the password from\nthe previous command."),(0,o.yg)("admonition",{type:"tip"},(0,o.yg)("p",{parentName:"admonition"},"If interested, the cluster access step is documented\n",(0,o.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/cloud-paks/cloud-pak-aiops/4.7.0?topic=installing-starter-installation#exp_login"},(0,o.yg)("strong",{parentName:"a"},(0,o.yg)("em",{parentName:"strong"},"here"))),".")),(0,o.yg)("p",null,(0,o.yg)("img",{src:a(34108).A,width:"3094",height:"1328"})),(0,o.yg)("hr",null),(0,o.yg)("p",null,"After confirming you can login as ",(0,o.yg)("strong",{parentName:"p"},"cpadmin")," you can read through the labs\n",(0,o.yg)("strong",{parentName:"p"},"Custom Sizing Tool")," and ",(0,o.yg)("strong",{parentName:"p"},"Storage, HA and FIPS Considerations")," and then\ncomplete the final Lab section ",(0,o.yg)("strong",{parentName:"p"},"LDAP Integration")))}m.isMDXComponent=!0},32779:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/copy-helper-a256b821151453654139cc4eca560601.png"},34108:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/login-f2532691671431361189d1aa8b129adb.png"},84711:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/text-edit-instructions-11f34aabbfa3649440ee9d3901756c8c.png"}}]);