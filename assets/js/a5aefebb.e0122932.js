"use strict";(self.webpackChunkswat_hub=self.webpackChunkswat_hub||[]).push([[4980],{15680:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>m});var a=t(96540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),p=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(l.Provider,{value:n},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(t),d=r,m=u["".concat(l,".").concat(d)]||u[d]||g[d]||s;return t?a.createElement(m,o(o({ref:n},c),{},{components:t})):a.createElement(m,o({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,o=new Array(s);o[0]=d;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[u]="string"==typeof e?e:r,o[1]=i;for(var p=2;p<s;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},77071:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var a=t(58168),r=(t(96540),t(15680));const s={title:"3. Instana Server Installation",description:"How to install the Instana Server on a single server Self-Hosted configuration",sidebar_position:4},o="Instana Server Installation",i={unversionedId:"instana/server-and-agent-install-lab/server-installation/index",id:"instana/server-and-agent-install-lab/server-installation/index",title:"3. Instana Server Installation",description:"How to install the Instana Server on a single server Self-Hosted configuration",source:"@site/labs/instana/server-and-agent-install-lab/3-server-installation/index.mdx",sourceDirName:"instana/server-and-agent-install-lab/3-server-installation",slug:"/instana/server-and-agent-install-lab/server-installation/",permalink:"/waiops-tech-jam/labs/instana/server-and-agent-install-lab/server-installation/",draft:!1,editUrl:"https://github.com/IBM/waiops-tech-jam/tree/main/labs/instana/server-and-agent-install-lab/3-server-installation/index.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"3. Instana Server Installation",description:"How to install the Instana Server on a single server Self-Hosted configuration",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"2. Lab Environment",permalink:"/waiops-tech-jam/labs/instana/server-and-agent-install-lab/lab-environment/"},next:{title:"4. Agent Installation",permalink:"/waiops-tech-jam/labs/instana/server-and-agent-install-lab/agent-installation/"}},l={},p=[{value:"3.1: Introduction",id:"31-introduction",level:2},{value:"3.2: Prerequisites",id:"32-prerequisites",level:2},{value:"3.3. Preparing the server",id:"33-preparing-the-server",level:2},{value:"3.4. Installing Instana",id:"34-installing-instana",level:2},{value:"3.5: Launch the Instana User interface",id:"35-launch-the-instana-user-interface",level:2},{value:"3.6: Setting up SMTP",id:"36-setting-up-smtp",level:2},{value:"3.7: Turning on features",id:"37-turning-on-features",level:2},{value:"3.8: Upgrading the Instana server",id:"38-upgrading-the-instana-server",level:2},{value:"3.9: Summary",id:"39-summary",level:2}],c={toc:p},u="wrapper";function g(e){let{components:n,...s}=e;return(0,r.yg)(u,(0,a.A)({},c,s,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"instana-server-installation"},"Instana Server Installation"),(0,r.yg)("h2",{id:"31-introduction"},"3.1: Introduction"),(0,r.yg)("p",null,"Instana backend is available as SaaS (preferred option) or self hosted (aka\non-prem). For on-premises installations, Instana offers multiple containerized\noptions:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Self Hosted Standard Edition")," Installs both the Instana backend and\ndatastores on a single node K3s cluster."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Self Hosted Custom Edition")," Installs the backend Kubernetes Operator on a\nRedHat OpenShift or Kubernetes cluster. The datastores are not installed by\nthe operator, they require manual installation either locally on the same\ncluster or remotely."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Self Hosted Classic Edition")," Install both the Instana backend and the\ndatasotres on a single VM using Docker. Unlike the other options this\ndeployment does not support multi-tenancy.  Note: ",(0,r.yg)("strong",{parentName:"li"},"Classic Edition")," is not\na strategic deployment option.  Many recent enhancements such as synthetics,\nautomation catalog, and more are not available with Classic Edition.")),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},"On-premises (self-hosted) releases are delivered every 4 weeks. The release have\nodd numbers such as 225, 227, 229, etc. Historically upgrading, you may upgrade from N-1\nor N-2, but you couldn't skip more than one release. So, you can upgrade from 225\nto 229, but not to 231. Even numbered releases are for SaaS only. SaaS is\nupgraded every 2 weeks. With the most recent version of ",(0,r.yg)("strong",{parentName:"p"},"Self-Hosted Standard Edition"),",\nthe N-1/N-2 requirement doesn't exist.  When you upgrade Instana, you will be provided a\nlist of available releases that can be installed. However, we still recommend keeping your\nInstana version fairly current. For example, plan for upgrades every 2 months.")),(0,r.yg)("p",null,"For the installation of the Instana server, we'll be following the instructions\nfrom the Instana documentation for a ",(0,r.yg)("strong",{parentName:"p"},"Self-Hosted Standard Edition"),". The\ninstructions can be found\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=backend-installing-standard-edition"},"here"),"\nfor your reference, but you can follow the steps below. You will be performing\nan online installation during this Tech Jam, but Instana does support off-line\n(air-gapped) installs."),(0,r.yg)("p",null,"The Classic Edition and Standard Editions are Instana's smallest on-premises\ninstallation option. Production and larger deployments are installed into\nkubernetes for horizontal scale and resiliency. For this lab the installation of\nInstana will be completed on the VM named ",(0,r.yg)("strong",{parentName:"p"},"instana"),"."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"install instana architecture",src:t(85391).A,width:"991",height:"634"})),(0,r.yg)("h2",{id:"32-prerequisites"},"3.2: Prerequisites"),(0,r.yg)("p",null,"Instana requires a Linux server with cores, 64 Gig of RAM and few hundred Gig\nof disk space for a POC sized deployment. It also requires fast backend storage.\nFor environments with even a few hundred servers, you'll need 6000 IOPS or more.\nFor larger deployments, you'll need more capacity. Several different versions of\nLinux are supported. We have chosen Ubuntu 22.04 for this environment. "),(0,r.yg)("p",null,"Note: While 16 cores and 64 Gig of RAM is enough for a POC environment, if you enable\nsome of the optional feature flags, additional CPU and memory are required.  The additional\nCPU and memory requirements for each optional feature can be found\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-system-requirements#cpu-and-memory-requirements"},"here")),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"Normally, you would need to ensure that the virtual machine has the correct\nports opened in the firewall for the agent, UI, and EUM communications. We have\nalready done this work for you. For reference,\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-system-requirements#networking-requirements"},"here are the ports"),"\nthat need to be opened for the Instana Server for an on-prem deployment. The ports for SaaS are slightly different."),(0,r.yg)("p",{parentName:"admonition"},"In addition, online installations need access to a number of repositories that are documented here for reference:",(0,r.yg)("br",{parentName:"p"}),"\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=requirements-instana-self-hosted-deployments"},"here are the ports"))),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},"If you are unsure how to get access to the Bastion host (Guacamole) see\n",(0,r.yg)("a",{parentName:"p",href:"/waiops-tech-jam/labs/jam-in-a-box/#accessing-a-lab-environment"},"Accessing a Lab Environment"))),(0,r.yg)("p",null,"From the Bastion host (Guacamole), open a terminal window by selecting\n",(0,r.yg)("strong",{parentName:"p"},"Activities")," at the top left of the screen and then the terminal icon."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"open-terminal",src:t(82509).A,width:"4638",height:"2610"})),(0,r.yg)("p",null,"Use the terminal to login to the Instana host:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"ssh jammer@instana\n")),(0,r.yg)("p",null,"When prompted if you want to continue connecting, type: ",(0,r.yg)("inlineCode",{parentName:"p"},"yes")),(0,r.yg)("p",null,"Use sudo to become root."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo -i\n")),(0,r.yg)("p",null,"Prior to installing Instana, you must ensure there is no instance of Docker on\nthe machine you will use as it can\n",(0,r.yg)("a",{parentName:"p",href:"https://docs.k3s.io/known-issues#snap-docker"},"conflict with K3s"),"."),(0,r.yg)("admonition",{title:"Optional Tip",type:"tip"},(0,r.yg)("p",{parentName:"admonition"},"Due to the large number of requests that can be made to Docker Hub from the IBM\nnetwork rate limiting may occur when you try to install Instana. You can prevent\nthis by adding your own Docker Hub credentials."),(0,r.yg)("ol",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("a",{parentName:"li",href:"https://hub.docker.com/signup"},"Sign up")," to Docker Hub if you don't already\nhave an account."),(0,r.yg)("li",{parentName:"ol"},"From the Instana VM export the following environment variables:")),(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"export DOCKER_HUB_USERNAME=<your-docker-hub-username>\nexport DOCKER_HUB_PASSWORD=<your-docker-hub-password>\n")),(0,r.yg)("ol",{parentName:"admonition",start:3},(0,r.yg)("li",{parentName:"ol"},"Run the following commands to create the authentication file for Docker Hub\nin the K3s directory:")),(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"sudo mkdir -p /etc/rancher/k3s\nsudo tee /etc/rancher/k3s/registries.yaml <<EOF\nconfigs:\n  registry-1.docker.io:\n    auth:\n      username: ${DOCKER_HUB_USERNAME}\n      password: ${DOCKER_HUB_PASSWORD}\nEOF\n")),(0,r.yg)("ol",{parentName:"admonition",start:4},(0,r.yg)("li",{parentName:"ol"},"Confirm the new file is accurate by running:")),(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"cat /etc/rancher/k3s/registries.yaml\n"))),(0,r.yg)("h2",{id:"33-preparing-the-server"},"3.3. Preparing the server"),(0,r.yg)("p",null,"There are few tasks that need to be run to prepare the server for the\ninstallation."),(0,r.yg)("p",null,"Set the required kernel parameters by running the following commands:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"echo fs.inotify.max_user_instances=8192 >> /etc/sysctl.d/99-stanctl.conf && sudo sysctl -p /etc/sysctl.d/99-stanctl.conf\necho vm.swappiness=0 >> /etc/sysctl.d/99-stanctl.conf && sudo sysctl -p /etc/sysctl.d/99-stanctl.conf\nsysctl --load\necho never > /sys/kernel/mm/transparent_hugepage/enabled\n")),(0,r.yg)("p",null,"Set the firewall rules. In this lab we are in a restricted network so we don't\nneed to worry about the firewall rules. You can simply run the following:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"ufw disable\n")),(0,r.yg)("p",null,"For production you can\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-preparing#firewall-rules"},"reference the Firewall Rules documentation"),"\nfor the exact rules you need to set for your Operating System."),(0,r.yg)("p",null,"Prepare the mount volumes. We will be using a single disk with multiple\ndirectories in this lab. In a production environment you will likely want to\nprovision multiple disks to meet the\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-system-requirements#storage-requirements"},"IOPS requirements"),"\nof Instana. If you use more than one disk you can refer to the\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-preparing#prepare-the-additional-disks"},"documentaton for preparing additional disks"),"\nfor the Instana server."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"mkdir -p /mnt/instana/stanctl/data\nmkdir -p /mnt/instana/stanctl/metrics\nmkdir -p /mnt/instana/stanctl/analytics\nmkdir -p /mnt/instana/stanctl/objects\n")),(0,r.yg)("p",null,"You are now ready to start the installation of the Instana Server."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"34-installing-instana"},"3.4. Installing Instana"),(0,r.yg)("p",null,'Export the Download key as an environment variables.  In the code block below,\nreplace "<your-download-key',">",'" with the key provided for your lab environment.'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"export DOWNLOAD_KEY=<your-download-key>\n")),(0,r.yg)("p",null,"Run the following commands to install the Instana package. Review the output of\neach command using ",(0,r.yg)("em",{parentName:"p"},"cat")," to be sure the commands are successful before\nproceeding to the next step."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"echo 'deb [signed-by=/usr/share/keyrings/instana-archive-keyring.gpg] https://artifact-public.instana.io/artifactory/rel-debian-public-virtual generic main' > /etc/apt/sources.list.d/instana-product.list\ncat /etc/apt/sources.list.d/instana-product.list\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"cat << EOF > /etc/apt/auth.conf\nmachine artifact-public.instana.io\n  login _\n  password $DOWNLOAD_KEY\nEOF\ncat /etc/apt/auth.conf\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},'wget -O- --user=_ --password="$DOWNLOAD_KEY" https://artifact-public.instana.io/artifactory/api/security/keypair/public/repositories/rel-debian-public-virtual | gpg --dearmor > /usr/share/keyrings/instana-archive-keyring.gpg\ncat /usr/share/keyrings/instana-archive-keyring.gpg\n')),(0,r.yg)("p",null,"Update the package list and install the Instana ",(0,r.yg)("strong",{parentName:"p"},"stanctl")," command.\nThe ",(0,r.yg)("strong",{parentName:"p"},"stanctl")," is used to install Instana and perform other administrative tasks."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"apt update -y\napt install -y stanctl\n")),(0,r.yg)("p",null,"Hold the stanctl package to prevent it from being upgraded unintentionally."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"apt-mark hold stanctl\n")),(0,r.yg)("p",null,"Install Instana"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"We are installing Instana in ",(0,r.yg)("strong",{parentName:"p"},"demo")," mode.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"DNS has already been configured in this environment for the Instana vm, it can\nbe reached at ",(0,r.yg)("em",{parentName:"p"},"instana.techzone.lan"),". Further details on\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-preparing#dns-settings"},"required DNS entries can be found here"),".")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Internally, Instana has tenants, which are merely a logical construct. Each\ntenant in turn has at least one or multiple tenant units. There are\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=cluster-preparing#tenant-and-unit-names"},"restrictions to the names that can be chosen"),".\nIn this case the tenant is ",(0,r.yg)("strong",{parentName:"p"},"ibm")," and the unit is ",(0,r.yg)("strong",{parentName:"p"},"unit0"),".")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"The default administrator password for the ",(0,r.yg)("strong",{parentName:"p"},"admin.instana.local")," user is\n",(0,r.yg)("strong",{parentName:"p"},"Passw0rd"),".")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"We are setting the volumes to the directories we created earlier.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"We are skipping preflight checks as the environment does not have the storage\nrequired to meet the minimum requirements, it is satisfactory for a small demo\ninstance though."),(0,r.yg)("p",{parentName:"li"},"The installation below, uses a set of optional installation flags.  If you are interested\nin seeing all of the available installation flags, you can type:"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"stanctl up --help\n")))),(0,r.yg)("p",null,"Now, execute the installation command by copying and pasting the text from below."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},'stanctl up \\\n--install-type="demo" \\\n--timeout="60m0s" \\\n--core-base-domain="instana.techzone.lan" \\\n--download-key=$DOWNLOAD_KEY \\\n--sales-key=$SALES_KEY \\\n--unit-tenant-name="ibm" \\\n--unit-unit-name="unit0" \\\n--unit-initial-admin-password="Passw0rd" \\\n--volume-analytics="/mnt/instana/stanctl/analytics" \\\n--volume-metrics="/mnt/instana/stanctl/metrics" \\\n--volume-objects="/mnt/instana/stanctl/objects" \\\n--volume-data="/mnt/instana/stanctl/data" \\\n--skip-preflight-check\n')),(0,r.yg)("p",null,"The instana license is automatically applied during the installation process.\nYou can view it by running the following command:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"stanctl license info\n")),(0,r.yg)("p",null,"The installation will take approximately 20 minutes, but depends on the performance of your server."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"35-launch-the-instana-user-interface"},"3.5: Launch the Instana User interface"),(0,r.yg)("p",null,"Once the installation finished and you are prompted with the message...."),(0,r.yg)("p",null,"You can open a browser and login to the Instana user interface."),(0,r.yg)("p",null,"Open a firefox browser and select the ",(0,r.yg)("strong",{parentName:"p"},"Instana")," bookmark."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"open firefox",src:t(18126).A,width:"3930",height:"2220"})),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"You can safely ignore the warning about the certificate being untrusted."),(0,r.yg)("p",{parentName:"admonition"},(0,r.yg)("img",{alt:"untrusted-cert-advance",src:t(29690).A,width:"2186",height:"1460"}))),(0,r.yg)("p",null,"When prompted, enter the username and password that you updated earlier."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Username: ",(0,r.yg)("strong",{parentName:"li"},(0,r.yg)("a",{parentName:"strong",href:"mailto:admin@instana.local"},"admin@instana.local"))),(0,r.yg)("li",{parentName:"ul"},"Password: ",(0,r.yg)("strong",{parentName:"li"},"Passw0rd"))),(0,r.yg)("p",null,(0,r.yg)("img",{src:t(69711).A,width:"498",height:"463"})),(0,r.yg)("p",null,"You will be taken to an Initial Screen where you can install the instana agents\nor navigate to the main product UI. We will install an Instana Agent in the\nupcoming section of the lab."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"36-setting-up-smtp"},"3.6: Setting up SMTP"),(0,r.yg)("admonition",{title:"Do not perform these steps",type:"warning"},(0,r.yg)("p",{parentName:"admonition"},"You should not perform any steps in this section, it is for information only.")),(0,r.yg)("p",null,"You can configure SMTP settings when installing the cluster however as we have\nalready installed the Instana server, we can now make modifications to the\nbackend configuration using the stanctl tool."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},'stanctl backend apply \\\n  --core-smtp-from="server@instana.com" \\\n  --core-smtp-host="localhost" \\\n  --core-smtp-password="Passw0rd" \\\n  --core-smtp-port=25 \\\n  --core-smtp-start-tls=false \\\n  --core-smtp-use-ssl=false\n')),(0,r.yg)("p",null,"You should see output similar to the below:"),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"backend-apply",src:t(57978).A,width:"1790",height:"624"})),(0,r.yg)("p",null,"If you are interested in all of the parameters that can get specified using the\n",(0,r.yg)("strong",{parentName:"p"},"stanctl backend apply")," command, type:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"stanctl backend apply --help\n")),(0,r.yg)("h2",{id:"37-turning-on-features"},"3.7: Turning on features"),(0,r.yg)("admonition",{title:"Do not perform these steps",type:"warning"},(0,r.yg)("p",{parentName:"admonition"},"You should not perform any steps in this section, it is for information only.")),(0,r.yg)("p",null,"There are optional configurations that you will likely want to make to your\ninstallation of Instana."),(0,r.yg)("p",null,"These options are made available via optional 'feature flags'. For features such\nas VMware/vSphere monitoring, Power HMC monitoring, and zHMC monitoring which\nare disabled by default."),(0,r.yg)("p",null,"As an example to enable VMware/vSphere monitoring, you would run the following\ncommand:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"stanctl backend apply --core-feature-flags feature.vsphere.enabled\n")),(0,r.yg)("p",null,"You can view a\n",(0,r.yg)("a",{parentName:"p",href:"https://www.ibm.com/docs/en/instana-observability/current?topic=configuring-enabling-optional-features"},"full list of available feature flags here.")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"38-upgrading-the-instana-server"},"3.8: Upgrading the Instana server"),(0,r.yg)("admonition",{title:"Do not perform these steps",type:"warning"},(0,r.yg)("p",{parentName:"admonition"},"You should not perform any steps in this section, it is for information only.")),(0,r.yg)("p",null,"Upgrades are made simple with the ",(0,r.yg)("strong",{parentName:"p"},"stanctl")," tool. The process for an upgrade\nis to first upgrade ",(0,r.yg)("strong",{parentName:"p"},"stanctl")," and then upgrade the Instana backend."),(0,r.yg)("p",null,"Upgrading the ",(0,r.yg)("strong",{parentName:"p"},"stanctl")," tool is different depending on the Operating System\nyou are using. As an example for Ubuntu you would run the following commands:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"# Unhold the stanctl package if it is held\nsudo apt-mark unhold stanctl\n\napt update -y\napt install -y stanctl\n\n# Hold the stanctl package again to prevent it from being upgraded unintentionally.\napt-mark hold stanctl\n")),(0,r.yg)("p",null,"Then upgrade the backend:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"stanctl up\n")),(0,r.yg)("p",null,"The command will list the available updates. Use the arrows on your keyboard to move up and download\nto select the version that you want to install.  For example, move the arror to ",(0,r.yg)("strong",{parentName:"p"},"Install Instana version: 3.287.582-0"),"\nand press ",(0,r.yg)("strong",{parentName:"p"},"Enter")," to upgrade the backend."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"39-summary"},"3.9: Summary"),(0,r.yg)("p",null,"In this portion of the lab, you have learned how to install the ",(0,r.yg)("strong",{parentName:"p"},"Self-Hosted\nStandard Edition")," Instana server. For a POC, we recommend either SaaS or the single server\nself-hosted docker installation of the Instana server. For production\ndeployments, customers will want the ",(0,r.yg)("strong",{parentName:"p"},"multi-node Standard Edition")," or ",(0,r.yg)("strong",{parentName:"p"},"Self-Hosted Custom Edition"),".\n",(0,r.yg)("strong",{parentName:"p"},"Multi-Node Standard Edition")," will increase scalability.  ",(0,r.yg)("strong",{parentName:"p"},"Self-Hosted Custom Edition")," provides more\nflexibility in terms of kubernetes/OpenShift environments and dramatically improves scalability as\nwell as providing built-in resiliency."),(0,r.yg)("p",null,"You have also learned how to configure the SMTP settings and how to enable\nfeature flags."),(0,r.yg)("p",null,"Finally, you learned how to upgrade a docker based self-hosted Instana server."),(0,r.yg)("p",null,"You are now ready to learn how to install and configure an Instana Agent."),(0,r.yg)("hr",null))}g.isMDXComponent=!0},85391:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/architecture-bcc877318803e8874b3b0488160741bd.png"},69711:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/login-4bfbf5fd724af14ce335dc516c1e7736.png"},18126:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/open-firefox-0f398188b48b31ca6f63f15688308eae.png"},82509:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/open-terminal-ed5ca7786aa48c0c0ab234ad7de81fed.png"},57978:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/smtp-backend-apply-12eea3bf24c5b3290b0f119a2b61bcd2.png"},29690:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/untrusted-cert-advance-954725e84d2839590377564af68c9d4c.png"}}]);