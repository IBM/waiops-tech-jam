"use strict";(self.webpackChunkswat_hub=self.webpackChunkswat_hub||[]).push([[7865],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=o.createContext({}),l=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=l(e.components);return o.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=l(n),m=a,d=h["".concat(p,".").concat(m)]||h[m]||u[m]||i;return n?o.createElement(d,r(r({ref:t},c),{},{components:n})):o.createElement(d,r({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=h;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<i;l++)r[l]=n[l];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},63676:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var o=n(87462),a=(n(67294),n(3905));const i={title:"4. Install the Robot Shop Application",description:"Install the Robot Shop Application and Setup Website Monitoring",sidebar_position:4},r=void 0,s={unversionedId:"instana/robot-shop-installation/index",id:"instana/robot-shop-installation/index",title:"4. Install the Robot Shop Application",description:"Install the Robot Shop Application and Setup Website Monitoring",source:"@site/labs/instana/4-robot-shop-installation/index.mdx",sourceDirName:"instana/4-robot-shop-installation",slug:"/instana/robot-shop-installation/",permalink:"/waiops-tech-jam/labs/instana/robot-shop-installation/",draft:!1,editUrl:"https://github.com/IBM/waiops-tech-jam/tree/main/labs/instana/4-robot-shop-installation/index.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"4. Install the Robot Shop Application",description:"Install the Robot Shop Application and Setup Website Monitoring",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"3. Agent Installation",permalink:"/waiops-tech-jam/labs/instana/agent-installation/"},next:{title:"5. Monitoring IBM Middleware",permalink:"/waiops-tech-jam/labs/instana/ibm-middleware/"}},p={},l=[{value:"4.1: Introduction",id:"41-introduction",level:2},{value:"4.2: Create the Website in Instana",id:"42-create-the-website-in-instana",level:2},{value:"4.3: Install Robot Shop",id:"43-install-robot-shop",level:2},{value:"4.4: Setup Automated Load",id:"44-setup-automated-load",level:2},{value:"4.5: Summary",id:"45-summary",level:2}],c={toc:l};function u(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,o.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"41-introduction"},"4.1: Introduction"),(0,a.kt)("p",null,"In this section of the lab, you will learn how to install the Robot Shop\napplication."),(0,a.kt)("p",null,"Robot Shop is pre-configured with changes needed to enable Instana monitoring.\nSome technologies such as java don't require any configuration, but others\nrequire configuration changes so the application can be monitored."),(0,a.kt)("p",null,"During the install, you will also specify the required information that is\nnecessary for Instana to monitor the End User Experience (EUM) / Real User\nMonitoring (RUM) data."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"42-create-the-website-in-instana"},"4.2: Create the Website in Instana"),(0,a.kt)("p",null,"If you want to capture EUM/RUM data within Instana, you must first create a\nwebsite within the GUI (or via API). Open the Instana GUI within your browser."),(0,a.kt)("p",null,"On left side navigation, select ",(0,a.kt)("strong",{parentName:"p"},"Websites & Mobile Apps"),". You'll see a dialog\nwhere you can enter a Website Name. Enter ",(0,a.kt)("strong",{parentName:"p"},"Robot Shop")," as the website name.\nThen, click the ",(0,a.kt)("strong",{parentName:"p"},"Add Website")," button."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(81043).Z,width:"1421",height:"422"})),(0,a.kt)("p",null,"A dialog containing ",(0,a.kt)("strong",{parentName:"p"},"javascript")," will open. In a more typical application, you\nwould follow the instructions on the dialog. You copy/paste the ",(0,a.kt)("strong",{parentName:"p"},"javascript"),"\ninto the HTML pages."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(76178).Z,width:"1113",height:"431"})),(0,a.kt)("p",null,"Robot Shop has already done some of the work for you. When you deploy the\napplication, you can pass parameters into the helm install. There are two\nparameters within the ",(0,a.kt)("strong",{parentName:"p"},"javascript")," that we will need to copy and use when we\ninstall the Robot Shop application. You will need the ",(0,a.kt)("strong",{parentName:"p"},"key")," and the\n",(0,a.kt)("strong",{parentName:"p"},"reportingURL"),". Either copy those parameters now or leave this dialog open\nthat you can retrieve it later."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(38983).Z,width:"1024",height:"429"})),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"43-install-robot-shop"},"4.3: Install Robot Shop"),(0,a.kt)("p",null,"We will install Robot Shop on the Single Node OpenShift ",(0,a.kt)("strong",{parentName:"p"},"Apps")," cluster."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"install-robot-shop-architecture",src:n(44495).Z,width:"991",height:"781"})),(0,a.kt)("p",null,"The full installation instructions for ",(0,a.kt)("strong",{parentName:"p"},"Robot Shop")," can be found\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/instana/robot-shop"},"here"),". You'll notice that there are\ninstructions for installing ",(0,a.kt)("strong",{parentName:"p"},"Robot Shop")," into a number of different\nenvironments including docker, kubernetes, and OpenShift. This lab uses an\nOpenShift environment, so we'll be following those steps."),(0,a.kt)("p",null,"We have documented the steps below, so there is no need to refer to the GitHub\ninstructions."),(0,a.kt)("admonition",{title:"Important",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"The following should be run from the bastion host (",(0,a.kt)("strong",{parentName:"p"},"admin@bastion-gym-lan"),").\nCheck to make sure you are in the right place by running the following:"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"cd ~ && oc cluster-info --kubeconfig kubeconfig-apps\n")),(0,a.kt)("p",{parentName:"admonition"},"You should see the following output, specifically the url\n",(0,a.kt)("inlineCode",{parentName:"p"},"https:api.sno.techzone.lan:6443"),". If you don't try opening a new tab or\nterminal window and trying again."),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("img",{alt:"check-cluster",src:n(367).Z,width:"1786",height:"102"}))),(0,a.kt)("p",null,"Clone the GitHub repository by typing:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"cd ~ && git clone https://github.com/instana/robot-shop.git\n")),(0,a.kt)("p",null,"change directory into the ",(0,a.kt)("strong",{parentName:"p"},"robot-shop/K8s")," directory"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"cd robot-shop/K8s\n")),(0,a.kt)("p",null,"Create an OpenShift ",(0,a.kt)("strong",{parentName:"p"},"project (workspace)")," for the ",(0,a.kt)("strong",{parentName:"p"},"Robot Shop")," application\nby issuing the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"oc adm new-project robot-shop --kubeconfig ~/kubeconfig-apps\n")),(0,a.kt)("p",null,"Next, setup ",(0,a.kt)("strong",{parentName:"p"},"privileges")," within the cluster for the ",(0,a.kt)("strong",{parentName:"p"},"Robot Shop")," application\nby issuing the following two commands:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"oc adm policy add-scc-to-user anyuid -z default -n robot-shop --kubeconfig ~/kubeconfig-apps\noc adm policy add-scc-to-user privileged -z default -n robot-shop --kubeconfig ~/kubeconfig-apps\n")),(0,a.kt)("p",null,"Robot Shop requires a persistent volume for Redis. Create a PV and PVC for use\nby redis:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"oc create -f ~/robot-shop-pv.yaml --kubeconfig ~/kubeconfig-apps\n")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"pv pvc created",src:n(79684).Z,width:"2030",height:"134"})),(0,a.kt)("p",null,"Install the ",(0,a.kt)("strong",{parentName:"p"},"Robot Shop")," by issuing the following helm command:"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"<your-instana-reporting-url",">")," is the ",(0,a.kt)("em",{parentName:"li"},"reportingURL")," you obtained in\nsection 4.2. ",(0,a.kt)("strong",{parentName:"li"},"Do not include the trailing slash ( / ) following 2999."),"\nExample: ",(0,a.kt)("inlineCode",{parentName:"li"},"http://192.168.252.60:2999"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"<your-instana-key",">")," is the ",(0,a.kt)("strong",{parentName:"li"},"key")," you obtained in section 4.2 from the\nInstana user interface. Example: ",(0,a.kt)("inlineCode",{parentName:"li"},"m-IMxZYFQyW_n7Xo0VRjrw"),"."))),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Set your reporting URL:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'export REPORTING_URL="<your-instana-reporting-url>"\n'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Set your key value:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'export EUM_KEY="<your-instana-key>"\n'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Deploy Robot Shop:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"helm install robot-shop \\\n--set openshift=true \\\n--set eum.key=${EUM_KEY} \\\n--set eum.url=${REPORTING_URL} \\\n-n robot-shop helm \\\n--kubeconfig ~/kubeconfig-apps\n")))),(0,a.kt)("p",null,"If successful, you should see the results similar to what's shown below."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(3339).Z,width:"1436",height:"524"})),(0,a.kt)("p",null,"Check whether the Robot Shop pods are running by typing:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"oc get pods -n robot-shop --kubeconfig ~/kubeconfig-apps\n")),(0,a.kt)("p",null,"If the install was successful, you'll see the following pods running."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"If some of the pods (for example ",(0,a.kt)("em",{parentName:"p"},"ratings")," or ",(0,a.kt)("em",{parentName:"p"},"shipping"),") show ",(0,a.kt)("strong",{parentName:"p"},"0/1")," instead\nof ",(0,a.kt)("strong",{parentName:"p"},"1/1")," in the READY column or the pods aren't in a ",(0,a.kt)("strong",{parentName:"p"},"Running")," state, wait a\ncouple more minutes and issue the ",(0,a.kt)("strong",{parentName:"p"},"oc get pods")," command again. It can ",(0,a.kt)("strong",{parentName:"p"},"take\nas much as 15 minutes")," before all of the pods are running. If you don't want to\nwait, you can proceed to the next steps.")),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(47537).Z,width:"1858",height:"614"})),(0,a.kt)("p",null,"Finally, if you want to bring up the Robot Shop user interface, you need to\nexpose the service as a route. Issue the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"oc expose service web -n robot-shop --kubeconfig ~/kubeconfig-apps\n")),(0,a.kt)("p",null,"You can issue the ",(0,a.kt)("strong",{parentName:"p"},"oc get route")," command to get the route to the application.\nThis route has already been saved as a bookmark called ",(0,a.kt)("em",{parentName:"p"},"Robot Shop"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"oc get route -n robot-shop --kubeconfig ~/kubeconfig-apps\n")),(0,a.kt)("p",null,"The result should look similar to: ",(0,a.kt)("strong",{parentName:"p"},"web-robot-shop.<cluster domain",">")),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(8653).Z,width:"2022",height:"282"})),(0,a.kt)("p",null,"Open a new Firefox tab and select the ",(0,a.kt)("strong",{parentName:"p"},"Stan's Robot Shop")," bookmark, or if\npasting the route into firefox make sure you specify http instead of https. You\nwill see the Robot Shop application."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(32874).Z,width:"2304",height:"1322"})),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"44-setup-automated-load"},"4.4: Setup Automated Load"),(0,a.kt)("p",null,"Now that the application is running, you will want to generate some traffic\nagainst the Robot-Shop application."),(0,a.kt)("p",null,"Issue the following command to install the load generation pod."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'cat <<EOF | oc create --kubeconfig ~/kubeconfig-apps -f -\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: rs-website-load\n  namespace: robot-shop\n  labels:\n    service: rs-website-load\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      service: rs-website-load\n  template:\n    metadata:\n      labels:\n        service: rs-website-load\n    spec:\n      containers:\n      - name: rs-website-load\n        env:\n          - name: HOST\n            value: "http://web:8080/"\n        image: brightzheng100/rs-website-load:latest\nEOF\n')),(0,a.kt)("p",null,"Run the ",(0,a.kt)("strong",{parentName:"p"},"oc get pods")," command."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"oc get pods -n robot-shop --kubeconfig ~/kubeconfig-apps\n")),(0,a.kt)("p",null,"You should now see an additional pod named ",(0,a.kt)("strong",{parentName:"p"},"rs-website-load-","*")," running within\nthe project."),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"45-summary"},"4.5: Summary"),(0,a.kt)("p",null,"In this section, you learned how to install an application that includes\nmonitoring and configure it for Website EUM/RUM monitoring."),(0,a.kt)("p",null,"Now, proceed to section 5 where you will configure the monitoring for IBM MQ and\nIBM App Connect Enterprise (ACE)."),(0,a.kt)("hr",null))}u.isMDXComponent=!0},81043:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/addWebsite-7c91b25a07286ee61da4f44f60fc32c3.png"},44495:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/architecture-robot-shop-63187321b7814c74c9a9cedda1445406.png"},367:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/check-cluster-2a5c30fbc00ebbfb7106b0179278ff95.png"},8653:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/expose-robot-shop-00ddf6061c91e5bb57803b2796896e86.png"},79684:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/pv-pvc-created-08156aa128c08b7ea80c0f2cebff0ee2.png"},3339:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/robot-shop-helm-install-aaabe3225b8504458763d3a213a6232d.png"},47537:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/robot-shop-success-pods-92dbc144c53bab1f02b930cf4446a5ec.png"},32874:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/stans-robot-shop-f0c1581c7f199458ba5523818ca5cc12.png"},38983:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/websiteConfig-c96443c0fdbfb19415ce72a916ca4802.png"},76178:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/websiteConfig2-da13680b915cdeac3284d9885cba48e1.png"}}]);