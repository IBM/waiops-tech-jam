"use strict";(self.webpackChunkswat_hub=self.webpackChunkswat_hub||[]).push([[7990],{15680:(e,t,n)=>{n.d(t,{xA:()=>s,yg:()=>y});var o=n(96540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),p=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=p(e.components);return o.createElement(c.Provider,{value:t},e.children)},m="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=p(n),u=a,y=m["".concat(c,".").concat(u)]||m[u]||g[u]||i;return n?o.createElement(y,r(r({ref:t},s),{},{components:n})):o.createElement(y,r({ref:t},s))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[m]="string"==typeof e?e:a,r[1]=l;for(var p=2;p<i;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},26898:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>g,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var o=n(58168),a=(n(96540),n(15680));const i={title:"4. Set up the Netcool/Impact Connector",description:"Set up the Netcool/Impact Connector in AIOps",sidebar_position:4},r=void 0,l={unversionedId:"cloud-pak-aiops/migration-from-netcool/impact-connector/index",id:"cloud-pak-aiops/migration-from-netcool/impact-connector/index",title:"4. Set up the Netcool/Impact Connector",description:"Set up the Netcool/Impact Connector in AIOps",source:"@site/labs/cloud-pak-aiops/migration-from-netcool/4-impact-connector/index.mdx",sourceDirName:"cloud-pak-aiops/migration-from-netcool/4-impact-connector",slug:"/cloud-pak-aiops/migration-from-netcool/impact-connector/",permalink:"/waiops-tech-jam/labs/cloud-pak-aiops/migration-from-netcool/impact-connector/",draft:!1,editUrl:"https://github.com/IBM/waiops-tech-jam/tree/main/labs/cloud-pak-aiops/migration-from-netcool/4-impact-connector/index.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"4. Set up the Netcool/Impact Connector",description:"Set up the Netcool/Impact Connector in AIOps",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"3. Set up the Netcool Connector",permalink:"/waiops-tech-jam/labs/cloud-pak-aiops/migration-from-netcool/netcool-connector/"},next:{title:"5. Create an event housekeeping automation",permalink:"/waiops-tech-jam/labs/cloud-pak-aiops/migration-from-netcool/housekeeping/"}},c={},p=[{value:"3.1: Overview",id:"31-overview",level:2},{value:"3.2 Preparation tasks",id:"32-preparation-tasks",level:2},{value:"Retrieve Netcool/Impact certificates",id:"retrieve-netcoolimpact-certificates",level:3},{value:"Set up the Zen API key",id:"set-up-the-zen-api-key",level:3},{value:"3.3 Create a Netcool/Impact Connector instance",id:"33-create-a-netcoolimpact-connector-instance",level:2},{value:"3.4 Complete the integration in Netcool/Impact",id:"34-complete-the-integration-in-netcoolimpact",level:2}],s={toc:p},m="wrapper";function g(e){let{components:t,...n}=e;return(0,a.yg)(m,(0,o.A)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h2",{id:"31-overview"},"3.1: Overview"),(0,a.yg)("p",null,"In this Lab, you will create an instance of the Netcool/Impact Connector to connect to an existing Netcool/Impact server. Most, if not all, AIOps deployments will include Netcool/Impact to enable automation and integration with third-party systems. Creating and configuring the Netcool/Impact Connector therefore is usually going to be a key part of any AIOps set-up."),(0,a.yg)("h2",{id:"32-preparation-tasks"},"3.2 Preparation tasks"),(0,a.yg)("h3",{id:"retrieve-netcoolimpact-certificates"},"Retrieve Netcool/Impact certificates"),(0,a.yg)("p",null,"In this section, you will retrieve the two certificates used by Netcool/Impact for its server and GUI server processes. These are needed to complete the Netcool/Impact Connector instance."),(0,a.yg)("p",null,"Open a command prompt and issue the following commands. Save the resulting certificates to a text editor."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"echo '' | openssl s_client -connect netcoolvm.ocp.techzone.lan:16311  -showcerts 2>&1  | sed -n -e '/BEGIN\\ CERTIFICATE/,/END\\ CERTIFICATE/ p'\necho '' | openssl s_client -connect netcoolvm.ocp.techzone.lan:9081  -showcerts 2>&1  | sed -n -e '/BEGIN\\ CERTIFICATE/,/END\\ CERTIFICATE/ p'\n")),(0,a.yg)("h3",{id:"set-up-the-zen-api-key"},"Set up the Zen API key"),(0,a.yg)("p",null,"Use the following steps to create an instance of the Netcool/Impact Connector:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Log in to the AIOps console"),(0,a.yg)("li",{parentName:"ul"},"Click on your user icon in the top-right corner of the screen and select ",(0,a.yg)("strong",{parentName:"li"},"Profile and settings")),(0,a.yg)("li",{parentName:"ul"},"Click on ",(0,a.yg)("strong",{parentName:"li"},"API key")," in the top-right corner of the screen and select ",(0,a.yg)("strong",{parentName:"li"},"Generate new key")),(0,a.yg)("li",{parentName:"ul"},"Copy and save the API key to a safe place"),(0,a.yg)("li",{parentName:"ul"},"Substitute your copied API key into the following script:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'ZENAPIKEY=$(echo "cpadmin:<your-API-key>" | base64 -w 0)\necho ${ZENAPIKEY}\n')),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Test out your ",(0,a.yg)("inlineCode",{parentName:"li"},"ZENAPIKEY")," using the following:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'CPD_ROUTE=`oc get route -n cp4aiops cpd -o jsonpath=\'{.spec.host}\'`\nTENANT_ID=cfd95b7e-3bc7-4006-a4a8-a73a79c71255\ncurl -kv -H "Authorization: ZenApiKey ${ZENAPIKEY}" -H "x-tenant-id: ${TENANT_ID}"  "https://${CPD_ROUTE}/aiops/api/issue-resolution/v1/alerts/"\n')),(0,a.yg)("p",null,"If you get a JSON payload response containing events, it means your ",(0,a.yg)("inlineCode",{parentName:"p"},"ZENAPIKEY")," works."),(0,a.yg)("p",null,"Save the value of ",(0,a.yg)("inlineCode",{parentName:"p"},"ZENAPIKEY")," to a text editor."),(0,a.yg)("h2",{id:"33-create-a-netcoolimpact-connector-instance"},"3.3 Create a Netcool/Impact Connector instance"),(0,a.yg)("p",null,"Use the following steps to create an instance of the Netcool/Impact Connector:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Log in to the AIOps console and select ",(0,a.yg)("strong",{parentName:"li"},"Integrations")," from the main menu"),(0,a.yg)("li",{parentName:"ul"},"Click the ",(0,a.yg)("strong",{parentName:"li"},"Add integration")," button to add a new integration"),(0,a.yg)("li",{parentName:"ul"},"Type ",(0,a.yg)("strong",{parentName:"li"},"Netcool")," into the Search bar"),(0,a.yg)("li",{parentName:"ul"},"Choose ",(0,a.yg)("strong",{parentName:"li"},"IBM Tivoli Netcool Impact")," and click ",(0,a.yg)("strong",{parentName:"li"},"Get started")," to create a new instance"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Name"),": the label you want to give this integration instance"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"GUI Server URLs of Impact endpoint"),": enter: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://netcoolvm.ocp.techzone.lan:16311")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Backend Server URLs of Impact endpoint"),": enter: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://netcoolvm.ocp.techzone.lan:9081")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"User ID"),": enter: ",(0,a.yg)("inlineCode",{parentName:"li"},"impactadmin")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Password"),": enter: ",(0,a.yg)("inlineCode",{parentName:"li"},"netcool")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Impact certificates"),": paste in the certificates you retrieved earlier"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Deployment options"),": leave this set to ",(0,a.yg)("strong",{parentName:"li"},"Local")),(0,a.yg)("li",{parentName:"ul"},"Click on the ",(0,a.yg)("strong",{parentName:"li"},"Done")," button to complete the integration")),(0,a.yg)("p",null,"It will now take a few minutes for AIOps to create the new integration. Refresh the ",(0,a.yg)("strong",{parentName:"p"},"Integrations")," page and ensure the ",(0,a.yg)("strong",{parentName:"p"},"Integration status")," eventually shows with a green tick."),(0,a.yg)("h2",{id:"34-complete-the-integration-in-netcoolimpact"},"3.4 Complete the integration in Netcool/Impact"),(0,a.yg)("p",null,"As part of the Netcool/Impact Connector instance creation, AIOps creates a number of assets within Netcool/Impact, including some policies, and a RESTful API Data Source Adaptor (DSA) instance. The final step in the setup of the Netcool/Impact Connector integration is to configure the Data Source Adaptor in Netcool/Impact to be able to connect back to AIOps via its API. Use the following steps to complete this last task."),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Navigate to the Netcool/Impact GUI: ",(0,a.yg)("inlineCode",{parentName:"li"},"https://netcoolvm:16311/ibm/console")),(0,a.yg)("li",{parentName:"ul"},"Log in to Netcool/Impact as the user ",(0,a.yg)("inlineCode",{parentName:"li"},"impactadmin")," and password ",(0,a.yg)("inlineCode",{parentName:"li"},"netcool")),(0,a.yg)("li",{parentName:"ul"},"Click on ",(0,a.yg)("strong",{parentName:"li"},"Data Model")),(0,a.yg)("li",{parentName:"ul"},"Identify the RESTful API DSA instance created by AIOps by its name starting with ",(0,a.yg)("inlineCode",{parentName:"li"},"AIOps-")),(0,a.yg)("li",{parentName:"ul"},"Double click the AIOps DSA instance to edit it"),(0,a.yg)("li",{parentName:"ul"},"Set ",(0,a.yg)("strong",{parentName:"li"},"Host Name")," to the AIOps host name: ",(0,a.yg)("inlineCode",{parentName:"li"},"cpd-cp4aiops.apps.ocp.techzone.lan")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Use HTTPS"),": checked"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Disable SSL Verification"),": checked"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Reuse Connection"),": checked"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Cache Response"),": unchecked"),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Authentication method to use"),": select ",(0,a.yg)("inlineCode",{parentName:"li"},"No Authentication")),(0,a.yg)("li",{parentName:"ul"},"Scroll down to: ",(0,a.yg)("strong",{parentName:"li"},"Protected Request Headers")),(0,a.yg)("li",{parentName:"ul"},"Create a new header with the following details:",(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Header Name"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"Authorization")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("strong",{parentName:"li"},"Header Value"),": ",(0,a.yg)("inlineCode",{parentName:"li"},"ZenApiKey <your-ZENAPIKEY-created-earlier>")))),(0,a.yg)("li",{parentName:"ul"},"Click ",(0,a.yg)("strong",{parentName:"li"},"OK")," to save your new header"),(0,a.yg)("li",{parentName:"ul"},"Click on the Save button with the small disk icon at the top of the page to save your changes"),(0,a.yg)("li",{parentName:"ul"},"Click on the X to close the DSA instance"),(0,a.yg)("li",{parentName:"ul"},"Right click on the DSA instance and select ",(0,a.yg)("strong",{parentName:"li"},"Test Connection")," and verify it responds with ",(0,a.yg)("strong",{parentName:"li"},"Connection OK"))),(0,a.yg)("admonition",{type:"note"},(0,a.yg)("p",{parentName:"admonition"},"The header value should be the exact string ",(0,a.yg)("inlineCode",{parentName:"p"},"ZenApiKey"),", followed by a space character, followed by the ",(0,a.yg)("inlineCode",{parentName:"p"},"ZENAPIKEY")," output you saved to a text editor earlier. If your DSA connection test fails, check each of the steps above to ensure they are correct.")))}g.isMDXComponent=!0}}]);