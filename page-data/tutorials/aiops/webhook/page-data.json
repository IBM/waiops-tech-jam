{"componentChunkName":"component---src-pages-tutorials-aiops-webhook-index-mdx","path":"/tutorials/aiops/webhook/","result":{"pageContext":{"frontmatter":{"title":"Set up a webhook integration","description":"Set up webhook integrations in Event Manager"},"relativePagePath":"/tutorials/aiops/webhook/index.mdx","titleType":"page","MdxNode":{"id":"479e5e55-1318-59b2-a8c4-c1ee2a3e68b3","children":[],"parent":"3cf3107e-c426-548e-8ae1-e8ae1664a9d3","internal":{"content":"---\ntitle: Set up a webhook integration\ndescription: Set up webhook integrations in Event Manager\n---\n<AnchorLinks>\n  <AnchorLink>4-1: Overview</AnchorLink>\n  <AnchorLink>4-2: Create a new generic webhook integration with SevOne</AnchorLink>\n</AnchorLinks>\n\n\n## 4-1: Overview\n\nThis module focuses on the set up of a webhook integration, so that events can be received from a cloud event source. We will configure a generic webhook integration with SevOne as an example.\n\nBy the end of this module, you will have configured a webhook to be able to receive events from a SevOne system.\n\nA full list of the incoming event integrations are documented here: https://www.ibm.com/docs/en/noi/1.6.5?topic=systems-configuring-incoming-integrations\n\n## 4-2: Create a new generic webhook integration with SevOne\n\nWhile the event integrations provide a large number of off-the-shelf integrations, it is typical that a user will have an event source for which there is no corresponding integration. Like everything with Netcool, where there is not an off-the-shelf option, there is always the generic option of integration as a backstop. In this exercise, we will create a generic webhook integration with SevOne.\n\nThe basic steps to creating a generic webhook integration are as follows:\n\n1. Assuming the event source is capable of sending to a webhook, obtain a sample payload from that source system\n2. Create the integration via the Event Manager UI\n3. Paste the sample JSON event payload into the sample box\n4. Specify the payload-to-field mappings\n5. Test the integration\n\n\n**NOTE:** When you create a new webhook integration in Event Manager, it is essential to copy the generated webhook URL and save it in a text document for future reference. After the integration is saved, there is no way to retrieve the URL (although you can regenerate a new one).\n\nIn this exercise, it is assumed that the webhook configuration has been done already on the SevOne side, and it only awaits the webhook URL.\n\nFirst, navigate to: **Administration > Integration with other systems**. Click on **New integration** and **Configure** a new generic **Webhook** integration:\n\n![](images/generic_webhook.png)\n\nUse the following steps to set up your integration:\n\n* Configure the Name field with a label to identify your webhook - eg. \"SevOne\"\n* Copy the generated URL and save it to a text file for later use\n* Copy your sample SevOne payload into: **Example incoming request**\n* Configure the Event attributes\n* Check the Result field, to ensure there are no errors, and the mapped values are showing\n* Click Generate to generate a test event using the sample\n* Check the event in the Event List to ensure it looks correct\n* Copy the generated webhook over to your SevOne system as an vent target\n\nA sample SevOne payload is provided below, which may be used to set up this integration (copy into **Example incoming request**):\n\n```sh\n{\n\"deviceName\": \"testDeviceName\",\n\"occurrences\": \"4\",\n\"triggeringConditions\": \"Test\",\n\"thresholdId\": \"1-0\",\n\"check\": \"Website Alerts - testObjectName\",\n\"host\": \"testDeviceName\",\n\"assignedTo\": \"engineer@widgetcom.com\",\n\"pluginDescription\": \"HTTP Poller\",\n\"groupName\": \"All Devices\",\n\"objectName\": \"testObjectName\",\n\"routes\": [\"Netcool\"],\n\"alertMessage\": \"Default Alert Message\",\n\"hashtag\": \"hash\",\n\"policyId\": \"0\",\n\"hash\": \"hash\",\n\"url\": \"url\",\n\"deviceId\": \"-1\",\n\"alertState\": \"Alert\",\n\"sender\": \"SevOne\",\n\"objectAltName\": \"testObjectAltName\",\n\"thresholdName\": \"Website Alerts - testDeviceName - testObjectName\",\n\"alertType\": \"Metric\",\n\"alertId\": \"-1\",\n\"objectId\": \"-1\",\n\"cluster\": \"All Devices\",\n\"description\": \"Default Alert Message\",\n\"deviceIp\": \"10.1.2.3\",\n\"policyName\": \"Website Alerts\",\n\"objectDescription\": \"testObjectDescription\",\n\"pluginName\": \"HTTP\"\n}\n```\n\nRegarding the **Event attributes**, the following example mappings can be used:\n\n```sh\nSeverity: alertState = \"Emergency\" ? \"Critical\" : alertState = \"Alert\" ? \"Critical\" : alertState = \"Critical\" ? \"Critical\" : alertState = \"Error\" ? \"Major\" : alertState = \"Cleared\" ? \"Cleared\"\nSummary: description\nResource name: deviceName\nEvent type: policyName\n* Resolution:  alertState = \"Cleared\"\n* Sender: Name: \"SevOne\"\n* URL 1: URL: url\n* URL 1: Description: url\n\n* Fields marked with an asterisk first need to be added via the Optional event attributes link.\n\n```\n**NOTE:** Further information regarding the generic webhook event integration can be found here, including a table that maps the integration attributes to event fields in the Event Manager event store (Netcool/OMNIbus ObjectServer): https://www.ibm.com/docs/en/noi/1.6.5?topic=integrations-webhook\n\n**NOTE:** Complex mappings such as the Severity field example above can be mapped using JSONATA functions: http://docs.jsonata.org/object-functions.html\n\n\nThe completed configuration should look something like the following:\n\n![](images/mapping.png)\n\n\nThe sample event generated via the **Generate** function should look something like the following:\n\n![](images/event.png)\n\nYou could now take the URL you copied from the new integration to SevOne and use it to set up a new event target.\n\nYou have now completed this module and are ready for module \"Create sample topology in Watson for AIOps Event Manager\".\n\n\n[Reference Blog](https://community.ibm.com/community/user/aiops/blogs/zane-bray1/2022/04/22/getting-started-with-watson-aiops-event-manager-37)\n","type":"Mdx","contentDigest":"3c1a29c3c54dab5bf0a852236284b9b4","owner":"gatsby-plugin-mdx","counter":1041},"frontmatter":{"title":"Set up a webhook integration","description":"Set up webhook integrations in Event Manager"},"exports":{},"rawBody":"---\ntitle: Set up a webhook integration\ndescription: Set up webhook integrations in Event Manager\n---\n<AnchorLinks>\n  <AnchorLink>4-1: Overview</AnchorLink>\n  <AnchorLink>4-2: Create a new generic webhook integration with SevOne</AnchorLink>\n</AnchorLinks>\n\n\n## 4-1: Overview\n\nThis module focuses on the set up of a webhook integration, so that events can be received from a cloud event source. We will configure a generic webhook integration with SevOne as an example.\n\nBy the end of this module, you will have configured a webhook to be able to receive events from a SevOne system.\n\nA full list of the incoming event integrations are documented here: https://www.ibm.com/docs/en/noi/1.6.5?topic=systems-configuring-incoming-integrations\n\n## 4-2: Create a new generic webhook integration with SevOne\n\nWhile the event integrations provide a large number of off-the-shelf integrations, it is typical that a user will have an event source for which there is no corresponding integration. Like everything with Netcool, where there is not an off-the-shelf option, there is always the generic option of integration as a backstop. In this exercise, we will create a generic webhook integration with SevOne.\n\nThe basic steps to creating a generic webhook integration are as follows:\n\n1. Assuming the event source is capable of sending to a webhook, obtain a sample payload from that source system\n2. Create the integration via the Event Manager UI\n3. Paste the sample JSON event payload into the sample box\n4. Specify the payload-to-field mappings\n5. Test the integration\n\n\n**NOTE:** When you create a new webhook integration in Event Manager, it is essential to copy the generated webhook URL and save it in a text document for future reference. After the integration is saved, there is no way to retrieve the URL (although you can regenerate a new one).\n\nIn this exercise, it is assumed that the webhook configuration has been done already on the SevOne side, and it only awaits the webhook URL.\n\nFirst, navigate to: **Administration > Integration with other systems**. Click on **New integration** and **Configure** a new generic **Webhook** integration:\n\n![](images/generic_webhook.png)\n\nUse the following steps to set up your integration:\n\n* Configure the Name field with a label to identify your webhook - eg. \"SevOne\"\n* Copy the generated URL and save it to a text file for later use\n* Copy your sample SevOne payload into: **Example incoming request**\n* Configure the Event attributes\n* Check the Result field, to ensure there are no errors, and the mapped values are showing\n* Click Generate to generate a test event using the sample\n* Check the event in the Event List to ensure it looks correct\n* Copy the generated webhook over to your SevOne system as an vent target\n\nA sample SevOne payload is provided below, which may be used to set up this integration (copy into **Example incoming request**):\n\n```sh\n{\n\"deviceName\": \"testDeviceName\",\n\"occurrences\": \"4\",\n\"triggeringConditions\": \"Test\",\n\"thresholdId\": \"1-0\",\n\"check\": \"Website Alerts - testObjectName\",\n\"host\": \"testDeviceName\",\n\"assignedTo\": \"engineer@widgetcom.com\",\n\"pluginDescription\": \"HTTP Poller\",\n\"groupName\": \"All Devices\",\n\"objectName\": \"testObjectName\",\n\"routes\": [\"Netcool\"],\n\"alertMessage\": \"Default Alert Message\",\n\"hashtag\": \"hash\",\n\"policyId\": \"0\",\n\"hash\": \"hash\",\n\"url\": \"url\",\n\"deviceId\": \"-1\",\n\"alertState\": \"Alert\",\n\"sender\": \"SevOne\",\n\"objectAltName\": \"testObjectAltName\",\n\"thresholdName\": \"Website Alerts - testDeviceName - testObjectName\",\n\"alertType\": \"Metric\",\n\"alertId\": \"-1\",\n\"objectId\": \"-1\",\n\"cluster\": \"All Devices\",\n\"description\": \"Default Alert Message\",\n\"deviceIp\": \"10.1.2.3\",\n\"policyName\": \"Website Alerts\",\n\"objectDescription\": \"testObjectDescription\",\n\"pluginName\": \"HTTP\"\n}\n```\n\nRegarding the **Event attributes**, the following example mappings can be used:\n\n```sh\nSeverity: alertState = \"Emergency\" ? \"Critical\" : alertState = \"Alert\" ? \"Critical\" : alertState = \"Critical\" ? \"Critical\" : alertState = \"Error\" ? \"Major\" : alertState = \"Cleared\" ? \"Cleared\"\nSummary: description\nResource name: deviceName\nEvent type: policyName\n* Resolution:  alertState = \"Cleared\"\n* Sender: Name: \"SevOne\"\n* URL 1: URL: url\n* URL 1: Description: url\n\n* Fields marked with an asterisk first need to be added via the Optional event attributes link.\n\n```\n**NOTE:** Further information regarding the generic webhook event integration can be found here, including a table that maps the integration attributes to event fields in the Event Manager event store (Netcool/OMNIbus ObjectServer): https://www.ibm.com/docs/en/noi/1.6.5?topic=integrations-webhook\n\n**NOTE:** Complex mappings such as the Severity field example above can be mapped using JSONATA functions: http://docs.jsonata.org/object-functions.html\n\n\nThe completed configuration should look something like the following:\n\n![](images/mapping.png)\n\n\nThe sample event generated via the **Generate** function should look something like the following:\n\n![](images/event.png)\n\nYou could now take the URL you copied from the new integration to SevOne and use it to set up a new event target.\n\nYou have now completed this module and are ready for module \"Create sample topology in Watson for AIOps Event Manager\".\n\n\n[Reference Blog](https://community.ibm.com/community/user/aiops/blogs/zane-bray1/2022/04/22/getting-started-with-watson-aiops-event-manager-37)\n","fileAbsolutePath":"/home/amar/workspace/git-repos/github.com/IBM/waiops-tech-jam/src/pages/tutorials/aiops/webhook/index.mdx"}}},"staticQueryHashes":["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}